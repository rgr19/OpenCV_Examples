<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Intel(R) Threading Building Blocks Doxygen Documentation: tbb::internal::generic_scheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Intel(R) Threading Building Blocks Doxygen Documentation
   &#160;<span id="projectnumber">version 4.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00302.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="a03385.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tbb::internal::generic_scheduler Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Work stealing task scheduler.  
 <a href="a00302.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a01062_source.html">scheduler.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tbb::internal::generic_scheduler:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a03386.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
Collaboration diagram for tbb::internal::generic_scheduler:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a03387.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a22a847d9945a845e136c9163f835adcd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a> () const </td></tr>
<tr class="separator:a22a847d9945a845e136c9163f835adcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228932018abdf86ec504ffc055bf6188"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a228932018abdf86ec504ffc055bf6188">is_local_task_pool_quiescent</a> () const </td></tr>
<tr class="separator:a228932018abdf86ec504ffc055bf6188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b5b30c44c0a0a0d6fa6548fead0f879"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a1b5b30c44c0a0a0d6fa6548fead0f879">is_quiescent_local_task_pool_empty</a> () const </td></tr>
<tr class="separator:a1b5b30c44c0a0a0d6fa6548fead0f879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41fe4dd6cf0d0bd7db3440ff1f5e70ff"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a41fe4dd6cf0d0bd7db3440ff1f5e70ff">is_quiescent_local_task_pool_reset</a> () const </td></tr>
<tr class="separator:a41fe4dd6cf0d0bd7db3440ff1f5e70ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ab89891d3c1e3209cffced8bf93b124"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a5ab89891d3c1e3209cffced8bf93b124">attach_mailbox</a> (<a class="el" href="a01133.html#a3e3837fb3ca7bbf4cf4752c58cbed886">affinity_id</a> <a class="el" href="a01016.html#a970de3b8bb056cce7462ba20d36c4ae2">id</a>)</td></tr>
<tr class="separator:a5ab89891d3c1e3209cffced8bf93b124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd799eae7903abc75b7a7aafd36e20db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#afd799eae7903abc75b7a7aafd36e20db">init_stack_info</a> ()</td></tr>
<tr class="memdesc:afd799eae7903abc75b7a7aafd36e20db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the data necessary for the stealing limiting heuristics.  <a href="#afd799eae7903abc75b7a7aafd36e20db">More...</a><br /></td></tr>
<tr class="separator:afd799eae7903abc75b7a7aafd36e20db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c00f465a90ee09a240d1f81de5f635b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a1c00f465a90ee09a240d1f81de5f635b">can_steal</a> ()</td></tr>
<tr class="memdesc:a1c00f465a90ee09a240d1f81de5f635b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if stealing is allowed.  <a href="#a1c00f465a90ee09a240d1f81de5f635b">More...</a><br /></td></tr>
<tr class="separator:a1c00f465a90ee09a240d1f81de5f635b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af222cccbf09e91c9c9caaad81f8d993d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#af222cccbf09e91c9c9caaad81f8d993d">publish_task_pool</a> ()</td></tr>
<tr class="memdesc:af222cccbf09e91c9c9caaad81f8d993d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by workers to enter the task pool.  <a href="#af222cccbf09e91c9c9caaad81f8d993d">More...</a><br /></td></tr>
<tr class="separator:af222cccbf09e91c9c9caaad81f8d993d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad4a3aef975ca2516a81640654a65717"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#aad4a3aef975ca2516a81640654a65717">leave_task_pool</a> ()</td></tr>
<tr class="memdesc:aad4a3aef975ca2516a81640654a65717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Leave the task pool.  <a href="#aad4a3aef975ca2516a81640654a65717">More...</a><br /></td></tr>
<tr class="separator:aad4a3aef975ca2516a81640654a65717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8f6a6793961db84240434fffd7b50f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ad8f6a6793961db84240434fffd7b50f3">reset_task_pool_and_leave</a> ()</td></tr>
<tr class="memdesc:ad8f6a6793961db84240434fffd7b50f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets head and tail indices to 0, and leaves task pool.  <a href="#ad8f6a6793961db84240434fffd7b50f3">More...</a><br /></td></tr>
<tr class="separator:ad8f6a6793961db84240434fffd7b50f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28bc27fa6c9a0cea424ced83b9f020ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a28bc27fa6c9a0cea424ced83b9f020ac">lock_task_pool</a> (<a class="el" href="a00061.html">arena_slot</a> *victim_arena_slot) const </td></tr>
<tr class="memdesc:a28bc27fa6c9a0cea424ced83b9f020ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks victim's task pool, and returns pointer to it. The pointer can be NULL.  <a href="#a28bc27fa6c9a0cea424ced83b9f020ac">More...</a><br /></td></tr>
<tr class="separator:a28bc27fa6c9a0cea424ced83b9f020ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d6340b7bd950b0492e970ff62433198"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a5d6340b7bd950b0492e970ff62433198">unlock_task_pool</a> (<a class="el" href="a00061.html">arena_slot</a> *victim_arena_slot, <a class="el" href="a00778.html">task</a> **victim_task_pool) const </td></tr>
<tr class="memdesc:a5d6340b7bd950b0492e970ff62433198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks victim's task pool.  <a href="#a5d6340b7bd950b0492e970ff62433198">More...</a><br /></td></tr>
<tr class="separator:a5d6340b7bd950b0492e970ff62433198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e2af1d0f7af34dee87a5b207d498f59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool</a> () const </td></tr>
<tr class="memdesc:a6e2af1d0f7af34dee87a5b207d498f59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks the local task pool.  <a href="#a6e2af1d0f7af34dee87a5b207d498f59">More...</a><br /></td></tr>
<tr class="separator:a6e2af1d0f7af34dee87a5b207d498f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24dd9ef31d1f73ea2fadcc35df6d9d21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">release_task_pool</a> () const </td></tr>
<tr class="memdesc:a24dd9ef31d1f73ea2fadcc35df6d9d21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the local task pool.  <a href="#a24dd9ef31d1f73ea2fadcc35df6d9d21">More...</a><br /></td></tr>
<tr class="separator:a24dd9ef31d1f73ea2fadcc35df6d9d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a62642cb4b1ba391b8d3b9a00dca541"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a8a62642cb4b1ba391b8d3b9a00dca541">prepare_for_spawning</a> (<a class="el" href="a00778.html">task</a> *t)</td></tr>
<tr class="memdesc:a8a62642cb4b1ba391b8d3b9a00dca541"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if t is affinitized to another thread, and if so, bundles it as proxy.  <a href="#a8a62642cb4b1ba391b8d3b9a00dca541">More...</a><br /></td></tr>
<tr class="separator:a8a62642cb4b1ba391b8d3b9a00dca541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f7d3a75d44d62525c8b31c32917d242"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a7f7d3a75d44d62525c8b31c32917d242">commit_spawned_tasks</a> (size_t new_tail)</td></tr>
<tr class="memdesc:a7f7d3a75d44d62525c8b31c32917d242"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes newly spawned tasks visible to thieves.  <a href="#a7f7d3a75d44d62525c8b31c32917d242">More...</a><br /></td></tr>
<tr class="separator:a7f7d3a75d44d62525c8b31c32917d242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecf34e6a9902af76bbbeab1fd3851df8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#aecf34e6a9902af76bbbeab1fd3851df8">commit_relocated_tasks</a> (size_t new_tail)</td></tr>
<tr class="memdesc:aecf34e6a9902af76bbbeab1fd3851df8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes relocated tasks visible to thieves and releases the local task pool.  <a href="#aecf34e6a9902af76bbbeab1fd3851df8">More...</a><br /></td></tr>
<tr class="separator:aecf34e6a9902af76bbbeab1fd3851df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10c72a4aad7308d944cef26502ece55e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task</a> (<a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>(<a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation))</td></tr>
<tr class="memdesc:a10c72a4aad7308d944cef26502ece55e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a task from the local pool.  <a href="#a10c72a4aad7308d944cef26502ece55e">More...</a><br /></td></tr>
<tr class="separator:a10c72a4aad7308d944cef26502ece55e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad832dcce47939c2fd150a0e63a395ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#aad832dcce47939c2fd150a0e63a395ec">get_task</a> (size_t T)</td></tr>
<tr class="memdesc:aad832dcce47939c2fd150a0e63a395ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a task from the local pool at specified location T.  <a href="#aad832dcce47939c2fd150a0e63a395ec">More...</a><br /></td></tr>
<tr class="separator:aad832dcce47939c2fd150a0e63a395ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5657ac6c517d9bbf59a424ef330640bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a5657ac6c517d9bbf59a424ef330640bb">get_mailbox_task</a> (<a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>(<a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation))</td></tr>
<tr class="memdesc:a5657ac6c517d9bbf59a424ef330640bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to get a task from the mailbox.  <a href="#a5657ac6c517d9bbf59a424ef330640bb">More...</a><br /></td></tr>
<tr class="separator:a5657ac6c517d9bbf59a424ef330640bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb8f3f3967170ca9398e55b90220c3cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#abb8f3f3967170ca9398e55b90220c3cb">steal_task</a> (<a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>(<a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation))</td></tr>
<tr class="memdesc:abb8f3f3967170ca9398e55b90220c3cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to steal a task from a randomly chosen thread/scheduler.  <a href="#abb8f3f3967170ca9398e55b90220c3cb">More...</a><br /></td></tr>
<tr class="separator:abb8f3f3967170ca9398e55b90220c3cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15b506cb1b1da8e37255fc2fcdf250f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a15b506cb1b1da8e37255fc2fcdf250f0">steal_task_from</a> (<a class="el" href="a01063.html#ae8bf2edd69c1485ce30d4e88cc7e27d2">__TBB_ISOLATION_ARG</a>(<a class="el" href="a00061.html">arena_slot</a> &amp;victim_arena_slot, <a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation))</td></tr>
<tr class="memdesc:a15b506cb1b1da8e37255fc2fcdf250f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Steal task from another scheduler's ready pool.  <a href="#a15b506cb1b1da8e37255fc2fcdf250f0">More...</a><br /></td></tr>
<tr class="separator:a15b506cb1b1da8e37255fc2fcdf250f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0460616fb84af745b12688927ff1bb7d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool</a> (size_t n)</td></tr>
<tr class="memdesc:a0460616fb84af745b12688927ff1bb7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes sure that the task pool can accommodate at least n more elements.  <a href="#a0460616fb84af745b12688927ff1bb7d">More...</a><br /></td></tr>
<tr class="separator:a0460616fb84af745b12688927ff1bb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac223f7892d65e496c37190c4009ea1f7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ac223f7892d65e496c37190c4009ea1f7">cleanup_master</a> (bool blocking_terminate)</td></tr>
<tr class="memdesc:ac223f7892d65e496c37190c4009ea1f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform necessary cleanup when a master thread stops using TBB.  <a href="#ac223f7892d65e496c37190c4009ea1f7">More...</a><br /></td></tr>
<tr class="separator:ac223f7892d65e496c37190c4009ea1f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08edecb9bd9ef648bada9fb5b1febeec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a08edecb9bd9ef648bada9fb5b1febeec">assert_task_pool_valid</a> () const </td></tr>
<tr class="separator:a08edecb9bd9ef648bada9fb5b1febeec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa101d77dc7a5e986270073e1c0e09cf6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#aa101d77dc7a5e986270073e1c0e09cf6">attach_arena</a> (<a class="el" href="a00059.html">arena</a> *, size_t index, bool is_master)</td></tr>
<tr class="separator:aa101d77dc7a5e986270073e1c0e09cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c98d05ea5c1e309b836335ea9af79fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a7c98d05ea5c1e309b836335ea9af79fa">nested_arena_entry</a> (<a class="el" href="a00059.html">arena</a> *, size_t)</td></tr>
<tr class="separator:a7c98d05ea5c1e309b836335ea9af79fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80a47a82aea82a8ad418fbc36887ac9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ab80a47a82aea82a8ad418fbc36887ac9">nested_arena_exit</a> ()</td></tr>
<tr class="separator:ab80a47a82aea82a8ad418fbc36887ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a0f285acb9cfb21b7df95a386bd6860"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a2a0f285acb9cfb21b7df95a386bd6860">wait_until_empty</a> ()</td></tr>
<tr class="separator:a2a0f285acb9cfb21b7df95a386bd6860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d51eca32dc45cba3e0ec161240bfaca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a4d51eca32dc45cba3e0ec161240bfaca">spawn</a> (<a class="el" href="a00778.html">task</a> &amp;<a class="el" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>, <a class="el" href="a00778.html">task</a> *&amp;next) <a class="el" href="a01098.html#a96e63952df71e13e2b1122e612966ef7">__TBB_override</a></td></tr>
<tr class="memdesc:a4d51eca32dc45cba3e0ec161240bfaca"><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal use only.  <a href="#a4d51eca32dc45cba3e0ec161240bfaca">More...</a><br /></td></tr>
<tr class="separator:a4d51eca32dc45cba3e0ec161240bfaca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0b5fdf74860259585e55f7bf2edb8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a6e0b5fdf74860259585e55f7bf2edb8e">spawn_root_and_wait</a> (<a class="el" href="a00778.html">task</a> &amp;<a class="el" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>, <a class="el" href="a00778.html">task</a> *&amp;next) <a class="el" href="a01098.html#a96e63952df71e13e2b1122e612966ef7">__TBB_override</a></td></tr>
<tr class="memdesc:a6e0b5fdf74860259585e55f7bf2edb8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal use only.  <a href="#a6e0b5fdf74860259585e55f7bf2edb8e">More...</a><br /></td></tr>
<tr class="separator:a6e0b5fdf74860259585e55f7bf2edb8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21fedf3ec39056fdd7b7718f2421e229"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue</a> (<a class="el" href="a00778.html">task</a> &amp;, <a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> *reserved) <a class="el" href="a01098.html#a96e63952df71e13e2b1122e612966ef7">__TBB_override</a></td></tr>
<tr class="memdesc:a21fedf3ec39056fdd7b7718f2421e229"><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal use only.  <a href="#a21fedf3ec39056fdd7b7718f2421e229">More...</a><br /></td></tr>
<tr class="separator:a21fedf3ec39056fdd7b7718f2421e229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43166ffd9d7fb624158872394832f17"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn</a> (<a class="el" href="a00778.html">task</a> *<a class="el" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>, <a class="el" href="a00778.html">task</a> *&amp;next)</td></tr>
<tr class="separator:ae43166ffd9d7fb624158872394832f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dacb8fead5795de1011018b83d68d61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a9dacb8fead5795de1011018b83d68d61">local_spawn_root_and_wait</a> (<a class="el" href="a00778.html">task</a> *<a class="el" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>, <a class="el" href="a00778.html">task</a> *&amp;next)</td></tr>
<tr class="separator:a9dacb8fead5795de1011018b83d68d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a509997dbb9b97ad2cca0a3af76c04e90"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">local_wait_for_all</a> (<a class="el" href="a00778.html">task</a> &amp;<a class="el" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>, <a class="el" href="a00778.html">task</a> *child)=0</td></tr>
<tr class="separator:a509997dbb9b97ad2cca0a3af76c04e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e6dd672693eb34cd6fd46ed7a7c6a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler</a> ()</td></tr>
<tr class="memdesc:a66e6dd672693eb34cd6fd46ed7a7c6a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy and deallocate this scheduler object.  <a href="#a66e6dd672693eb34cd6fd46ed7a7c6a6">More...</a><br /></td></tr>
<tr class="separator:a66e6dd672693eb34cd6fd46ed7a7c6a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0d316e9f3063c6b57fa21e0716d4d77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">allocate_task</a> (size_t number_of_bytes, <a class="el" href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a>(<a class="el" href="a00778.html">task</a> *<a class="el" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>, <a class="el" href="a00784.html">task_group_context</a> *context))</td></tr>
<tr class="memdesc:aa0d316e9f3063c6b57fa21e0716d4d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate task object, either from the heap or a free list.  <a href="#aa0d316e9f3063c6b57fa21e0716d4d77">More...</a><br /></td></tr>
<tr class="separator:aa0d316e9f3063c6b57fa21e0716d4d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12dd37171af77214add72a973e6b71ba"><td class="memTemplParams" colspan="2">template&lt;free_task_hint h&gt; </td></tr>
<tr class="memitem:a12dd37171af77214add72a973e6b71ba"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="a00302.html#a12dd37171af77214add72a973e6b71ba">free_task</a> (<a class="el" href="a00778.html">task</a> &amp;t)</td></tr>
<tr class="memdesc:a12dd37171af77214add72a973e6b71ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put task on free list.  <a href="#a12dd37171af77214add72a973e6b71ba">More...</a><br /></td></tr>
<tr class="separator:a12dd37171af77214add72a973e6b71ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad965858a5e7cb5574926d8d1692063b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ad965858a5e7cb5574926d8d1692063b5">deallocate_task</a> (<a class="el" href="a00778.html">task</a> &amp;t)</td></tr>
<tr class="memdesc:ad965858a5e7cb5574926d8d1692063b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return task object to the memory allocator.  <a href="#ad965858a5e7cb5574926d8d1692063b5">More...</a><br /></td></tr>
<tr class="separator:ad965858a5e7cb5574926d8d1692063b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4451a0cd678c9d7f37c80d581e3d4b14"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">is_worker</a> () const </td></tr>
<tr class="memdesc:a4451a0cd678c9d7f37c80d581e3d4b14"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if running on a worker thread, false otherwise.  <a href="#a4451a0cd678c9d7f37c80d581e3d4b14">More...</a><br /></td></tr>
<tr class="separator:a4451a0cd678c9d7f37c80d581e3d4b14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd4da1524fbd5b79bb84f0631c2b6e0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a8bd4da1524fbd5b79bb84f0631c2b6e0">outermost_level</a> () const </td></tr>
<tr class="memdesc:a8bd4da1524fbd5b79bb84f0631c2b6e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the scheduler is on the outermost dispatch level.  <a href="#a8bd4da1524fbd5b79bb84f0631c2b6e0">More...</a><br /></td></tr>
<tr class="separator:a8bd4da1524fbd5b79bb84f0631c2b6e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84fe7450cc14ca226340cf8bffd379c7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a84fe7450cc14ca226340cf8bffd379c7">master_outermost_level</a> () const </td></tr>
<tr class="memdesc:a84fe7450cc14ca226340cf8bffd379c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the scheduler is on the outermost dispatch level in a master thread.  <a href="#a84fe7450cc14ca226340cf8bffd379c7">More...</a><br /></td></tr>
<tr class="separator:a84fe7450cc14ca226340cf8bffd379c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e7eff5365d63114c100e0a490e04884"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a4e7eff5365d63114c100e0a490e04884">worker_outermost_level</a> () const </td></tr>
<tr class="memdesc:a4e7eff5365d63114c100e0a490e04884"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the scheduler is on the outermost dispatch level in a worker thread.  <a href="#a4e7eff5365d63114c100e0a490e04884">More...</a><br /></td></tr>
<tr class="separator:a4e7eff5365d63114c100e0a490e04884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2b38fa415abd3f28025e96e5d27995a"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#af2b38fa415abd3f28025e96e5d27995a">max_threads_in_arena</a> ()</td></tr>
<tr class="memdesc:af2b38fa415abd3f28025e96e5d27995a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the concurrency limit of the current arena.  <a href="#af2b38fa415abd3f28025e96e5d27995a">More...</a><br /></td></tr>
<tr class="separator:af2b38fa415abd3f28025e96e5d27995a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ac634dbb5e817484963c6c04c0ae8a"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a23ac634dbb5e817484963c6c04c0ae8a">receive_or_steal_task</a> (<a class="el" href="a01063.html#ae8bf2edd69c1485ce30d4e88cc7e27d2">__TBB_ISOLATION_ARG</a>(<a class="el" href="a01098.html#a4b711c848444075f0760dd98fe929c39">__TBB_atomic</a> <a class="el" href="a01133.html#a2c581fb16c2799f2d2b547dec0ff90be">reference_count</a> &amp;completion_ref_count, <a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation))=0</td></tr>
<tr class="memdesc:a23ac634dbb5e817484963c6c04c0ae8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try getting a task from other threads (via mailbox, stealing, FIFO queue, orphans adoption).  <a href="#a23ac634dbb5e817484963c6c04c0ae8a">More...</a><br /></td></tr>
<tr class="separator:a23ac634dbb5e817484963c6c04c0ae8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a720c816c0253fe199e4583cd24090e9b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a720c816c0253fe199e4583cd24090e9b">free_nonlocal_small_task</a> (<a class="el" href="a00778.html">task</a> &amp;t)</td></tr>
<tr class="memdesc:a720c816c0253fe199e4583cd24090e9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a small task t that that was allocated by a different scheduler.  <a href="#a720c816c0253fe199e4583cd24090e9b">More...</a><br /></td></tr>
<tr class="separator:a720c816c0253fe199e4583cd24090e9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a00676"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a00676')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="a00676.html">tbb::internal::scheduler</a></td></tr>
<tr class="memitem:a297a55cbe83533182d03bd07d82be9f9 inherit pub_methods_a00676"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00676.html#a297a55cbe83533182d03bd07d82be9f9">wait_for_all</a> (<a class="el" href="a00778.html">task</a> &amp;<a class="el" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>, <a class="el" href="a00778.html">task</a> *child)=0</td></tr>
<tr class="memdesc:a297a55cbe83533182d03bd07d82be9f9 inherit pub_methods_a00676"><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal use only.  <a href="#a297a55cbe83533182d03bd07d82be9f9">More...</a><br /></td></tr>
<tr class="separator:a297a55cbe83533182d03bd07d82be9f9 inherit pub_methods_a00676"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70925522447fd852f6cf4a2b37417ed inherit pub_methods_a00676"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00676.html#ad70925522447fd852f6cf4a2b37417ed">~scheduler</a> ()=0</td></tr>
<tr class="memdesc:ad70925522447fd852f6cf4a2b37417ed inherit pub_methods_a00676"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pure virtual destructor;.  <a href="#ad70925522447fd852f6cf4a2b37417ed">More...</a><br /></td></tr>
<tr class="separator:ad70925522447fd852f6cf4a2b37417ed inherit pub_methods_a00676"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a33519b4cf710f8c46129672f79fb6ec4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">is_version_3_task</a> (<a class="el" href="a00778.html">task</a> &amp;t)</td></tr>
<tr class="separator:a33519b4cf710f8c46129672f79fb6ec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a868812dd8d875a225a6f589fdbaafe54"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">is_proxy</a> (const <a class="el" href="a00778.html">task</a> &amp;t)</td></tr>
<tr class="memdesc:a868812dd8d875a225a6f589fdbaafe54"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if t is a <a class="el" href="a00790.html">task_proxy</a>.  <a href="#a868812dd8d875a225a6f589fdbaafe54">More...</a><br /></td></tr>
<tr class="separator:a868812dd8d875a225a6f589fdbaafe54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7fb04a73dbb75dd8db5c9637bfadeae"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a00302.html">generic_scheduler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ac7fb04a73dbb75dd8db5c9637bfadeae">create_master</a> (<a class="el" href="a00059.html">arena</a> *a)</td></tr>
<tr class="memdesc:ac7fb04a73dbb75dd8db5c9637bfadeae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a scheduler for a master thread.  <a href="#ac7fb04a73dbb75dd8db5c9637bfadeae">More...</a><br /></td></tr>
<tr class="separator:ac7fb04a73dbb75dd8db5c9637bfadeae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec1108924834fb3c3e1bc0d2142bccb0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a00302.html">generic_scheduler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#aec1108924834fb3c3e1bc0d2142bccb0">create_worker</a> (<a class="el" href="a00489.html">market</a> &amp;m, size_t index)</td></tr>
<tr class="memdesc:aec1108924834fb3c3e1bc0d2142bccb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a scheduler for a worker thread.  <a href="#aec1108924834fb3c3e1bc0d2142bccb0">More...</a><br /></td></tr>
<tr class="separator:aec1108924834fb3c3e1bc0d2142bccb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a0b659589202963562cbdb23465807"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ae6a0b659589202963562cbdb23465807">cleanup_worker</a> (<a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> *arg, bool worker)</td></tr>
<tr class="memdesc:ae6a0b659589202963562cbdb23465807"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform necessary cleanup when a worker thread finishes.  <a href="#ae6a0b659589202963562cbdb23465807">More...</a><br /></td></tr>
<tr class="separator:ae6a0b659589202963562cbdb23465807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb580929e3e34d6da1728e6fee8b6979"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#abb580929e3e34d6da1728e6fee8b6979">plugged_return_list</a> ()</td></tr>
<tr class="memdesc:abb580929e3e34d6da1728e6fee8b6979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special value used to mark my_return_list as not taking any more entries.  <a href="#abb580929e3e34d6da1728e6fee8b6979">More...</a><br /></td></tr>
<tr class="separator:abb580929e3e34d6da1728e6fee8b6979"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ade9f23ce97db8725a9c3718e76aa682d"><td class="memItemLeft" align="right" valign="top">uintptr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">my_stealing_threshold</a></td></tr>
<tr class="memdesc:ade9f23ce97db8725a9c3718e76aa682d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Position in the call stack specifying its maximal filling when stealing is still allowed.  <a href="#ade9f23ce97db8725a9c3718e76aa682d">More...</a><br /></td></tr>
<tr class="separator:ade9f23ce97db8725a9c3718e76aa682d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac652e4a610353888a31352e678955e1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00489.html">market</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a></td></tr>
<tr class="memdesc:ac652e4a610353888a31352e678955e1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The market I am in.  <a href="#ac652e4a610353888a31352e678955e1b">More...</a><br /></td></tr>
<tr class="separator:ac652e4a610353888a31352e678955e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee56a8b51b71d3f96f9c8cacf00fe845"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00251.html">FastRandom</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#aee56a8b51b71d3f96f9c8cacf00fe845">my_random</a></td></tr>
<tr class="memdesc:aee56a8b51b71d3f96f9c8cacf00fe845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Random number generator used for picking a random victim from which to steal.  <a href="#aee56a8b51b71d3f96f9c8cacf00fe845">More...</a><br /></td></tr>
<tr class="separator:aee56a8b51b71d3f96f9c8cacf00fe845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52ed26dede8410a72f37bce24cb26239"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a></td></tr>
<tr class="memdesc:a52ed26dede8410a72f37bce24cb26239"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free list of small tasks that can be reused.  <a href="#a52ed26dede8410a72f37bce24cb26239">More...</a><br /></td></tr>
<tr class="separator:a52ed26dede8410a72f37bce24cb26239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc495d5b077a2ef1b05e15e820555d90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a></td></tr>
<tr class="memdesc:abc495d5b077a2ef1b05e15e820555d90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fake root task created by slave threads.  <a href="#abc495d5b077a2ef1b05e15e820555d90">More...</a><br /></td></tr>
<tr class="separator:abc495d5b077a2ef1b05e15e820555d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cf8d776a439320e1e001381cf5d4ad7"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a8cf8d776a439320e1e001381cf5d4ad7">my_ref_count</a></td></tr>
<tr class="memdesc:a8cf8d776a439320e1e001381cf5d4ad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference count for scheduler.  <a href="#a8cf8d776a439320e1e001381cf5d4ad7">More...</a><br /></td></tr>
<tr class="separator:a8cf8d776a439320e1e001381cf5d4ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb5b021643394b6d3f743bea9cb5e2bd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#afb5b021643394b6d3f743bea9cb5e2bd">my_auto_initialized</a></td></tr>
<tr class="memdesc:afb5b021643394b6d3f743bea9cb5e2bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if *this was created by automatic TBB initialization.  <a href="#afb5b021643394b6d3f743bea9cb5e2bd">More...</a><br /></td></tr>
<tr class="separator:afb5b021643394b6d3f743bea9cb5e2bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bd421a07fae7a1c9e3fa49e005bb513"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01098.html#a4b711c848444075f0760dd98fe929c39">__TBB_atomic</a> intptr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">my_small_task_count</a></td></tr>
<tr class="memdesc:a4bd421a07fae7a1c9e3fa49e005bb513"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of small tasks that have been allocated by this scheduler.  <a href="#a4bd421a07fae7a1c9e3fa49e005bb513">More...</a><br /></td></tr>
<tr class="separator:a4bd421a07fae7a1c9e3fa49e005bb513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5777a002f8b7b3a72cb7fc4a477fb29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a></td></tr>
<tr class="memdesc:ab5777a002f8b7b3a72cb7fc4a477fb29"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of small tasks that have been returned to this scheduler by other schedulers.  <a href="#ab5777a002f8b7b3a72cb7fc4a477fb29">More...</a><br /></td></tr>
<tr class="separator:ab5777a002f8b7b3a72cb7fc4a477fb29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_a00392"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_a00392')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="a00392.html">tbb::internal::intrusive_list_node</a></td></tr>
<tr class="memitem:a35bf2ac45f7e99aab397d8ea40202ab8 inherit pub_attribs_a00392"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00392.html">intrusive_list_node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00392.html#a35bf2ac45f7e99aab397d8ea40202ab8">my_prev_node</a></td></tr>
<tr class="separator:a35bf2ac45f7e99aab397d8ea40202ab8 inherit pub_attribs_a00392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6cb765d8507ed7440b4db424bc6c70 inherit pub_attribs_a00392"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00392.html">intrusive_list_node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00392.html#a4b6cb765d8507ed7440b4db424bc6c70">my_next_node</a></td></tr>
<tr class="separator:a4b6cb765d8507ed7440b4db424bc6c70 inherit pub_attribs_a00392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_a00678"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_a00678')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="a00678.html">tbb::internal::scheduler_state</a></td></tr>
<tr class="memitem:a35aa72cfdda3b500e908925a3d6da747 inherit pub_attribs_a00678"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a></td></tr>
<tr class="memdesc:a35aa72cfdda3b500e908925a3d6da747 inherit pub_attribs_a00678"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the arena slot the scheduler occupies now, or occupied last time.  <a href="#a35aa72cfdda3b500e908925a3d6da747">More...</a><br /></td></tr>
<tr class="separator:a35aa72cfdda3b500e908925a3d6da747 inherit pub_attribs_a00678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f2fdcecd347bf767e89fda580545c1a inherit pub_attribs_a00678"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00061.html">arena_slot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a></td></tr>
<tr class="memdesc:a6f2fdcecd347bf767e89fda580545c1a inherit pub_attribs_a00678"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the slot in the arena we own at the moment.  <a href="#a6f2fdcecd347bf767e89fda580545c1a">More...</a><br /></td></tr>
<tr class="separator:a6f2fdcecd347bf767e89fda580545c1a inherit pub_attribs_a00678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b830853cb0386a2b8744d4c7dff3a80 inherit pub_attribs_a00678"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00059.html">arena</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a></td></tr>
<tr class="memdesc:a6b830853cb0386a2b8744d4c7dff3a80 inherit pub_attribs_a00678"><td class="mdescLeft">&#160;</td><td class="mdescRight">The arena that I own (if master) or am servicing at the moment (if worker)  <a href="#a6b830853cb0386a2b8744d4c7dff3a80">More...</a><br /></td></tr>
<tr class="separator:a6b830853cb0386a2b8744d4c7dff3a80 inherit pub_attribs_a00678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac9af4d8baddbbc2af433e11297be8a5 inherit pub_attribs_a00678"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00778.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">my_innermost_running_task</a></td></tr>
<tr class="memdesc:aac9af4d8baddbbc2af433e11297be8a5 inherit pub_attribs_a00678"><td class="mdescLeft">&#160;</td><td class="mdescRight">Innermost task whose <a class="el" href="a00778.html#a092e58368b7684207bd3020c6d104f2a" title="Should be overridden by derived classes. ">task::execute()</a> is running. A dummy task on the outermost level.  <a href="#aac9af4d8baddbbc2af433e11297be8a5">More...</a><br /></td></tr>
<tr class="separator:aac9af4d8baddbbc2af433e11297be8a5 inherit pub_attribs_a00678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b120ea3121cd82f578eef2c1319f9fe inherit pub_attribs_a00678"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00480.html">mail_inbox</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">my_inbox</a></td></tr>
<tr class="separator:a5b120ea3121cd82f578eef2c1319f9fe inherit pub_attribs_a00678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a635bad42d492013d4a06d1af0c452b inherit pub_attribs_a00678"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a01133.html#a3e3837fb3ca7bbf4cf4752c58cbed886">affinity_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">my_affinity_id</a></td></tr>
<tr class="memdesc:a3a635bad42d492013d4a06d1af0c452b inherit pub_attribs_a00678"><td class="mdescLeft">&#160;</td><td class="mdescRight">The mailbox id assigned to this scheduler.  <a href="#a3a635bad42d492013d4a06d1af0c452b">More...</a><br /></td></tr>
<tr class="separator:a3a635bad42d492013d4a06d1af0c452b inherit pub_attribs_a00678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed181c52b8462c43272d45e625cd31fa inherit pub_attribs_a00678"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00677.html">scheduler_properties</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">my_properties</a></td></tr>
<tr class="separator:aed181c52b8462c43272d45e625cd31fa inherit pub_attribs_a00678"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:afbb75edc69c2ed1bcbf70098ca24a523"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#afbb75edc69c2ed1bcbf70098ca24a523">quick_task_size</a> = 256-<a class="el" href="a01133.html#a0630d59441f75e740be0b003d2922df8">task_prefix_reservation_size</a></td></tr>
<tr class="memdesc:afbb75edc69c2ed1bcbf70098ca24a523"><td class="mdescLeft">&#160;</td><td class="mdescRight">If sizeof(task) is &lt;=quick_task_size, it is handled on a free list instead of malloc'd.  <a href="#afbb75edc69c2ed1bcbf70098ca24a523">More...</a><br /></td></tr>
<tr class="separator:afbb75edc69c2ed1bcbf70098ca24a523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afae85a4245c85c65c3cd51e63125f23e"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#afae85a4245c85c65c3cd51e63125f23e">null_arena_index</a> = ~size_t(0)</td></tr>
<tr class="separator:afae85a4245c85c65c3cd51e63125f23e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1190ee0529a9280846bd50c4f50c8398"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a> = 64</td></tr>
<tr class="separator:a1190ee0529a9280846bd50c4f50c8398"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad7c11742ee005f6d377095062b42a5d8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a> (<a class="el" href="a00489.html">market</a> &amp;)</td></tr>
<tr class="separator:ad7c11742ee005f6d377095062b42a5d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a276a67d14225fdfbb225cc85299850e3"><td class="memTemplParams" colspan="2">template&lt;typename SchedulerTraits &gt; </td></tr>
<tr class="memitem:a276a67d14225fdfbb225cc85299850e3"><td class="memTemplItemLeft" align="right" valign="top">class&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="a00302.html#a276a67d14225fdfbb225cc85299850e3">custom_scheduler</a></td></tr>
<tr class="separator:a276a67d14225fdfbb225cc85299850e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Work stealing task scheduler. </p>
<p>None of the fields here are ever read or written by threads other than the thread that creates the instance.</p>
<p>Class <a class="el" href="a00302.html" title="Work stealing task scheduler. ">generic_scheduler</a> is an abstract base class that contains most of the scheduler, except for tweaks specific to processors and tools (e.g. VTune). The derived template class custom_scheduler&lt;SchedulerTraits&gt; fills in the tweaks. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00124">124</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad7c11742ee005f6d377095062b42a5d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tbb::internal::generic_scheduler::generic_scheduler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00489.html">market</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01061_source.html#l00088">88</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a>, <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>, <a class="el" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool()</a>, <a class="el" href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">allocate_task()</a>, <a class="el" href="a00302.html#a08edecb9bd9ef648bada9fb5b1febeec">assert_task_pool_valid()</a>, <a class="el" href="a01133.html#a35e1c039fac0fa1b7d8b4f491d557a86">tbb::internal::assert_task_valid()</a>, <a class="el" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2b1c67cc200577a0b07649fdb00bec49">tbb::internal::es_task_proxy</a>, <a class="el" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a>, <a class="el" href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">tbb::internal::governor::is_set()</a>, <a class="el" href="a01011.html#a7e0f29d1fe322261ee07367d0cdf2563">ITT_SYNC_CREATE</a>, <a class="el" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a>, <a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>, <a class="el" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a>, <a class="el" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">tbb::internal::scheduler_state::my_properties</a>, <a class="el" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a>, <a class="el" href="a00063.html#a2c0d5b1c84ce0b83aa6b434dc448b133">tbb::internal::arena_slot_line2::my_task_pool_size</a>, <a class="el" href="a00677.html#ae27d95827090e04db3f184bb4b1369fd">tbb::internal::scheduler_properties::outermost</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ab2cde487a169988d66fc1052cedc92dc">tbb::task::ready</a>, <a class="el" href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">release_task_pool()</a>, <a class="el" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a>, and <a class="el" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    : <a class="code" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>(&amp;m)</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    , <a class="code" href="a00302.html#aee56a8b51b71d3f96f9c8cacf00fe845">my_random</a>(<span class="keyword">this</span>)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    , <a class="code" href="a00302.html#a8cf8d776a439320e1e001381cf5d4ad7">my_ref_count</a>(1)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    , <a class="code" href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">my_small_task_count</a>(1)   <span class="comment">// Extra 1 is a guard reference</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#if __TBB_SURVIVE_THREAD_SWITCH &amp;&amp; TBB_USE_ASSERT</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    , my_cilk_state(cs_none)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_SURVIVE_THREAD_SWITCH &amp;&amp; TBB_USE_ASSERT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;{</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !<a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a>, <span class="stringliteral">&quot;constructor expects the memory being zero-initialized&quot;</span> );</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">governor::is_set</a>(NULL), <span class="stringliteral">&quot;scheduler is already initialized for this thread&quot;</span> );</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">my_innermost_running_task</a> = <a class="code" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a> = &amp;<a class="code" href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">allocate_task</a>( <span class="keyword">sizeof</span>(<a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>), <a class="code" href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a>(NULL, &amp;the_dummy_context) );</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#if __TBB_PREVIEW_CRITICAL_TASKS</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">my_properties</a>.has_taken_critical_task = <span class="keyword">false</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">my_properties</a>.<a class="code" href="a00677.html#ae27d95827090e04db3f184bb4b1369fd">outermost</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#if __TBB_TASK_PRIORITY</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    my_ref_top_priority = &amp;m.my_global_top_priority;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    my_ref_reload_epoch = &amp;m.my_global_reload_epoch;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_PRIORITY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#if __TBB_TASK_GROUP_CONTEXT</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// Sync up the local cancellation state with the global one. No need for fence here.</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    my_context_state_propagation_epoch = the_context_state_propagation_epoch;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    my_context_list_head.my_prev = &amp;my_context_list_head;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    my_context_list_head.my_next = &amp;my_context_list_head;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="a01011.html#a7e0f29d1fe322261ee07367d0cdf2563">ITT_SYNC_CREATE</a>(&amp;my_context_list_mutex, SyncType_Scheduler, SyncObj_ContextsList);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_GROUP_CONTEXT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="a01011.html#a7e0f29d1fe322261ee07367d0cdf2563">ITT_SYNC_CREATE</a>(&amp;<a class="code" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>-&gt;<a class="code" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">prefix</a>().ref_count, SyncType_Scheduler, SyncObj_WorkerLifeCycleMgmt);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="a01011.html#a7e0f29d1fe322261ee07367d0cdf2563">ITT_SYNC_CREATE</a>(&amp;<a class="code" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a>, SyncType_Scheduler, SyncObj_TaskReturnList);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div><div class="ttc" id="a00678_html_aed181c52b8462c43272d45e625cd31fa"><div class="ttname"><a href="a00678.html#aed181c52b8462c43272d45e625cd31fa">tbb::internal::scheduler_state::my_properties</a></div><div class="ttdeci">scheduler_properties my_properties</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00095">scheduler.h:95</a></div></div>
<div class="ttc" id="a00678_html_a35aa72cfdda3b500e908925a3d6da747"><div class="ttname"><a href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a></div><div class="ttdeci">size_t my_arena_index</div><div class="ttdoc">Index of the arena slot the scheduler occupies now, or occupied last time. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00072">scheduler.h:72</a></div></div>
<div class="ttc" id="a00302_html_abc495d5b077a2ef1b05e15e820555d90"><div class="ttname"><a href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">tbb::internal::generic_scheduler::my_dummy_task</a></div><div class="ttdeci">task * my_dummy_task</div><div class="ttdoc">Fake root task created by slave threads. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00173">scheduler.h:173</a></div></div>
<div class="ttc" id="a00307_html_a14d4453f34a770b1c983c2ed38570e31"><div class="ttname"><a href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">tbb::internal::governor::is_set</a></div><div class="ttdeci">static bool is_set(generic_scheduler *s)</div><div class="ttdoc">Used to check validity of the local scheduler TLS contents. </div><div class="ttdef"><b>Definition:</b> <a href="a01004_source.html#l00124">governor.cpp:124</a></div></div>
<div class="ttc" id="a01011_html_a7e0f29d1fe322261ee07367d0cdf2563"><div class="ttname"><a href="a01011.html#a7e0f29d1fe322261ee07367d0cdf2563">ITT_SYNC_CREATE</a></div><div class="ttdeci">#define ITT_SYNC_CREATE(obj, type, name)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00123">itt_notify.h:123</a></div></div>
<div class="ttc" id="a00302_html_a4bd421a07fae7a1c9e3fa49e005bb513"><div class="ttname"><a href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">tbb::internal::generic_scheduler::my_small_task_count</a></div><div class="ttdeci">__TBB_atomic intptr_t my_small_task_count</div><div class="ttdoc">Number of small tasks that have been allocated by this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00383">scheduler.h:383</a></div></div>
<div class="ttc" id="a00302_html_aee56a8b51b71d3f96f9c8cacf00fe845"><div class="ttname"><a href="a00302.html#aee56a8b51b71d3f96f9c8cacf00fe845">tbb::internal::generic_scheduler::my_random</a></div><div class="ttdeci">FastRandom my_random</div><div class="ttdoc">Random number generator used for picking a random victim from which to steal. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00162">scheduler.h:162</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00302_html_a8cf8d776a439320e1e001381cf5d4ad7"><div class="ttname"><a href="a00302.html#a8cf8d776a439320e1e001381cf5d4ad7">tbb::internal::generic_scheduler::my_ref_count</a></div><div class="ttdeci">long my_ref_count</div><div class="ttdoc">Reference count for scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00177">scheduler.h:177</a></div></div>
<div class="ttc" id="a00677_html_ae27d95827090e04db3f184bb4b1369fd"><div class="ttname"><a href="a00677.html#ae27d95827090e04db3f184bb4b1369fd">tbb::internal::scheduler_properties::outermost</a></div><div class="ttdeci">bool outermost</div><div class="ttdoc">Indicates that a scheduler is on outermost level. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00057">scheduler.h:57</a></div></div>
<div class="ttc" id="a00302_html_ab5777a002f8b7b3a72cb7fc4a477fb29"><div class="ttname"><a href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">tbb::internal::generic_scheduler::my_return_list</a></div><div class="ttdeci">task * my_return_list</div><div class="ttdoc">List of small tasks that have been returned to this scheduler by other schedulers. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00387">scheduler.h:387</a></div></div>
<div class="ttc" id="a00302_html_aa0d316e9f3063c6b57fa21e0716d4d77"><div class="ttname"><a href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">tbb::internal::generic_scheduler::allocate_task</a></div><div class="ttdeci">task &amp; allocate_task(size_t number_of_bytes, __TBB_CONTEXT_ARG(task *parent, task_group_context *context))</div><div class="ttdoc">Allocate task object, either from the heap or a free list. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00304">scheduler.cpp:304</a></div></div>
<div class="ttc" id="a00302_html_ac652e4a610353888a31352e678955e1b"><div class="ttname"><a href="a00302.html#ac652e4a610353888a31352e678955e1b">tbb::internal::generic_scheduler::my_market</a></div><div class="ttdeci">market * my_market</div><div class="ttdoc">The market I am in. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00159">scheduler.h:159</a></div></div>
<div class="ttc" id="a00678_html_aac9af4d8baddbbc2af433e11297be8a5"><div class="ttname"><a href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a></div><div class="ttdeci">task * my_innermost_running_task</div><div class="ttdoc">Innermost task whose task::execute() is running. A dummy task on the outermost level. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00081">scheduler.h:81</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00778_html_a2bfe4567c87e5b783ca8595f95cfdb90"><div class="ttname"><a href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix</a></div><div class="ttdeci">internal::task_prefix &amp; prefix(internal::version_tag *=NULL) const </div><div class="ttdoc">Get reference to corresponding task_prefix. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00941">task.h:941</a></div></div>
<div class="ttc" id="a01063_html_a0ef18fbe7aa93b76fd4136a153bc2e44"><div class="ttname"><a href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a></div><div class="ttdeci">#define __TBB_CONTEXT_ARG(arg1, context)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00064">scheduler_common.h:64</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_ad7c11742ee005f6d377095062b42a5d8_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6e2af1d0f7af34dee87a5b207d498f59"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::acquire_task_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locks the local task pool. </p>
<p>Garbles my_arena_slot-&gt;task_pool for the duration of the lock. Requires correctly set my_arena_slot-&gt;task_pool_ptr.</p>
<p>ATTENTION: This method is mostly the same as <a class="el" href="a00302.html#a28bc27fa6c9a0cea424ced83b9f020ac" title="Locks victim&#39;s task pool, and returns pointer to it. The pointer can be NULL. ">generic_scheduler::lock_task_pool()</a>, with a little different logic of slot state checks (slot is either locked or points to our task pool). Thus if either of them is changed, consider changing the counterpart as well. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00460">460</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#ad83994557e481148b704625b46dece25">tbb::internal::as_atomic()</a>, <a class="el" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published()</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a>, <a class="el" href="a00082.html#a03a7500cc7bb0ad8ab421b2cafd48e9c">tbb::internal::atomic_backoff::pause()</a>, <a class="el" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a>, and <a class="el" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#ac223f7892d65e496c37190c4009ea1f7">cleanup_master()</a>, <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, <a class="el" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler()</a>, <a class="el" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task()</a>, and <a class="el" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool()</a>.</p>
<div class="fragment"><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                                                       {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>() )</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// we are not in arena - nothing to lock</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordtype">bool</span> sync_prepare_done = <span class="keyword">false</span>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">for</span>( atomic_backoff b;;b.pause() ) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="preprocessor">#if TBB_USE_ASSERT</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a> == <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#a388cbceb772b63b69ee84d775b210504">my_slots</a> + <a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a>, <span class="stringliteral">&quot;invalid arena slot index&quot;</span> );</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">// Local copy of the arena slot task pool pointer is necessary for the next</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="comment">// assertion to work correctly to exclude asynchronous state transition effect.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>** tp = <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( tp == <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a> || tp == <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>, <span class="stringliteral">&quot;slot ownership corrupt?&quot;</span> );</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a> != <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a> &amp;&amp;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <a class="code" href="a01133.html#ad83994557e481148b704625b46dece25">as_atomic</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a>).compare_and_swap(<a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a> ) == <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a> )</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <span class="comment">// We acquired our own slot</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(sync_acquired, <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !sync_prepare_done ) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="comment">// Start waiting</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(sync_prepare, <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            sync_prepare_done = <span class="keyword">true</span>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="comment">// Someone else acquired a lock, so pause and do exponential backoff.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a> == <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <span class="stringliteral">&quot;not really acquired task pool&quot;</span> );</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;} <span class="comment">// generic_scheduler::acquire_task_pool</span></div><div class="ttc" id="a00302_html_a22a847d9945a845e136c9163f835adcd"><div class="ttname"><a href="a00302.html#a22a847d9945a845e136c9163f835adcd">tbb::internal::generic_scheduler::is_task_pool_published</a></div><div class="ttdeci">bool is_task_pool_published() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00550">scheduler.h:550</a></div></div>
<div class="ttc" id="a00678_html_a35aa72cfdda3b500e908925a3d6da747"><div class="ttname"><a href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a></div><div class="ttdeci">size_t my_arena_index</div><div class="ttdoc">Index of the arena slot the scheduler occupies now, or occupied last time. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00072">scheduler.h:72</a></div></div>
<div class="ttc" id="a00059_html_a388cbceb772b63b69ee84d775b210504"><div class="ttname"><a href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a></div><div class="ttdeci">arena_slot my_slots[1]</div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00300">arena.h:300</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a01133_html_ad83994557e481148b704625b46dece25"><div class="ttname"><a href="a01133.html#ad83994557e481148b704625b46dece25">tbb::internal::as_atomic</a></div><div class="ttdeci">atomic&lt; T &gt; &amp; as_atomic(T &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="a00965_source.html#l00547">atomic.h:547</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a01062_html_a096a309d24c5ac85036e8970880e5efd"><div class="ttname"><a href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a></div><div class="ttdeci">#define LockedTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00047">scheduler.h:47</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00063_html_acaf81236f1e1c743b3a1be8b03505a30"><div class="ttname"><a href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a></div><div class="ttdeci">task **__TBB_atomic task_pool_ptr</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00367">scheduler_common.h:367</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00062_html_a9096bfd9df29790ef46791385c5a8162"><div class="ttname"><a href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a></div><div class="ttdeci">task **__TBB_atomic task_pool</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00342">scheduler_common.h:342</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a6e2af1d0f7af34dee87a5b207d498f59_cgraph.svg" width="579" height="183"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a6e2af1d0f7af34dee87a5b207d498f59_icgraph.svg" width="100%" height="598"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa0d316e9f3063c6b57fa21e0716d4d77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a> &amp; tbb::internal::generic_scheduler::allocate_task </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>number_of_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a>(<a class="el" href="a00778.html">task</a> *<a class="el" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>, <a class="el" href="a00784.html">task_group_context</a> *context)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate task object, either from the heap or a free list. </p>
<p>Returns uninitialized task object with initialized prefix. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00304">304</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01028.html#a27c1cc70f5f4fa03859cbefc15242743">__TBB_cl_prefetch</a>, <a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>, <a class="el" href="a00789.html#afb0b2997cfdb32fc4cc92a6e83fd3edb">tbb::internal::task_prefix::affinity</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084">tbb::task::allocated</a>, <a class="el" href="a00789.html#ad8b42b30956a23bf8c7b1c55a29fe553">tbb::internal::task_prefix::context</a>, <a class="el" href="a00789.html#a79af149df5cdf0cb8f93791b5989cfd1">tbb::internal::task_prefix::depth</a>, <a class="el" href="a00789.html#a5d3371cb924d5e764c082beedae4cb89">tbb::internal::task_prefix::extra_state</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">tbb::task::freed</a>, <a class="el" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>, <a class="el" href="a00789.html#a92bd4eed6e6fa824b59a10a9a32e6100">tbb::internal::task_prefix::isolation</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a>, <a class="el" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a>, <a class="el" href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">my_small_task_count</a>, <a class="el" href="a01147.html#ga4844e4d5f62a0843af83cf534f908ddf">tbb::internal::NFS_Allocate()</a>, <a class="el" href="a01133.html#aa2cfd9c6baf73cebacad0fffcd79e7ba">tbb::internal::no_isolation</a>, <a class="el" href="a00789.html#a3a55f2d0ccd2a4c25c3958c9c168851c">tbb::internal::task_prefix::owner</a>, <a class="el" href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a>, <a class="el" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>, <a class="el" href="a00789.html#af7c1fe5628686fb0da5955b05e4cca07">tbb::internal::task_prefix::parent</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00302.html#afbb75edc69c2ed1bcbf70098ca24a523">quick_task_size</a>, <a class="el" href="a00789.html#aaaf2f12ee06495a26f5e03bf74c43d89">tbb::internal::task_prefix::ref_count</a>, <a class="el" href="a00789.html#ab79eff02de7b8379780378b5888548d5">tbb::internal::task_prefix::state</a>, <a class="el" href="a00778.html#a22ef8282e09458a46131843219cb71e5">tbb::task::state()</a>, and <a class="el" href="a01133.html#a0630d59441f75e740be0b003d2922df8">tbb::internal::task_prefix_reservation_size</a>.</p>

<p>Referenced by <a class="el" href="a00047.html#a76de2db486f756635b3baf8ffab39eef">tbb::internal::allocate_additional_child_of_proxy::allocate()</a>, <a class="el" href="a00049.html#a42e1d669adc9327b70273179101805ab">tbb::internal::allocate_continuation_proxy::allocate()</a>, <a class="el" href="a00048.html#a4ff38c5560806b0695506c33a19bc0c1">tbb::internal::allocate_child_proxy::allocate()</a>, <a class="el" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler()</a>, and <a class="el" href="a00302.html#a8a62642cb4b1ba391b8d3b9a00dca541">prepare_for_spawning()</a>.</p>
<div class="fragment"><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                                                                                           {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>(++my_counters.active_tasks);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> *t;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span>( number_of_bytes&lt;=<a class="code" href="a00302.html#afbb75edc69c2ed1bcbf70098ca24a523">quick_task_size</a> ) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">#if __TBB_HOARD_NONLOCAL_TASKS</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span>( (t = my_nonlocal_free_list) ) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>(--my_counters.free_list_length);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( t-&gt;state()==<a class="code" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">task::freed</a>, <span class="stringliteral">&quot;free list of tasks is corrupted&quot;</span> );</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            my_nonlocal_free_list = t-&gt;prefix().next;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        } <span class="keywordflow">else</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span>( (t = <a class="code" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a>) ) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>(--my_counters.free_list_length);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( t-&gt;state()==<a class="code" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">task::freed</a>, <span class="stringliteral">&quot;free list of tasks is corrupted&quot;</span> );</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <a class="code" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a> = t-&gt;<a class="code" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">prefix</a>().next;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a> ) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="comment">// No fence required for read of my_return_list above, because __TBB_FetchAndStoreW has a fence.</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            t = (<a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>*)__TBB_FetchAndStoreW( &amp;<a class="code" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a>, 0 ); <span class="comment">// with acquire</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( t, <span class="stringliteral">&quot;another thread emptied the my_return_list&quot;</span> );</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( t-&gt;prefix().origin==<span class="keyword">this</span>, <span class="stringliteral">&quot;task returned to wrong my_return_list&quot;</span> );</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>( sync_acquired, &amp;<a class="code" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a> );</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            my_free_list = t-&gt;prefix().next;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            t = (<a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>*)((<span class="keywordtype">char</span>*)<a class="code" href="a01147.html#ga4844e4d5f62a0843af83cf534f908ddf">NFS_Allocate</a>( 1, <a class="code" href="a01133.html#a0630d59441f75e740be0b003d2922df8">task_prefix_reservation_size</a>+<a class="code" href="a00302.html#afbb75edc69c2ed1bcbf70098ca24a523">quick_task_size</a>, NULL ) + <a class="code" href="a01133.html#a0630d59441f75e740be0b003d2922df8">task_prefix_reservation_size</a> );</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">#if __TBB_COUNT_TASK_NODES</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            ++my_task_node_count;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_COUNT_TASK_NODES */</span><span class="preprocessor"></span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            t-&gt;prefix().origin = <span class="keyword">this</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            t-&gt;prefix().next = 0;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            ++<a class="code" href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">my_small_task_count</a>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="preprocessor">#if __TBB_PREFETCHING</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> *t_next = t-&gt;prefix().next;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">if</span>( !t_next ) { <span class="comment">// the task was last in the list</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">#if __TBB_HOARD_NONLOCAL_TASKS</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="keywordflow">if</span>( my_free_list )</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                t_next = <a class="code" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a> ) <span class="comment">// enable prefetching, gives speedup</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                t_next = my_free_list = (<a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>*)__TBB_FetchAndStoreW( &amp;<a class="code" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a>, 0 );</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">if</span>( t_next ) { <span class="comment">// gives speedup for both cache lines</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <a class="code" href="a01028.html#a27c1cc70f5f4fa03859cbefc15242743">__TBB_cl_prefetch</a>(t_next);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <a class="code" href="a01028.html#a27c1cc70f5f4fa03859cbefc15242743">__TBB_cl_prefetch</a>(&amp;t_next-&gt;prefix());</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_PREFETCHING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>(++my_counters.big_tasks);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        t = (<a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>*)((<span class="keywordtype">char</span>*)<a class="code" href="a01147.html#ga4844e4d5f62a0843af83cf534f908ddf">NFS_Allocate</a>( 1, <a class="code" href="a01133.html#a0630d59441f75e740be0b003d2922df8">task_prefix_reservation_size</a>+number_of_bytes, NULL ) + <a class="code" href="a01133.html#a0630d59441f75e740be0b003d2922df8">task_prefix_reservation_size</a> );</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="preprocessor">#if __TBB_COUNT_TASK_NODES</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        ++my_task_node_count;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_COUNT_TASK_NODES */</span><span class="preprocessor"></span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        t-&gt;prefix().origin = NULL;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    task_prefix&amp; <a class="code" href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a> = t-&gt;prefix();</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="preprocessor">#if __TBB_TASK_GROUP_CONTEXT</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    p.context = context;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_GROUP_CONTEXT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// Obsolete. But still in use, so has to be assigned correct value here.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    p.owner = <span class="keyword">this</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    p.ref_count = 0;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// Obsolete. Assign some not outrageously out-of-place value for a while.</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    p.depth = 0;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    p.parent = <a class="code" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// In TBB 2.1 and later, the constructor for task sets extra_state to indicate the version of the tbb/task.h header.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">// In TBB 2.0 and earlier, the constructor leaves extra_state as zero.</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    p.extra_state = 0;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    p.affinity = 0;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    p.state = <a class="code" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084">task::allocated</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>( p.isolation = <a class="code" href="a01133.html#aa2cfd9c6baf73cebacad0fffcd79e7ba">no_isolation</a> );</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> *t;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div><div class="ttc" id="a01028_html_a27c1cc70f5f4fa03859cbefc15242743"><div class="ttname"><a href="a01028.html#a27c1cc70f5f4fa03859cbefc15242743">__TBB_cl_prefetch</a></div><div class="ttdeci">#define __TBB_cl_prefetch(p)</div><div class="ttdef"><b>Definition:</b> <a href="a01028_source.html#l00037">mic_common.h:37</a></div></div>
<div class="ttc" id="a00778_html_a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de"><div class="ttname"><a href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">tbb::task::freed</a></div><div class="ttdoc">task object is on free list, or is going to be put there, or was just taken off. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00622">task.h:622</a></div></div>
<div class="ttc" id="a01063_html_a63e9a35b6d2bfbfb21b3199dc03acc6d"><div class="ttname"><a href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a></div><div class="ttdeci">#define __TBB_ISOLATION_EXPR(isolation)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00071">scheduler_common.h:71</a></div></div>
<div class="ttc" id="a00302_html_a4bd421a07fae7a1c9e3fa49e005bb513"><div class="ttname"><a href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">tbb::internal::generic_scheduler::my_small_task_count</a></div><div class="ttdeci">__TBB_atomic intptr_t my_small_task_count</div><div class="ttdoc">Number of small tasks that have been allocated by this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00383">scheduler.h:383</a></div></div>
<div class="ttc" id="a00778_html_a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084"><div class="ttname"><a href="a00778.html#a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084">tbb::task::allocated</a></div><div class="ttdoc">task object is freshly allocated or recycled. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00620">task.h:620</a></div></div>
<div class="ttc" id="a01147_html_ga4844e4d5f62a0843af83cf534f908ddf"><div class="ttname"><a href="a01147.html#ga4844e4d5f62a0843af83cf534f908ddf">tbb::internal::NFS_Allocate</a></div><div class="ttdeci">void *__TBB_EXPORTED_FUNC NFS_Allocate(size_t n_element, size_t element_size, void *hint)</div><div class="ttdoc">Allocate memory on cache/sector line boundary. </div><div class="ttdef"><b>Definition:</b> <a href="a00971_source.html#l00180">cache_aligned_allocator.cpp:180</a></div></div>
<div class="ttc" id="a00302_html_afbb75edc69c2ed1bcbf70098ca24a523"><div class="ttname"><a href="a00302.html#afbb75edc69c2ed1bcbf70098ca24a523">tbb::internal::generic_scheduler::quick_task_size</a></div><div class="ttdeci">static const size_t quick_task_size</div><div class="ttdoc">If sizeof(task) is &lt;=quick_task_size, it is handled on a free list instead of malloc&amp;#39;d. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00131">scheduler.h:131</a></div></div>
<div class="ttc" id="a01016_html_a5f03a37f2bd0f2bf683ff8a440e37a38"><div class="ttname"><a href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void ITT_FORMAT p void ITT_FORMAT p void size_t ITT_FORMAT d void ITT_FORMAT p const wchar_t ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s no args void ITT_FORMAT p size_t ITT_FORMAT d no args const wchar_t const wchar_t ITT_FORMAT s __itt_heap_function void size_t int ITT_FORMAT d __itt_heap_function void ITT_FORMAT p __itt_heap_function void void size_t int ITT_FORMAT d no args no args unsigned int ITT_FORMAT u const __itt_domain __itt_id ITT_FORMAT lu const __itt_domain __itt_id __itt_id parent</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00165">ittnotify_static.h:165</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a01097_html_a08f1e46bb511c63da3ce07aa9c897bc4"><div class="ttname"><a href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a></div><div class="ttdeci">#define GATHER_STATISTIC(x)</div><div class="ttdef"><b>Definition:</b> <a href="a01097_source.html#l00236">tbb_statistics.h:236</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a00302_html_ab5777a002f8b7b3a72cb7fc4a477fb29"><div class="ttname"><a href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">tbb::internal::generic_scheduler::my_return_list</a></div><div class="ttdeci">task * my_return_list</div><div class="ttdoc">List of small tasks that have been returned to this scheduler by other schedulers. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00387">scheduler.h:387</a></div></div>
<div class="ttc" id="a01133_html_aa2cfd9c6baf73cebacad0fffcd79e7ba"><div class="ttname"><a href="a01133.html#aa2cfd9c6baf73cebacad0fffcd79e7ba">tbb::internal::no_isolation</a></div><div class="ttdeci">const isolation_tag no_isolation</div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00129">task.h:129</a></div></div>
<div class="ttc" id="a00302_html_a52ed26dede8410a72f37bce24cb26239"><div class="ttname"><a href="a00302.html#a52ed26dede8410a72f37bce24cb26239">tbb::internal::generic_scheduler::my_free_list</a></div><div class="ttdeci">task * my_free_list</div><div class="ttdoc">Free list of small tasks that can be reused. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00165">scheduler.h:165</a></div></div>
<div class="ttc" id="a01133_html_a0630d59441f75e740be0b003d2922df8"><div class="ttname"><a href="a01133.html#a0630d59441f75e740be0b003d2922df8">tbb::internal::task_prefix_reservation_size</a></div><div class="ttdeci">const size_t task_prefix_reservation_size</div><div class="ttdoc">Number of bytes reserved for a task prefix. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00163">scheduler_common.h:163</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00778_html_a2bfe4567c87e5b783ca8595f95cfdb90"><div class="ttname"><a href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix</a></div><div class="ttdeci">internal::task_prefix &amp; prefix(internal::version_tag *=NULL) const </div><div class="ttdoc">Get reference to corresponding task_prefix. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00941">task.h:941</a></div></div>
<div class="ttc" id="a01016_html_ae01354a6a694c51fb79588444a08cbee"><div class="ttname"><a href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync p</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00080">ittnotify_static.h:80</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_aa0d316e9f3063c6b57fa21e0716d4d77_cgraph.svg" width="100%" height="515"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_aa0d316e9f3063c6b57fa21e0716d4d77_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a08edecb9bd9ef648bada9fb5b1febeec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::assert_task_pool_valid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01062_source.html#l00323">323</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a>, <a class="el" href="a01098.html#a96e63952df71e13e2b1122e612966ef7">__TBB_override</a>, <a class="el" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">tbb::internal::first()</a>, and <a class="el" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>.</p>

<p>Referenced by <a class="el" href="a00194.html#ad5456333f61bee29b4d908df6b85b6ee">tbb::internal::custom_scheduler&lt; SchedulerTraits &gt;::allocate_scheduler()</a>, <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, <a class="el" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler()</a>, <a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn()</a>, <a class="el" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool()</a>, and <a class="el" href="a00778.html#a8a82c421e571d0a87fec2ac40f1b6741">tbb::task::self()</a>.</p>
<div class="fragment"><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;{}</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a08edecb9bd9ef648bada9fb5b1febeec_cgraph.svg" width="340" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a08edecb9bd9ef648bada9fb5b1febeec_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa101d77dc7a5e986270073e1c0e09cf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::attach_arena </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00059.html">arena</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_master</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00963_source.html#l00040">40</a> of file <a class="el" href="a00963_source.html">arena.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a00302.html#a5ab89891d3c1e3209cffced8bf93b124">attach_mailbox()</a>, <a class="el" href="a00480.html#ad34c62cd7350fb87f1173ed7ccae7895">tbb::internal::mail_inbox::is_idle_state()</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>, <a class="el" href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">tbb::internal::scheduler_state::my_inbox</a>, <a class="el" href="a00060.html#a9571049272687e3f4d113809f0a62080">tbb::internal::arena_base::my_market</a>, <a class="el" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>, <a class="el" href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, and <a class="el" href="a00480.html#a08539a9bfc808963dfe6ab756bfd2d2d">tbb::internal::mail_inbox::set_is_idle()</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#ac7fb04a73dbb75dd8db5c9637bfadeae">create_master()</a>, <a class="el" href="a00307.html#abf62b8bc4890ad846ff01349f8d46a84">tbb::internal::governor::init_scheduler()</a>, <a class="el" href="a00302.html#a7c98d05ea5c1e309b836335ea9af79fa">nested_arena_entry()</a>, and <a class="el" href="a00059.html#aff17fc29650655b080b795be34179d20">tbb::internal::arena::process()</a>.</p>
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                                                                             {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( a-&gt;my_market == <a class="code" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>, NULL );</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a> = a;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a> = index;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a> = a-&gt;my_slots + index;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="a00302.html#a5ab89891d3c1e3209cffced8bf93b124">attach_mailbox</a>( <a class="code" href="a01133.html#a3e3837fb3ca7bbf4cf4752c58cbed886">affinity_id</a>(index+1) );</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">if</span> ( is_master &amp;&amp; <a class="code" href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">my_inbox</a>.<a class="code" href="a00480.html#ad34c62cd7350fb87f1173ed7ccae7895">is_idle_state</a>( <span class="keyword">true</span> ) ) {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="comment">// Master enters an arena with its own task to be executed. It means that master is not</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="comment">// going to enter stealing loop and take affinity tasks.</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <a class="code" href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">my_inbox</a>.<a class="code" href="a00480.html#a08539a9bfc808963dfe6ab756bfd2d2d">set_is_idle</a>( <span class="keyword">false</span> );</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#if __TBB_TASK_GROUP_CONTEXT</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// Context to be used by root tasks by default (if the user has not specified one).</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span>( !is_master )</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>-&gt;<a class="code" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">prefix</a>().context = a-&gt;my_default_ctx;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_GROUP_CONTEXT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#if __TBB_TASK_PRIORITY</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">// In the current implementation master threads continue processing even when</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// there are other masters with higher priority. Only TBB worker threads are</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// redistributed between arenas based on the latters&#39; priority. Thus master</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// threads use arena&#39;s top priority as a reference point (in contrast to workers</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// that use my_market-&gt;my_global_top_priority).</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span>( is_master ) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        my_ref_top_priority = &amp;a-&gt;my_top_priority;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        my_ref_reload_epoch = &amp;a-&gt;my_reload_epoch;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    my_local_reload_epoch = *my_ref_reload_epoch;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !my_offloaded_tasks, NULL );</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_PRIORITY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div><div class="ttc" id="a00678_html_a35aa72cfdda3b500e908925a3d6da747"><div class="ttname"><a href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a></div><div class="ttdeci">size_t my_arena_index</div><div class="ttdoc">Index of the arena slot the scheduler occupies now, or occupied last time. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00072">scheduler.h:72</a></div></div>
<div class="ttc" id="a00302_html_abc495d5b077a2ef1b05e15e820555d90"><div class="ttname"><a href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">tbb::internal::generic_scheduler::my_dummy_task</a></div><div class="ttdeci">task * my_dummy_task</div><div class="ttdoc">Fake root task created by slave threads. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00173">scheduler.h:173</a></div></div>
<div class="ttc" id="a00480_html_a08539a9bfc808963dfe6ab756bfd2d2d"><div class="ttname"><a href="a00480.html#a08539a9bfc808963dfe6ab756bfd2d2d">tbb::internal::mail_inbox::set_is_idle</a></div><div class="ttdeci">void set_is_idle(bool value)</div><div class="ttdoc">Indicate whether thread that reads this mailbox is idle. </div><div class="ttdef"><b>Definition:</b> <a href="a01024_source.html#l00215">mailbox.h:215</a></div></div>
<div class="ttc" id="a00302_html_a5ab89891d3c1e3209cffced8bf93b124"><div class="ttname"><a href="a00302.html#a5ab89891d3c1e3209cffced8bf93b124">tbb::internal::generic_scheduler::attach_mailbox</a></div><div class="ttdeci">void attach_mailbox(affinity_id id)</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00589">scheduler.h:589</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a00302_html_ac652e4a610353888a31352e678955e1b"><div class="ttname"><a href="a00302.html#ac652e4a610353888a31352e678955e1b">tbb::internal::generic_scheduler::my_market</a></div><div class="ttdeci">market * my_market</div><div class="ttdoc">The market I am in. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00159">scheduler.h:159</a></div></div>
<div class="ttc" id="a00480_html_ad34c62cd7350fb87f1173ed7ccae7895"><div class="ttname"><a href="a00480.html#ad34c62cd7350fb87f1173ed7ccae7895">tbb::internal::mail_inbox::is_idle_state</a></div><div class="ttdeci">bool is_idle_state(bool value) const </div><div class="ttdoc">Indicate whether thread that reads this mailbox is idle. </div><div class="ttdef"><b>Definition:</b> <a href="a01024_source.html#l00222">mailbox.h:222</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a5b120ea3121cd82f578eef2c1319f9fe"><div class="ttname"><a href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">tbb::internal::scheduler_state::my_inbox</a></div><div class="ttdeci">mail_inbox my_inbox</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00084">scheduler.h:84</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00778_html_a2bfe4567c87e5b783ca8595f95cfdb90"><div class="ttname"><a href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix</a></div><div class="ttdeci">internal::task_prefix &amp; prefix(internal::version_tag *=NULL) const </div><div class="ttdoc">Get reference to corresponding task_prefix. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00941">task.h:941</a></div></div>
<div class="ttc" id="a01133_html_a3e3837fb3ca7bbf4cf4752c58cbed886"><div class="ttname"><a href="a01133.html#a3e3837fb3ca7bbf4cf4752c58cbed886">tbb::internal::affinity_id</a></div><div class="ttdeci">unsigned short affinity_id</div><div class="ttdoc">An id as used for specifying affinity. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00124">task.h:124</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_aa101d77dc7a5e986270073e1c0e09cf6_cgraph.svg" width="610" height="235"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_aa101d77dc7a5e986270073e1c0e09cf6_icgraph.svg" width="100%" height="496"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5ab89891d3c1e3209cffced8bf93b124"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::attach_mailbox </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a01133.html#a3e3837fb3ca7bbf4cf4752c58cbed886">affinity_id</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01062_source.html#l00589">589</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, and <a class="el" href="a01016.html#a970de3b8bb056cce7462ba20d36c4ae2">id</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#aa101d77dc7a5e986270073e1c0e09cf6">attach_arena()</a>.</p>
<div class="fragment"><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                                              {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>(<span class="keywordtype">id</span>&gt;0,NULL);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">my_inbox</a>.<a class="code" href="a00480.html#a5db22ebed6cee417875881d6ee260231">attach</a>( <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#a4555e4bf4d6c2fd5a301ff6ff36f3fa0">mailbox</a>(<span class="keywordtype">id</span>) );</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">my_affinity_id</a> = <a class="code" href="a01016.html#a970de3b8bb056cce7462ba20d36c4ae2">id</a>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div><div class="ttc" id="a00480_html_a5db22ebed6cee417875881d6ee260231"><div class="ttname"><a href="a00480.html#a5db22ebed6cee417875881d6ee260231">tbb::internal::mail_inbox::attach</a></div><div class="ttdeci">void attach(mail_outbox &amp;putter)</div><div class="ttdoc">Attach inbox to a corresponding outbox. </div><div class="ttdef"><b>Definition:</b> <a href="a01024_source.html#l00197">mailbox.h:197</a></div></div>
<div class="ttc" id="a00678_html_a3a635bad42d492013d4a06d1af0c452b"><div class="ttname"><a href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a></div><div class="ttdeci">affinity_id my_affinity_id</div><div class="ttdoc">The mailbox id assigned to this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00093">scheduler.h:93</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a00059_html_a4555e4bf4d6c2fd5a301ff6ff36f3fa0"><div class="ttname"><a href="a00059.html#a4555e4bf4d6c2fd5a301ff6ff36f3fa0">tbb::internal::arena::mailbox</a></div><div class="ttdeci">mail_outbox &amp; mailbox(affinity_id id)</div><div class="ttdoc">Get reference to mailbox corresponding to given affinity_id. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00208">arena.h:208</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a5b120ea3121cd82f578eef2c1319f9fe"><div class="ttname"><a href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">tbb::internal::scheduler_state::my_inbox</a></div><div class="ttdeci">mail_inbox my_inbox</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00084">scheduler.h:84</a></div></div>
<div class="ttc" id="a01016_html_a970de3b8bb056cce7462ba20d36c4ae2"><div class="ttname"><a href="a01016.html#a970de3b8bb056cce7462ba20d36c4ae2">id</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void ITT_FORMAT p void ITT_FORMAT p void size_t ITT_FORMAT d void ITT_FORMAT p const wchar_t ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s no args void ITT_FORMAT p size_t ITT_FORMAT d no args const wchar_t const wchar_t ITT_FORMAT s __itt_heap_function void size_t int ITT_FORMAT d __itt_heap_function void ITT_FORMAT p __itt_heap_function void void size_t int ITT_FORMAT d no args no args unsigned int ITT_FORMAT u const __itt_domain __itt_id id</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00161">ittnotify_static.h:161</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a5ab89891d3c1e3209cffced8bf93b124_icgraph.svg" width="100%" height="496"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1c00f465a90ee09a240d1f81de5f635b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::can_steal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if stealing is allowed. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00195">195</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01020.html#aeedc3ebf2bee4ce8767bfca043d5ac94">__TBB_get_bsp()</a>, and <a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                      {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordtype">int</span> anchor;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">// TODO IDEA: Add performance warning?</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">#if __TBB_ipf</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">my_stealing_threshold</a> &lt; (uintptr_t)&amp;anchor &amp;&amp; (uintptr_t)<a class="code" href="a01020.html#aeedc3ebf2bee4ce8767bfca043d5ac94">__TBB_get_bsp</a>() &lt; my_rsb_stealing_threshold;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">my_stealing_threshold</a> &lt; (uintptr_t)&amp;anchor;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div><div class="ttc" id="a01020_html_aeedc3ebf2bee4ce8767bfca043d5ac94"><div class="ttname"><a href="a01020.html#aeedc3ebf2bee4ce8767bfca043d5ac94">__TBB_get_bsp</a></div><div class="ttdeci">void * __TBB_get_bsp()</div><div class="ttdoc">Retrieves the current RSE backing store pointer. IA64 specific. </div></div>
<div class="ttc" id="a00302_html_ade9f23ce97db8725a9c3718e76aa682d"><div class="ttname"><a href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">tbb::internal::generic_scheduler::my_stealing_threshold</a></div><div class="ttdeci">uintptr_t my_stealing_threshold</div><div class="ttdoc">Position in the call stack specifying its maximal filling when stealing is still allowed. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00142">scheduler.h:142</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a1c00f465a90ee09a240d1f81de5f635b_cgraph.svg" width="323" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac223f7892d65e496c37190c4009ea1f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::cleanup_master </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>blocking_terminate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform necessary cleanup when a master thread stops using TBB. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l01304">1304</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>, <a class="el" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release()</a>, <a class="el" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool()</a>, <a class="el" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>, <a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler()</a>, <a class="el" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a>, <a class="el" href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">tbb::internal::governor::is_set()</a>, <a class="el" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published()</a>, <a class="el" href="a00302.html#aad4a3aef975ca2516a81640654a65717">leave_task_pool()</a>, <a class="el" href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">local_wait_for_all()</a>, <a class="el" href="a01016.html#a46e8be2e3aadb2f6ee62e762a36b9243">lock</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>, <a class="el" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>, <a class="el" href="a00062.html#a988ed3221b0b40efb97849a53b168e79">tbb::internal::arena_slot_line1::my_scheduler</a>, <a class="el" href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a>, <a class="el" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free()</a>, <a class="el" href="a00059.html#af5ce7404b60b78dee1ce689cfe903734">tbb::internal::arena::on_thread_leaving()</a>, <a class="el" href="a00059.html#a0b9c64f0781f7c6337bc109d9867829a">tbb::internal::arena::ref_external</a>, <a class="el" href="a00489.html#a76b1783a39252c34da34d0cebfe101b5">tbb::internal::market::release()</a>, <a class="el" href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">release_task_pool()</a>, <a class="el" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a>, and <a class="el" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a>.</p>

<p>Referenced by <a class="el" href="a00307.html#a5fbd38947c75c1e8494bc1bac598a9fe">tbb::internal::governor::auto_terminate()</a>, and <a class="el" href="a00307.html#a0962408ba1eaf67d0ad741a0749f3a4e">tbb::internal::governor::terminate_scheduler()</a>.</p>
<div class="fragment"><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                                                                {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    arena* <span class="keyword">const</span> a = <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    market * <span class="keyword">const</span> m = <a class="code" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>, NULL );</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">if</span>( a &amp;&amp; <a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>() ) {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <a class="code" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool</a>();</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a> == <a class="code" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a> ||</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;             <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a>) &gt;= <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>) )</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="comment">// Local task pool is empty</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            <a class="code" href="a00302.html#aad4a3aef975ca2516a81640654a65717">leave_task_pool</a>();</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        }</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <span class="comment">// Master&#39;s local task pool may e.g. contain proxies of affinitized tasks.</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            <a class="code" href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">release_task_pool</a>();</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( <a class="code" href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">governor::is_set</a>(<span class="keyword">this</span>), <span class="stringliteral">&quot;TLS slot is cleared before the task pool cleanup&quot;</span> );</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <a class="code" href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">local_wait_for_all</a>( *<a class="code" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>, NULL );</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !<a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>(), NULL );</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( <a class="code" href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">governor::is_set</a>(<span class="keyword">this</span>), <span class="stringliteral">&quot;Other thread reused our TLS key during the task pool cleanup&quot;</span> );</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    }</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="preprocessor">#if __TBB_ARENA_OBSERVER</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">if</span>( a )</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        a-&gt;my_observers.notify_exit_observers( my_last_local_observer, <span class="comment">/*worker=*/</span><span class="keyword">false</span> );</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="preprocessor">#if __TBB_SCHEDULER_OBSERVER</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    the_global_observer_list.notify_exit_observers( my_last_global_observer, <span class="comment">/*worker=*/</span><span class="keyword">false</span> );</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_SCHEDULER_OBSERVER */</span><span class="preprocessor"></span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="preprocessor">#if _WIN32||_WIN64</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    m-&gt;unregister_master( master_exec_resource );</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _WIN32||_WIN64 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">if</span>( a ) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>(a-&gt;my_slots+0 == <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>, NULL);</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="preprocessor">#if __TBB_STATISTICS</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        *<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;my_counters += my_counters;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_STATISTICS */</span><span class="preprocessor"></span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <a class="code" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">__TBB_store_with_release</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a988ed3221b0b40efb97849a53b168e79">my_scheduler</a>, (<a class="code" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a>*)NULL);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="preprocessor">#if __TBB_TASK_GROUP_CONTEXT</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">else</span> { <span class="comment">// task_group_context ownership was not transferred to arena</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        default_context()-&gt;~task_group_context();</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <a class="code" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">NFS_Free</a>(default_context());</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    }</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    context_state_propagation_mutex_type::scoped_lock <a class="code" href="a01016.html#a46e8be2e3aadb2f6ee62e762a36b9243">lock</a>(the_context_state_propagation_mutex);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <a class="code" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>-&gt;my_masters.remove( *<span class="keyword">this</span> );</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <a class="code" href="a01016.html#a46e8be2e3aadb2f6ee62e762a36b9243">lock</a>.release();</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_GROUP_CONTEXT */</span><span class="preprocessor"></span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a> = NULL; <span class="comment">// detached from slot</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <a class="code" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler</a>(); <span class="comment">// do not use scheduler state after this point</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span>( a )</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        a-&gt;on_thread_leaving&lt;<a class="code" href="a00059.html#a0b9c64f0781f7c6337bc109d9867829a">arena::ref_external</a>&gt;();</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="comment">// If there was an associated arena, it added a public market reference</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">return</span> m-&gt;release( <span class="comment">/*is_public*/</span> a != NULL, blocking_terminate );</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;}</div><div class="ttc" id="a00302_html_a22a847d9945a845e136c9163f835adcd"><div class="ttname"><a href="a00302.html#a22a847d9945a845e136c9163f835adcd">tbb::internal::generic_scheduler::is_task_pool_published</a></div><div class="ttdeci">bool is_task_pool_published() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00550">scheduler.h:550</a></div></div>
<div class="ttc" id="a01016_html_a46e8be2e3aadb2f6ee62e762a36b9243"><div class="ttname"><a href="a01016.html#a46e8be2e3aadb2f6ee62e762a36b9243">lock</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void * lock</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00110">ittnotify_static.h:110</a></div></div>
<div class="ttc" id="a00062_html_a6b0b8214404af0b2c30f442b33d0d209"><div class="ttname"><a href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a></div><div class="ttdeci">__TBB_atomic size_t head</div><div class="ttdoc">Index of the first ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00346">scheduler_common.h:346</a></div></div>
<div class="ttc" id="a00302_html_abc495d5b077a2ef1b05e15e820555d90"><div class="ttname"><a href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">tbb::internal::generic_scheduler::my_dummy_task</a></div><div class="ttdeci">task * my_dummy_task</div><div class="ttdoc">Fake root task created by slave threads. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00173">scheduler.h:173</a></div></div>
<div class="ttc" id="a00307_html_a14d4453f34a770b1c983c2ed38570e31"><div class="ttname"><a href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">tbb::internal::governor::is_set</a></div><div class="ttdeci">static bool is_set(generic_scheduler *s)</div><div class="ttdoc">Used to check validity of the local scheduler TLS contents. </div><div class="ttdef"><b>Definition:</b> <a href="a01004_source.html#l00124">governor.cpp:124</a></div></div>
<div class="ttc" id="a00302_html_aad4a3aef975ca2516a81640654a65717"><div class="ttname"><a href="a00302.html#aad4a3aef975ca2516a81640654a65717">tbb::internal::generic_scheduler::leave_task_pool</a></div><div class="ttdeci">void leave_task_pool()</div><div class="ttdoc">Leave the task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l01226">scheduler.cpp:1226</a></div></div>
<div class="ttc" id="a00302_html_a6e2af1d0f7af34dee87a5b207d498f59"><div class="ttname"><a href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">tbb::internal::generic_scheduler::acquire_task_pool</a></div><div class="ttdeci">void acquire_task_pool() const </div><div class="ttdoc">Locks the local task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00460">scheduler.cpp:460</a></div></div>
<div class="ttc" id="a00302_html_ad7c11742ee005f6d377095062b42a5d8"><div class="ttname"><a href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">tbb::internal::generic_scheduler::generic_scheduler</a></div><div class="ttdeci">generic_scheduler(market &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00088">scheduler.cpp:88</a></div></div>
<div class="ttc" id="a00059_html_a0b9c64f0781f7c6337bc109d9867829a"><div class="ttname"><a href="a00059.html#a0b9c64f0781f7c6337bc109d9867829a">tbb::internal::arena::ref_external</a></div><div class="ttdeci">static const unsigned ref_external</div><div class="ttdoc">Reference increment values for externals and workers. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00230">arena.h:230</a></div></div>
<div class="ttc" id="a01062_html_a6f1c5fa8b2e50a1a91282165c7a9dae2"><div class="ttname"><a href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a></div><div class="ttdeci">#define EmptyTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00046">scheduler.h:46</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a00302_html_ac652e4a610353888a31352e678955e1b"><div class="ttname"><a href="a00302.html#ac652e4a610353888a31352e678955e1b">tbb::internal::generic_scheduler::my_market</a></div><div class="ttdeci">market * my_market</div><div class="ttdoc">The market I am in. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00159">scheduler.h:159</a></div></div>
<div class="ttc" id="a01133_html_a9c68ba9b3309fdabe739f77b71ed9a67"><div class="ttname"><a href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed</a></div><div class="ttdeci">T __TBB_load_relaxed(const volatile T &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00739">tbb_machine.h:739</a></div></div>
<div class="ttc" id="a01147_html_ga7814c9ccc02b8fe5f712fb6fd8a2b607"><div class="ttname"><a href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free</a></div><div class="ttdeci">void __TBB_EXPORTED_FUNC NFS_Free(void *)</div><div class="ttdoc">Free memory allocated by NFS_Allocate. </div><div class="ttdef"><b>Definition:</b> <a href="a00971_source.html#l00202">cache_aligned_allocator.cpp:202</a></div></div>
<div class="ttc" id="a01133_html_aea57866db2fc3fe1018c89b58109b39a"><div class="ttname"><a href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release</a></div><div class="ttdeci">void __TBB_store_with_release(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00717">tbb_machine.h:717</a></div></div>
<div class="ttc" id="a00062_html_a988ed3221b0b40efb97849a53b168e79"><div class="ttname"><a href="a00062.html#a988ed3221b0b40efb97849a53b168e79">tbb::internal::arena_slot_line1::my_scheduler</a></div><div class="ttdeci">generic_scheduler * my_scheduler</div><div class="ttdoc">Scheduler of the thread attached to the slot. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00336">scheduler_common.h:336</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a00302_html_a24dd9ef31d1f73ea2fadcc35df6d9d21"><div class="ttname"><a href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">tbb::internal::generic_scheduler::release_task_pool</a></div><div class="ttdeci">void release_task_pool() const </div><div class="ttdoc">Unlocks the local task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00489">scheduler.cpp:489</a></div></div>
<div class="ttc" id="a00302_html_a66e6dd672693eb34cd6fd46ed7a7c6a6"><div class="ttname"><a href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">tbb::internal::generic_scheduler::free_scheduler</a></div><div class="ttdeci">void free_scheduler()</div><div class="ttdoc">Destroy and deallocate this scheduler object. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00264">scheduler.cpp:264</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00062_html_a9096bfd9df29790ef46791385c5a8162"><div class="ttname"><a href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a></div><div class="ttdeci">task **__TBB_atomic task_pool</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00342">scheduler_common.h:342</a></div></div>
<div class="ttc" id="a00302_html_a509997dbb9b97ad2cca0a3af76c04e90"><div class="ttname"><a href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">tbb::internal::generic_scheduler::local_wait_for_all</a></div><div class="ttdeci">virtual void local_wait_for_all(task &amp;parent, task *child)=0</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_ac223f7892d65e496c37190c4009ea1f7_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_ac223f7892d65e496c37190c4009ea1f7_icgraph.svg" width="598" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae6a0b659589202963562cbdb23465807"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::cleanup_worker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>worker</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform necessary cleanup when a worker thread finishes. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l01294">1294</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler()</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, and <a class="el" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a>.</p>

<p>Referenced by <a class="el" href="a00489.html#a32eca56b49c13d239a2869c33c4a17b0">tbb::internal::market::cleanup()</a>.</p>
<div class="fragment"><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                                                               {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <a class="code" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a>&amp; <a class="code" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a> = *(<a class="code" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a>*)arg;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !s.my_arena_slot, <span class="stringliteral">&quot;cleaning up attached worker&quot;</span> );</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="preprocessor">#if __TBB_SCHEDULER_OBSERVER</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordflow">if</span> ( worker ) <span class="comment">// can be called by master for worker, do not notify master twice</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        the_global_observer_list.notify_exit_observers( s.my_last_global_observer, <span class="comment">/*worker=*/</span><span class="keyword">true</span> );</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_SCHEDULER_OBSERVER */</span><span class="preprocessor"></span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    s.free_scheduler();</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;}</div><div class="ttc" id="a01016_html_a571c9802609300b38fd3d5ac52b1773c"><div class="ttname"><a href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync s</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00080">ittnotify_static.h:80</a></div></div>
<div class="ttc" id="a00302_html_ad7c11742ee005f6d377095062b42a5d8"><div class="ttname"><a href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">tbb::internal::generic_scheduler::generic_scheduler</a></div><div class="ttdeci">generic_scheduler(market &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00088">scheduler.cpp:88</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_ae6a0b659589202963562cbdb23465807_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_ae6a0b659589202963562cbdb23465807_icgraph.svg" width="568" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aecf34e6a9902af76bbbeab1fd3851df8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::commit_relocated_tasks </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_tail</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes relocated tasks visible to thieves and releases the local task pool. </p>
<p>Obviously, the task pool must be locked when calling this method. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00641">641</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed()</a>, and <a class="el" href="a01089.html#a14e70acf0f42aa601282a5b39769c859">__TBB_store_release</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool()</a>.</p>
<div class="fragment"><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                                                 {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#a228932018abdf86ec504ffc055bf6188">is_local_task_pool_quiescent</a>(),</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                  <span class="stringliteral">&quot;Task pool must be locked when calling commit_relocated_tasks()&quot;</span> );</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a>, 0 );</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// Tail is updated last to minimize probability of a thread making arena</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// snapshot being misguided into thinking that this task pool is empty.</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="a01089.html#a14e70acf0f42aa601282a5b39769c859">__TBB_store_release</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>, new_tail );</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">release_task_pool</a>();</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div><div class="ttc" id="a00062_html_a6b0b8214404af0b2c30f442b33d0d209"><div class="ttname"><a href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a></div><div class="ttdeci">__TBB_atomic size_t head</div><div class="ttdoc">Index of the first ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00346">scheduler_common.h:346</a></div></div>
<div class="ttc" id="a01089_html_a14e70acf0f42aa601282a5b39769c859"><div class="ttname"><a href="a01089.html#a14e70acf0f42aa601282a5b39769c859">__TBB_store_release</a></div><div class="ttdeci">#define __TBB_store_release</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00861">tbb_machine.h:861</a></div></div>
<div class="ttc" id="a00302_html_a228932018abdf86ec504ffc055bf6188"><div class="ttname"><a href="a00302.html#a228932018abdf86ec504ffc055bf6188">tbb::internal::generic_scheduler::is_local_task_pool_quiescent</a></div><div class="ttdeci">bool is_local_task_pool_quiescent() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00555">scheduler.h:555</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a00302_html_a24dd9ef31d1f73ea2fadcc35df6d9d21"><div class="ttname"><a href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">tbb::internal::generic_scheduler::release_task_pool</a></div><div class="ttdeci">void release_task_pool() const </div><div class="ttdoc">Unlocks the local task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00489">scheduler.cpp:489</a></div></div>
<div class="ttc" id="a01133_html_a1f6010c3e550e88ab739adbdee5dfdac"><div class="ttname"><a href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed</a></div><div class="ttdeci">void __TBB_store_relaxed(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00743">tbb_machine.h:743</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_aecf34e6a9902af76bbbeab1fd3851df8_cgraph.svg" width="432" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_aecf34e6a9902af76bbbeab1fd3851df8_icgraph.svg" width="100%" height="448"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7f7d3a75d44d62525c8b31c32917d242"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::commit_spawned_tasks </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_tail</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes newly spawned tasks visible to thieves. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00632">632</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release()</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, and <a class="el" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                                                     {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( new_tail &lt;= my_arena_slot-&gt;my_task_pool_size, <span class="stringliteral">&quot;task deque end was overwritten&quot;</span> );</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">// emit &quot;task was released&quot; signal</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(<a class="code" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, (<span class="keywordtype">void</span>*)((uintptr_t)<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>+<span class="keyword">sizeof</span>(uintptr_t)));</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// Release fence is necessary to make sure that previously stored task pointers</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// are visible to thieves.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">__TBB_store_with_release</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>, new_tail );</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="ttc" id="a01016_html_ac5a347b47a5603a1f30f6fbf790724b7"><div class="ttname"><a href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p sync_releasing</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00093">ittnotify_static.h:93</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a01133_html_aea57866db2fc3fe1018c89b58109b39a"><div class="ttname"><a href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release</a></div><div class="ttdeci">void __TBB_store_with_release(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00717">tbb_machine.h:717</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a7f7d3a75d44d62525c8b31c32917d242_cgraph.svg" width="432" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a7f7d3a75d44d62525c8b31c32917d242_icgraph.svg" width="100%" height="448"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac7fb04a73dbb75dd8db5c9637bfadeae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00302.html">generic_scheduler</a> * tbb::internal::generic_scheduler::create_master </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00059.html">arena</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize a scheduler for a master thread. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l01252">1252</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#a3e204e2995d502361e18169ed3e14892">tbb::internal::allocate_scheduler()</a>, <a class="el" href="a00302.html#aa101d77dc7a5e986270073e1c0e09cf6">attach_arena()</a>, <a class="el" href="a00784.html#a72c501681282668e7007fc687d9ed269ac99491356c75e56cc99644097cb7b825">tbb::task_group_context::default_traits</a>, <a class="el" href="a00489.html#a08ccaf89d501a9e56912eb5bd624066f">tbb::internal::market::global_market()</a>, <a class="el" href="a00302.html#afd799eae7903abc75b7a7aafd36e20db">init_stack_info()</a>, <a class="el" href="a00784.html#a7e7860c2e6a831fbccfe94c39454305dafbe6484f589b064e3fc3de6d23545b51">tbb::task_group_context::isolated</a>, <a class="el" href="a01016.html#a46e8be2e3aadb2f6ee62e762a36b9243">lock</a>, <a class="el" href="a00677.html#a8c128998273256972a99230b367a044c">tbb::internal::scheduler_properties::master</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>, <a class="el" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>, <a class="el" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">tbb::internal::scheduler_state::my_properties</a>, <a class="el" href="a00062.html#a988ed3221b0b40efb97849a53b168e79">tbb::internal::arena_slot_line1::my_scheduler</a>, <a class="el" href="a01147.html#ga4844e4d5f62a0843af83cf534f908ddf">tbb::internal::NFS_Allocate()</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00489.html#a76b1783a39252c34da34d0cebfe101b5">tbb::internal::market::release()</a>, <a class="el" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a>, <a class="el" href="a00307.html#ab6b7ba04ea2b541819b659219fc42ae7">tbb::internal::governor::sign_on()</a>, and <a class="el" href="a00677.html#a19b3f21bd89adab6ce032d80e01aa195">tbb::internal::scheduler_properties::type</a>.</p>

<p>Referenced by <a class="el" href="a00307.html#abf62b8bc4890ad846ff01349f8d46a84">tbb::internal::governor::init_scheduler()</a>, and <a class="el" href="a00307.html#a2fb697c689050c0d4f5438b0e29ad41c">tbb::internal::governor::init_scheduler_weak()</a>.</p>
<div class="fragment"><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                                                              {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="comment">// add an internal market reference; the public reference is possibly added in create_arena</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <a class="code" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a>* <a class="code" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a> = <a class="code" href="a01133.html#a3e204e2995d502361e18169ed3e14892">allocate_scheduler</a>( <a class="code" href="a00489.html#a08ccaf89d501a9e56912eb5bd624066f">market::global_market</a>(<span class="comment">/*is_public=*/</span><span class="keyword">false</span>) );</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !s-&gt;my_arena, NULL );</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( s-&gt;my_market, NULL );</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>&amp; t = *s-&gt;my_dummy_task;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    s-&gt;my_properties.type = <a class="code" href="a00677.html#a8c128998273256972a99230b367a044c">scheduler_properties::master</a>;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    t.prefix().ref_count = 1;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="preprocessor">#if __TBB_TASK_GROUP_CONTEXT</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    t.prefix().context = <span class="keyword">new</span> ( <a class="code" href="a01147.html#ga4844e4d5f62a0843af83cf534f908ddf">NFS_Allocate</a>(1, <span class="keyword">sizeof</span>(task_group_context), NULL) )</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            task_group_context( <a class="code" href="a00784.html#a7e7860c2e6a831fbccfe94c39454305dafbe6484f589b064e3fc3de6d23545b51">task_group_context::isolated</a>, <a class="code" href="a00784.html#a72c501681282668e7007fc687d9ed269ac99491356c75e56cc99644097cb7b825">task_group_context::default_traits</a> );</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="preprocessor">#if __TBB_FP_CONTEXT</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    s-&gt;default_context()-&gt;capture_fp_settings();</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="comment">// Do not call init_stack_info before the scheduler is set as master or worker.</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    s-&gt;init_stack_info();</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    context_state_propagation_mutex_type::scoped_lock <a class="code" href="a01016.html#a46e8be2e3aadb2f6ee62e762a36b9243">lock</a>(the_context_state_propagation_mutex);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    s-&gt;my_market-&gt;my_masters.push_front( *s );</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <a class="code" href="a01016.html#a46e8be2e3aadb2f6ee62e762a36b9243">lock</a>.release();</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_GROUP_CONTEXT */</span><span class="preprocessor"></span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">if</span>( a ) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="comment">// Master thread always occupies the first slot</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        s-&gt;attach_arena( a, <span class="comment">/*index*/</span>0, <span class="comment">/*is_master*/</span><span class="keyword">true</span> );</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    s-&gt;my_arena_slot-&gt;my_scheduler = <a class="code" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        a-&gt;my_default_ctx = s-&gt;default_context(); <span class="comment">// also transfers implied ownership</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( s-&gt;my_arena_index == 0, <span class="stringliteral">&quot;Master thread must occupy the first slot in its arena&quot;</span> );</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <a class="code" href="a00307.html#ab6b7ba04ea2b541819b659219fc42ae7">governor::sign_on</a>(s);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="preprocessor">#if _WIN32||_WIN64</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    s-&gt;my_market-&gt;register_master( s-&gt;master_exec_resource );</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _WIN32||_WIN64 */</span><span class="preprocessor"></span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="comment">// Process any existing observers.</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="preprocessor">#if __TBB_ARENA_OBSERVER</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !a || a-&gt;my_observers.empty(), <span class="stringliteral">&quot;Just created arena cannot have any observers associated with it&quot;</span> );</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="preprocessor">#if __TBB_SCHEDULER_OBSERVER</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    the_global_observer_list.notify_entry_observers( s-&gt;my_last_global_observer, <span class="comment">/*worker=*/</span><span class="keyword">false</span> );</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_SCHEDULER_OBSERVER */</span><span class="preprocessor"></span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a>;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;}</div><div class="ttc" id="a01133_html_a3e204e2995d502361e18169ed3e14892"><div class="ttname"><a href="a01133.html#a3e204e2995d502361e18169ed3e14892">tbb::internal::allocate_scheduler</a></div><div class="ttdeci">generic_scheduler * allocate_scheduler(market &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00041">scheduler.cpp:41</a></div></div>
<div class="ttc" id="a00677_html_a8c128998273256972a99230b367a044c"><div class="ttname"><a href="a00677.html#a8c128998273256972a99230b367a044c">tbb::internal::scheduler_properties::master</a></div><div class="ttdeci">static const bool master</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00052">scheduler.h:52</a></div></div>
<div class="ttc" id="a01016_html_a46e8be2e3aadb2f6ee62e762a36b9243"><div class="ttname"><a href="a01016.html#a46e8be2e3aadb2f6ee62e762a36b9243">lock</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void * lock</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00110">ittnotify_static.h:110</a></div></div>
<div class="ttc" id="a01016_html_a571c9802609300b38fd3d5ac52b1773c"><div class="ttname"><a href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync s</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00080">ittnotify_static.h:80</a></div></div>
<div class="ttc" id="a00784_html_a72c501681282668e7007fc687d9ed269ac99491356c75e56cc99644097cb7b825"><div class="ttname"><a href="a00784.html#a72c501681282668e7007fc687d9ed269ac99491356c75e56cc99644097cb7b825">tbb::task_group_context::default_traits</a></div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00368">task.h:368</a></div></div>
<div class="ttc" id="a01147_html_ga4844e4d5f62a0843af83cf534f908ddf"><div class="ttname"><a href="a01147.html#ga4844e4d5f62a0843af83cf534f908ddf">tbb::internal::NFS_Allocate</a></div><div class="ttdeci">void *__TBB_EXPORTED_FUNC NFS_Allocate(size_t n_element, size_t element_size, void *hint)</div><div class="ttdoc">Allocate memory on cache/sector line boundary. </div><div class="ttdef"><b>Definition:</b> <a href="a00971_source.html#l00180">cache_aligned_allocator.cpp:180</a></div></div>
<div class="ttc" id="a00302_html_ad7c11742ee005f6d377095062b42a5d8"><div class="ttname"><a href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">tbb::internal::generic_scheduler::generic_scheduler</a></div><div class="ttdeci">generic_scheduler(market &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00088">scheduler.cpp:88</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00489_html_a08ccaf89d501a9e56912eb5bd624066f"><div class="ttname"><a href="a00489.html#a08ccaf89d501a9e56912eb5bd624066f">tbb::internal::market::global_market</a></div><div class="ttdeci">static market &amp; global_market(bool is_public, unsigned max_num_workers=0, size_t stack_size=0)</div><div class="ttdoc">Factory method creating new market object. </div><div class="ttdef"><b>Definition:</b> <a href="a01025_source.html#l00100">market.cpp:100</a></div></div>
<div class="ttc" id="a00784_html_a7e7860c2e6a831fbccfe94c39454305dafbe6484f589b064e3fc3de6d23545b51"><div class="ttname"><a href="a00784.html#a7e7860c2e6a831fbccfe94c39454305dafbe6484f589b064e3fc3de6d23545b51">tbb::task_group_context::isolated</a></div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00355">task.h:355</a></div></div>
<div class="ttc" id="a00307_html_ab6b7ba04ea2b541819b659219fc42ae7"><div class="ttname"><a href="a00307.html#ab6b7ba04ea2b541819b659219fc42ae7">tbb::internal::governor::sign_on</a></div><div class="ttdeci">static void sign_on(generic_scheduler *s)</div><div class="ttdoc">Register TBB scheduler instance in thread-local storage. </div><div class="ttdef"><b>Definition:</b> <a href="a01004_source.html#l00128">governor.cpp:128</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_ac7fb04a73dbb75dd8db5c9637bfadeae_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_ac7fb04a73dbb75dd8db5c9637bfadeae_icgraph.svg" width="567" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aec1108924834fb3c3e1bc0d2142bccb0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00302.html">generic_scheduler</a> * tbb::internal::generic_scheduler::create_worker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00489.html">market</a> &amp;&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize a scheduler for a worker thread. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l01239">1239</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#a3e204e2995d502361e18169ed3e14892">tbb::internal::allocate_scheduler()</a>, <a class="el" href="a00302.html#afd799eae7903abc75b7a7aafd36e20db">init_stack_info()</a>, <a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a>, <a class="el" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>, <a class="el" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">tbb::internal::scheduler_state::my_properties</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a>, <a class="el" href="a00307.html#ab6b7ba04ea2b541819b659219fc42ae7">tbb::internal::governor::sign_on()</a>, <a class="el" href="a00677.html#a19b3f21bd89adab6ce032d80e01aa195">tbb::internal::scheduler_properties::type</a>, and <a class="el" href="a00677.html#a03ff24546f54200460068dbb28e0374d">tbb::internal::scheduler_properties::worker</a>.</p>

<p>Referenced by <a class="el" href="a00489.html#ae5f4653c1ea43b7011f9099348849467">tbb::internal::market::create_one_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                                                                             {</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <a class="code" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a>* <a class="code" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a> = <a class="code" href="a01133.html#a3e204e2995d502361e18169ed3e14892">allocate_scheduler</a>( m );</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>(index, <span class="stringliteral">&quot;workers should have index &gt; 0&quot;</span>);</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    s-&gt;my_arena_index = index; <span class="comment">// index is not a real slot in arena yet</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    s-&gt;my_dummy_task-&gt;prefix().ref_count = 2;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    s-&gt;my_properties.type = <a class="code" href="a00677.html#a03ff24546f54200460068dbb28e0374d">scheduler_properties::worker</a>;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="comment">// Do not call init_stack_info before the scheduler is set as master or worker.</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    s-&gt;init_stack_info();</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <a class="code" href="a00307.html#ab6b7ba04ea2b541819b659219fc42ae7">governor::sign_on</a>(s);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;}</div><div class="ttc" id="a01133_html_a3e204e2995d502361e18169ed3e14892"><div class="ttname"><a href="a01133.html#a3e204e2995d502361e18169ed3e14892">tbb::internal::allocate_scheduler</a></div><div class="ttdeci">generic_scheduler * allocate_scheduler(market &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00041">scheduler.cpp:41</a></div></div>
<div class="ttc" id="a01016_html_a571c9802609300b38fd3d5ac52b1773c"><div class="ttname"><a href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync s</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00080">ittnotify_static.h:80</a></div></div>
<div class="ttc" id="a00302_html_ad7c11742ee005f6d377095062b42a5d8"><div class="ttname"><a href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">tbb::internal::generic_scheduler::generic_scheduler</a></div><div class="ttdeci">generic_scheduler(market &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00088">scheduler.cpp:88</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00307_html_ab6b7ba04ea2b541819b659219fc42ae7"><div class="ttname"><a href="a00307.html#ab6b7ba04ea2b541819b659219fc42ae7">tbb::internal::governor::sign_on</a></div><div class="ttdeci">static void sign_on(generic_scheduler *s)</div><div class="ttdoc">Register TBB scheduler instance in thread-local storage. </div><div class="ttdef"><b>Definition:</b> <a href="a01004_source.html#l00128">governor.cpp:128</a></div></div>
<div class="ttc" id="a00677_html_a03ff24546f54200460068dbb28e0374d"><div class="ttname"><a href="a00677.html#a03ff24546f54200460068dbb28e0374d">tbb::internal::scheduler_properties::worker</a></div><div class="ttdeci">static const bool worker</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00051">scheduler.h:51</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_aec1108924834fb3c3e1bc0d2142bccb0_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_aec1108924834fb3c3e1bc0d2142bccb0_icgraph.svg" width="559" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad965858a5e7cb5574926d8d1692063b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::deallocate_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return task object to the memory allocator. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00605">605</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a00789.html#a5d3371cb924d5e764c082beedae4cb89">tbb::internal::task_prefix::extra_state</a>, <a class="el" href="a00789.html#a1e99861cb8496e37d0a0d4b08aff6029">tbb::internal::task_prefix::next</a>, <a class="el" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free()</a>, <a class="el" href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a>, <a class="el" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer()</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00789.html#ab79eff02de7b8379780378b5888548d5">tbb::internal::task_prefix::state</a>, and <a class="el" href="a01133.html#a0630d59441f75e740be0b003d2922df8">tbb::internal::task_prefix_reservation_size</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a720c816c0253fe199e4583cd24090e9b">free_nonlocal_small_task()</a>, and <a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                                        {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="preprocessor">#if TBB_USE_ASSERT</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    task_prefix&amp; <a class="code" href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a> = t.prefix();</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    p.state = 0xFF;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    p.extra_state = 0xFF;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">poison_pointer</a>(p.next);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* TBB_USE_ASSERT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">NFS_Free</a>((<span class="keywordtype">char</span>*)&amp;t-<a class="code" href="a01133.html#a0630d59441f75e740be0b003d2922df8">task_prefix_reservation_size</a>);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="preprocessor">#if __TBB_COUNT_TASK_NODES</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    --my_task_node_count;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_COUNT_TASK_NODES */</span><span class="preprocessor"></span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div><div class="ttc" id="a01147_html_ga7814c9ccc02b8fe5f712fb6fd8a2b607"><div class="ttname"><a href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free</a></div><div class="ttdeci">void __TBB_EXPORTED_FUNC NFS_Free(void *)</div><div class="ttdoc">Free memory allocated by NFS_Allocate. </div><div class="ttdef"><b>Definition:</b> <a href="a00971_source.html#l00202">cache_aligned_allocator.cpp:202</a></div></div>
<div class="ttc" id="a01133_html_a0630d59441f75e740be0b003d2922df8"><div class="ttname"><a href="a01133.html#a0630d59441f75e740be0b003d2922df8">tbb::internal::task_prefix_reservation_size</a></div><div class="ttdeci">const size_t task_prefix_reservation_size</div><div class="ttdoc">Number of bytes reserved for a task prefix. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00163">scheduler_common.h:163</a></div></div>
<div class="ttc" id="a01133_html_a58dafd43fac118e984cc4f19f3901609"><div class="ttname"><a href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer</a></div><div class="ttdeci">void poison_pointer(T *__TBB_atomic &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00309">tbb_stddef.h:309</a></div></div>
<div class="ttc" id="a01016_html_ae01354a6a694c51fb79588444a08cbee"><div class="ttname"><a href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync p</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00080">ittnotify_static.h:80</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_ad965858a5e7cb5574926d8d1692063b5_cgraph.svg" width="603" height="192"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_ad965858a5e7cb5574926d8d1692063b5_icgraph.svg" width="100%" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a21fedf3ec39056fdd7b7718f2421e229"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::enqueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> *&#160;</td>
          <td class="paramname"><em>reserved</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For internal use only. </p>

<p>Implements <a class="el" href="a00676.html#a94082ae3690f15e22de4ceec29cfc941">tbb::internal::scheduler</a>.</p>

<p>Definition at line <a class="el" href="a01061_source.html#l00714">714</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01063.html#ae8bf2edd69c1485ce30d4e88cc7e27d2">__TBB_ISOLATION_ARG</a>, <a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>, <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>, <a class="el" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed()</a>, <a class="el" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool()</a>, <a class="el" href="a00059.html#adb8d121b4784a910d8d2861a7062446b">tbb::internal::arena::advertise_new_work()</a>, <a class="el" href="a00302.html#a08edecb9bd9ef648bada9fb5b1febeec">assert_task_pool_valid()</a>, <a class="el" href="a01133.html#a35e1c039fac0fa1b7d8b4f491d557a86">tbb::internal::assert_task_valid()</a>, <a class="el" href="a00250.html#a48d1c96d94c3dad0c130eaab3ac80049">tbb::internal::fast_reverse_vector&lt; T, max_segments &gt;::copy_memory()</a>, <a class="el" href="a00059.html#a334aae7c4cbeabb8f3924589517c0c5f">tbb::internal::arena::enqueue_task()</a>, <a class="el" href="a00061.html#a738e7bf1cdd82b4d174947bbc746c766">tbb::internal::arena_slot::fill_with_canary_pattern()</a>, <a class="el" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>, <a class="el" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task()</a>, <a class="el" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a>, <a class="el" href="a00302.html#a228932018abdf86ec504ffc055bf6188">is_local_task_pool_quiescent()</a>, <a class="el" href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">is_proxy()</a>, <a class="el" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published()</a>, <a class="el" href="a00302.html#aad4a3aef975ca2516a81640654a65717">leave_task_pool()</a>, <a class="el" href="a00307.html#af2d5dff302cbba60bcf7becbdce2ade9">tbb::internal::governor::local_scheduler()</a>, <a class="el" href="a01133.html#a80df3dc4f925e066864ab01691add3b0">tbb::internal::max()</a>, <a class="el" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a>, <a class="el" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a>, <a class="el" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>, <a class="el" href="a00060.html#a8e346bbed329804473efe0f8080c9e8b">tbb::internal::arena_base::my_num_workers_requested</a>, <a class="el" href="a00302.html#aee56a8b51b71d3f96f9c8cacf00fe845">my_random</a>, <a class="el" href="a00778.html#a30f13aac27c8d2ee6e85865e54115862">tbb::task::note_affinity()</a>, <a class="el" href="a01133.html#ae1dadab9152ec72bebfb2827c03846e6">tbb::internal::num_priority_levels</a>, <a class="el" href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a>, <a class="el" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer()</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool()</a>, <a class="el" href="a00302.html#af222cccbf09e91c9c9caaad81f8d993d">publish_task_pool()</a>, <a class="el" href="a00250.html#ae533cd1ab5be44deaa0ee7ad7ece6f4b">tbb::internal::fast_reverse_vector&lt; T, max_segments &gt;::push_back()</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ab2cde487a169988d66fc1052cedc92dc">tbb::task::ready</a>, <a class="el" href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">release_task_pool()</a>, <a class="el" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a>, <a class="el" href="a00250.html#aa8613832b1bd5dab7186d19ad6d6e751">tbb::internal::fast_reverse_vector&lt; T, max_segments &gt;::size()</a>, <a class="el" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a>, <a class="el" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a>, <a class="el" href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90">tbb::internal::arena::wakeup</a>, and <a class="el" href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeea2109ea81736367212fa797959b4b4381">tbb::internal::arena::work_spawned</a>.</p>
<div class="fragment"><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                                                                {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a> *<a class="code" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a> = <a class="code" href="a00307.html#af2d5dff302cbba60bcf7becbdce2ade9">governor::local_scheduler</a>();</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// these redirections are due to bw-compatibility, consider reworking some day</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( s-&gt;my_arena, <span class="stringliteral">&quot;thread is not in any arena&quot;</span> );</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    s-&gt;my_arena-&gt;enqueue_task(t, (intptr_t)prio, s-&gt;my_random );</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div><div class="ttc" id="a01016_html_a571c9802609300b38fd3d5ac52b1773c"><div class="ttname"><a href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync s</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00080">ittnotify_static.h:80</a></div></div>
<div class="ttc" id="a00307_html_af2d5dff302cbba60bcf7becbdce2ade9"><div class="ttname"><a href="a00307.html#af2d5dff302cbba60bcf7becbdce2ade9">tbb::internal::governor::local_scheduler</a></div><div class="ttdeci">static generic_scheduler * local_scheduler()</div><div class="ttdoc">Obtain the thread-local instance of the TBB scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01005_source.html#l00126">governor.h:126</a></div></div>
<div class="ttc" id="a00302_html_ad7c11742ee005f6d377095062b42a5d8"><div class="ttname"><a href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">tbb::internal::generic_scheduler::generic_scheduler</a></div><div class="ttdeci">generic_scheduler(market &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00088">scheduler.cpp:88</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a21fedf3ec39056fdd7b7718f2421e229_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a720c816c0253fe199e4583cd24090e9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::free_nonlocal_small_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a small task t that that was allocated by a different scheduler. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00379">379</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01028.html#a644c0db3feb5f77ad8bc19a1b775a2a3">__TBB_cl_evict</a>, <a class="el" href="a01089.html#a58e2509c2723ffe8c2f2a3e73059d65b">__TBB_FetchAndDecrementWrelease</a>, <a class="el" href="a01133.html#ad83994557e481148b704625b46dece25">tbb::internal::as_atomic()</a>, <a class="el" href="a00302.html#ad965858a5e7cb5574926d8d1692063b5">deallocate_task()</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">tbb::task::freed</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free()</a>, <a class="el" href="a00302.html#abb580929e3e34d6da1728e6fee8b6979">plugged_return_list()</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a>, <a class="el" href="a00778.html#a22ef8282e09458a46131843219cb71e5">tbb::task::state()</a>, and <a class="el" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                                          {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( t.state()==<a class="code" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">task::freed</a>, NULL );</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a>&amp; <a class="code" href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a> = *<span class="keyword">static_cast&lt;</span><a class="code" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a>*<span class="keyword">&gt;</span>(t.prefix().origin);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( &amp;s!=<span class="keyword">this</span>, NULL );</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">for</span>(;;) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* old = s.my_return_list;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">if</span>( old==<a class="code" href="a00302.html#abb580929e3e34d6da1728e6fee8b6979">plugged_return_list</a>() )</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="comment">// Atomically insert t at head of s.my_return_list</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        t.prefix().next = old;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>( <a class="code" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, &amp;s.my_return_list );</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="a01133.html#ad83994557e481148b704625b46dece25">as_atomic</a>(s.my_return_list).compare_and_swap(&amp;t, old )==old ) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">#if __TBB_PREFETCHING</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <a class="code" href="a01028.html#a644c0db3feb5f77ad8bc19a1b775a2a3">__TBB_cl_evict</a>(&amp;t.prefix());</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <a class="code" href="a01028.html#a644c0db3feb5f77ad8bc19a1b775a2a3">__TBB_cl_evict</a>(&amp;t);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="a00302.html#ad965858a5e7cb5574926d8d1692063b5">deallocate_task</a>(t);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="a01089.html#a58e2509c2723ffe8c2f2a3e73059d65b">__TBB_FetchAndDecrementWrelease</a>( &amp;s.my_small_task_count )==1 ) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="comment">// We freed the last task allocated by scheduler s, so it&#39;s our responsibility</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="comment">// to free the scheduler.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">NFS_Free</a>( &amp;s );</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div><div class="ttc" id="a00778_html_a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de"><div class="ttname"><a href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">tbb::task::freed</a></div><div class="ttdoc">task object is on free list, or is going to be put there, or was just taken off. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00622">task.h:622</a></div></div>
<div class="ttc" id="a01016_html_a571c9802609300b38fd3d5ac52b1773c"><div class="ttname"><a href="a01016.html#a571c9802609300b38fd3d5ac52b1773c">s</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync s</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00080">ittnotify_static.h:80</a></div></div>
<div class="ttc" id="a00302_html_ad965858a5e7cb5574926d8d1692063b5"><div class="ttname"><a href="a00302.html#ad965858a5e7cb5574926d8d1692063b5">tbb::internal::generic_scheduler::deallocate_task</a></div><div class="ttdeci">void deallocate_task(task &amp;t)</div><div class="ttdoc">Return task object to the memory allocator. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00605">scheduler.h:605</a></div></div>
<div class="ttc" id="a00302_html_abb580929e3e34d6da1728e6fee8b6979"><div class="ttname"><a href="a00302.html#abb580929e3e34d6da1728e6fee8b6979">tbb::internal::generic_scheduler::plugged_return_list</a></div><div class="ttdeci">static task * plugged_return_list()</div><div class="ttdoc">Special value used to mark my_return_list as not taking any more entries. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00380">scheduler.h:380</a></div></div>
<div class="ttc" id="a01089_html_a58e2509c2723ffe8c2f2a3e73059d65b"><div class="ttname"><a href="a01089.html#a58e2509c2723ffe8c2f2a3e73059d65b">__TBB_FetchAndDecrementWrelease</a></div><div class="ttdeci">#define __TBB_FetchAndDecrementWrelease(P)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00315">tbb_machine.h:315</a></div></div>
<div class="ttc" id="a00302_html_ad7c11742ee005f6d377095062b42a5d8"><div class="ttname"><a href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">tbb::internal::generic_scheduler::generic_scheduler</a></div><div class="ttdeci">generic_scheduler(market &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00088">scheduler.cpp:88</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a01028_html_a644c0db3feb5f77ad8bc19a1b775a2a3"><div class="ttname"><a href="a01028.html#a644c0db3feb5f77ad8bc19a1b775a2a3">__TBB_cl_evict</a></div><div class="ttdeci">#define __TBB_cl_evict(p)</div><div class="ttdef"><b>Definition:</b> <a href="a01028_source.html#l00038">mic_common.h:38</a></div></div>
<div class="ttc" id="a01016_html_ac5a347b47a5603a1f30f6fbf790724b7"><div class="ttname"><a href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p sync_releasing</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00093">ittnotify_static.h:93</a></div></div>
<div class="ttc" id="a01133_html_ad83994557e481148b704625b46dece25"><div class="ttname"><a href="a01133.html#ad83994557e481148b704625b46dece25">tbb::internal::as_atomic</a></div><div class="ttdeci">atomic&lt; T &gt; &amp; as_atomic(T &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="a00965_source.html#l00547">atomic.h:547</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a01147_html_ga7814c9ccc02b8fe5f712fb6fd8a2b607"><div class="ttname"><a href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free</a></div><div class="ttdeci">void __TBB_EXPORTED_FUNC NFS_Free(void *)</div><div class="ttdoc">Free memory allocated by NFS_Allocate. </div><div class="ttdef"><b>Definition:</b> <a href="a00971_source.html#l00202">cache_aligned_allocator.cpp:202</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a720c816c0253fe199e4583cd24090e9b_cgraph.svg" width="100%" height="542"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a720c816c0253fe199e4583cd24090e9b_icgraph.svg" width="100%" height="437"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a66e6dd672693eb34cd6fd46ed7a7c6a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::free_scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy and deallocate this scheduler object. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00264">264</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a00302.html#ad965858a5e7cb5574926d8d1692063b5">deallocate_task()</a>, <a class="el" href="a00302.html#a720c816c0253fe199e4583cd24090e9b">free_nonlocal_small_task()</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a>, <a class="el" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>, <a class="el" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">tbb::internal::scheduler_state::my_properties</a>, <a class="el" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a>, <a class="el" href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">my_small_task_count</a>, <a class="el" href="a00789.html#a1e99861cb8496e37d0a0d4b08aff6029">tbb::internal::task_prefix::next</a>, <a class="el" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free()</a>, <a class="el" href="a00789.html#a2d6ccc91fedf894c46b623c7a4a35c34">tbb::internal::task_prefix::origin</a>, <a class="el" href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a>, <a class="el" href="a00302.html#abb580929e3e34d6da1728e6fee8b6979">plugged_return_list()</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, and <a class="el" href="a00307.html#a46a6d847486220d3eab529c78bd883ed">tbb::internal::governor::sign_off()</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#ac223f7892d65e496c37190c4009ea1f7">cleanup_master()</a>, and <a class="el" href="a00302.html#ae6a0b659589202963562cbdb23465807">cleanup_worker()</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                       {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>, NULL );</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">#if __TBB_PREVIEW_CRITICAL_TASKS</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !<a class="code" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">my_properties</a>.has_taken_critical_task, <span class="stringliteral">&quot;Critical tasks miscount.&quot;</span> );</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">#if __TBB_TASK_GROUP_CONTEXT</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    cleanup_local_context_list();</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_GROUP_CONTEXT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    free_task&lt;small_local_task&gt;( *my_dummy_task );</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#if __TBB_HOARD_NONLOCAL_TASKS</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">while</span>( <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* t = my_nonlocal_free_list ) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        task_prefix&amp; <a class="code" href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a> = t-&gt;prefix();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        my_nonlocal_free_list = p.next;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( p.origin &amp;&amp; p.origin!=<span class="keyword">this</span>, NULL );</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="a00302.html#a720c816c0253fe199e4583cd24090e9b">free_nonlocal_small_task</a>(*t);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// k accounts for a guard reference and each task that we deallocate.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    intptr_t k = 1;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">for</span>(;;) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">while</span>( <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* t = <a class="code" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a> ) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a> = t-&gt;<a class="code" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">prefix</a>().next;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <a class="code" href="a00302.html#ad965858a5e7cb5574926d8d1692063b5">deallocate_task</a>(*t);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            ++k;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a>==<a class="code" href="a00302.html#abb580929e3e34d6da1728e6fee8b6979">plugged_return_list</a>() )</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a> = (<a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>*)__TBB_FetchAndStoreW( &amp;<a class="code" href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">my_return_list</a>, (intptr_t)<a class="code" href="a00302.html#abb580929e3e34d6da1728e6fee8b6979">plugged_return_list</a>() );</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">#if __TBB_COUNT_TASK_NODES</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>-&gt;update_task_node_count( my_task_node_count );</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_COUNT_TASK_NODES */</span><span class="preprocessor"></span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// Update my_small_task_count last.  Doing so sooner might cause another thread to free *this.</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">my_small_task_count</a>&gt;=k, <span class="stringliteral">&quot;my_small_task_count corrupted&quot;</span> );</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="a00307.html#a46a6d847486220d3eab529c78bd883ed">governor::sign_off</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span>( __TBB_FetchAndAddW( &amp;<a class="code" href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">my_small_task_count</a>, -k )==k )</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <a class="code" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">NFS_Free</a>( <span class="keyword">this</span> );</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div><div class="ttc" id="a00678_html_aed181c52b8462c43272d45e625cd31fa"><div class="ttname"><a href="a00678.html#aed181c52b8462c43272d45e625cd31fa">tbb::internal::scheduler_state::my_properties</a></div><div class="ttdeci">scheduler_properties my_properties</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00095">scheduler.h:95</a></div></div>
<div class="ttc" id="a00302_html_ad965858a5e7cb5574926d8d1692063b5"><div class="ttname"><a href="a00302.html#ad965858a5e7cb5574926d8d1692063b5">tbb::internal::generic_scheduler::deallocate_task</a></div><div class="ttdeci">void deallocate_task(task &amp;t)</div><div class="ttdoc">Return task object to the memory allocator. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00605">scheduler.h:605</a></div></div>
<div class="ttc" id="a00302_html_abb580929e3e34d6da1728e6fee8b6979"><div class="ttname"><a href="a00302.html#abb580929e3e34d6da1728e6fee8b6979">tbb::internal::generic_scheduler::plugged_return_list</a></div><div class="ttdeci">static task * plugged_return_list()</div><div class="ttdoc">Special value used to mark my_return_list as not taking any more entries. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00380">scheduler.h:380</a></div></div>
<div class="ttc" id="a00302_html_a4bd421a07fae7a1c9e3fa49e005bb513"><div class="ttname"><a href="a00302.html#a4bd421a07fae7a1c9e3fa49e005bb513">tbb::internal::generic_scheduler::my_small_task_count</a></div><div class="ttdeci">__TBB_atomic intptr_t my_small_task_count</div><div class="ttdoc">Number of small tasks that have been allocated by this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00383">scheduler.h:383</a></div></div>
<div class="ttc" id="a00307_html_a46a6d847486220d3eab529c78bd883ed"><div class="ttname"><a href="a00307.html#a46a6d847486220d3eab529c78bd883ed">tbb::internal::governor::sign_off</a></div><div class="ttdeci">static void sign_off(generic_scheduler *s)</div><div class="ttdoc">Unregister TBB scheduler instance from thread-local storage. </div><div class="ttdef"><b>Definition:</b> <a href="a01004_source.html#l00149">governor.cpp:149</a></div></div>
<div class="ttc" id="a00302_html_a720c816c0253fe199e4583cd24090e9b"><div class="ttname"><a href="a00302.html#a720c816c0253fe199e4583cd24090e9b">tbb::internal::generic_scheduler::free_nonlocal_small_task</a></div><div class="ttdeci">void free_nonlocal_small_task(task &amp;t)</div><div class="ttdoc">Free a small task t that that was allocated by a different scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00379">scheduler.cpp:379</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00302_html_ab5777a002f8b7b3a72cb7fc4a477fb29"><div class="ttname"><a href="a00302.html#ab5777a002f8b7b3a72cb7fc4a477fb29">tbb::internal::generic_scheduler::my_return_list</a></div><div class="ttdeci">task * my_return_list</div><div class="ttdoc">List of small tasks that have been returned to this scheduler by other schedulers. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00387">scheduler.h:387</a></div></div>
<div class="ttc" id="a00302_html_ac652e4a610353888a31352e678955e1b"><div class="ttname"><a href="a00302.html#ac652e4a610353888a31352e678955e1b">tbb::internal::generic_scheduler::my_market</a></div><div class="ttdeci">market * my_market</div><div class="ttdoc">The market I am in. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00159">scheduler.h:159</a></div></div>
<div class="ttc" id="a01147_html_ga7814c9ccc02b8fe5f712fb6fd8a2b607"><div class="ttname"><a href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free</a></div><div class="ttdeci">void __TBB_EXPORTED_FUNC NFS_Free(void *)</div><div class="ttdoc">Free memory allocated by NFS_Allocate. </div><div class="ttdef"><b>Definition:</b> <a href="a00971_source.html#l00202">cache_aligned_allocator.cpp:202</a></div></div>
<div class="ttc" id="a00302_html_a52ed26dede8410a72f37bce24cb26239"><div class="ttname"><a href="a00302.html#a52ed26dede8410a72f37bce24cb26239">tbb::internal::generic_scheduler::my_free_list</a></div><div class="ttdeci">task * my_free_list</div><div class="ttdoc">Free list of small tasks that can be reused. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00165">scheduler.h:165</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00778_html_a2bfe4567c87e5b783ca8595f95cfdb90"><div class="ttname"><a href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix</a></div><div class="ttdeci">internal::task_prefix &amp; prefix(internal::version_tag *=NULL) const </div><div class="ttdoc">Get reference to corresponding task_prefix. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00941">task.h:941</a></div></div>
<div class="ttc" id="a01016_html_ae01354a6a694c51fb79588444a08cbee"><div class="ttname"><a href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync p</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00080">ittnotify_static.h:80</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a66e6dd672693eb34cd6fd46ed7a7c6a6_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a66e6dd672693eb34cd6fd46ed7a7c6a6_icgraph.svg" width="100%" height="437"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a12dd37171af77214add72a973e6b71ba"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;free_task_hint hint&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::free_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put task on free list. </p>
<p>Does not call destructor. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00652">652</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084">tbb::task::allocated</a>, <a class="el" href="a00789.html#a79af149df5cdf0cb8f93791b5989cfd1">tbb::internal::task_prefix::depth</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ae450c433161eef2e97881924b0a5ffba">tbb::task::executing</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">tbb::task::freed</a>, <a class="el" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>, <a class="el" href="a00191.html#aaa8736f85328446abb0d9b75a031a12d">tbb::internal::cpu_ctl_env::get_env()</a>, <a class="el" href="a01016.html#ae68700d2ebda197674e2fdd0f916f00c">h</a>, <a class="el" href="a01133.html#a3354e5fb6a188f3ae9d96fdce8b0c26d">tbb::internal::is_critical()</a>, <a class="el" href="a01011.html#aa1ed93ae04f7e5833dc43dd5a43c704d">ITT_TASK_BEGIN</a>, <a class="el" href="a01011.html#aba13eb56a43bcf01419ff5606cd44094">ITT_TASK_END</a>, <a class="el" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d">tbb::internal::local_task</a>, <a class="el" href="a00784.html#ae92a7a6800f73d398c2535aa3f8584c4">tbb::task_group_context::my_cpu_ctl_env</a>, <a class="el" href="a00784.html#a2559184bacee73b28cb7b0509faf5794">tbb::task_group_context::my_name</a>, <a class="el" href="a00789.html#a1e99861cb8496e37d0a0d4b08aff6029">tbb::internal::task_prefix::next</a>, <a class="el" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046a0f3a050fefae0c29cb5ef54e594705d5">tbb::internal::no_cache</a>, <a class="el" href="a00789.html#a2d6ccc91fedf894c46b623c7a4a35c34">tbb::internal::task_prefix::origin</a>, <a class="el" href="a00789.html#a3a55f2d0ccd2a4c25c3958c9c168851c">tbb::internal::task_prefix::owner</a>, <a class="el" href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a>, <a class="el" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer()</a>, <a class="el" href="a01063.html#afd76b58919b61d3e37baa46d5299c6e7">poison_value</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a01133.html#ad413aa12f103993fc8cf47ddc570bb9c">tbb::internal::punned_cast()</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ab2cde487a169988d66fc1052cedc92dc">tbb::task::ready</a>, <a class="el" href="a00789.html#aaaf2f12ee06495a26f5e03bf74c43d89">tbb::internal::task_prefix::ref_count</a>, <a class="el" href="a00191.html#a9d4dfd8cbbd56ce66effae5af7dbc418">tbb::internal::cpu_ctl_env::set_env()</a>, <a class="el" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046ae0c9c2045c071c502f5d38b9416f3573">tbb::internal::small_local_task</a>, <a class="el" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046aaf0a7aee9592ca8530fde20c2f5fd473">tbb::internal::small_task</a>, <a class="el" href="a00789.html#ab79eff02de7b8379780378b5888548d5">tbb::internal::task_prefix::state</a>, and <a class="el" href="a00778.html#a22ef8282e09458a46131843219cb71e5">tbb::task::state()</a>.</p>

<p>Referenced by <a class="el" href="a00781.html#a75c0c291f0020cf9be1234013ec4990b">tbb::interface5::internal::task_base::destroy()</a>, <a class="el" href="a00047.html#a65fbfed257af0abda4e109a27576667e">tbb::internal::allocate_additional_child_of_proxy::free()</a>, <a class="el" href="a00049.html#a681282ec77816457ee409a6775aa415e">tbb::internal::allocate_continuation_proxy::free()</a>, <a class="el" href="a00048.html#a2a6b401b674d801ae26402dc778b21bf">tbb::internal::allocate_child_proxy::free()</a>, and <a class="el" href="a00098.html#ab443866ef525c5e113e38d7bc0f65a0b">tbb::internal::auto_empty_task::~auto_empty_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                                           {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="preprocessor">#if __TBB_HOARD_NONLOCAL_TASKS</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="a01016.html#ae68700d2ebda197674e2fdd0f916f00c">h</a> = hint&amp;(~<a class="code" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d">local_task</a>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046">free_task_hint</a> h = hint;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>(--my_counters.active_tasks);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    task_prefix&amp; <a class="code" href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a> = t.prefix();</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">// Verify that optimization hints are correct.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( h!=<a class="code" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046ae0c9c2045c071c502f5d38b9416f3573">small_local_task</a> || p.origin==<span class="keyword">this</span>, NULL );</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !(h&amp;<a class="code" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046aaf0a7aee9592ca8530fde20c2f5fd473">small_task</a>) || p.origin, NULL );</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !(h&amp;<a class="code" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d">local_task</a>) || (!p.origin || uintptr_t(p.origin) &gt; uintptr_t(4096)), <span class="stringliteral">&quot;local_task means allocated&quot;</span>);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <a class="code" href="a01063.html#afd76b58919b61d3e37baa46d5299c6e7">poison_value</a>(p.depth);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="a01063.html#afd76b58919b61d3e37baa46d5299c6e7">poison_value</a>(p.ref_count);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">poison_pointer</a>(p.owner);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( 1L&lt;&lt;t.state() &amp; (1L&lt;&lt;<a class="code" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ae450c433161eef2e97881924b0a5ffba">task::executing</a>|1L&lt;&lt;<a class="code" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084">task::allocated</a>), NULL );</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    p.state = <a class="code" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">task::freed</a>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span>( h==<a class="code" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046ae0c9c2045c071c502f5d38b9416f3573">small_local_task</a> || p.origin==<span class="keyword">this</span> ) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>(++my_counters.free_list_length);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        p.next = <a class="code" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a>;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <a class="code" href="a00302.html#a52ed26dede8410a72f37bce24cb26239">my_free_list</a> = &amp;t;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !(h&amp;local_task) &amp;&amp; p.origin &amp;&amp; uintptr_t(p.origin) &lt; uintptr_t(4096) ) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="comment">// a special value reserved for future use, do nothing since</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="comment">// origin is not pointing to a scheduler instance</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !(h&amp;local_task) &amp;&amp; p.origin ) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>(++my_counters.free_list_length);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="preprocessor">#if __TBB_HOARD_NONLOCAL_TASKS</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordflow">if</span>( !(h&amp;<a class="code" href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046a0f3a050fefae0c29cb5ef54e594705d5">no_cache</a>) ) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            p.next = my_nonlocal_free_list;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            my_nonlocal_free_list = &amp;t;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        } <span class="keywordflow">else</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <a class="code" href="a00302.html#a720c816c0253fe199e4583cd24090e9b">free_nonlocal_small_task</a>(t);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>(--my_counters.big_tasks);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <a class="code" href="a00302.html#ad965858a5e7cb5574926d8d1692063b5">deallocate_task</a>(t);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div><div class="ttc" id="a00778_html_a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de"><div class="ttname"><a href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ad5877992ceab99813e0aa790420504de">tbb::task::freed</a></div><div class="ttdoc">task object is on free list, or is going to be put there, or was just taken off. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00622">task.h:622</a></div></div>
<div class="ttc" id="a01133_html_ae233ad3ab63128c255b7c1b0a2168046"><div class="ttname"><a href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046">tbb::internal::free_task_hint</a></div><div class="ttdeci">free_task_hint</div><div class="ttdoc">Optimization hint to free_task that enables it omit unnecessary tests and code. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00190">scheduler_common.h:190</a></div></div>
<div class="ttc" id="a00302_html_ad965858a5e7cb5574926d8d1692063b5"><div class="ttname"><a href="a00302.html#ad965858a5e7cb5574926d8d1692063b5">tbb::internal::generic_scheduler::deallocate_task</a></div><div class="ttdeci">void deallocate_task(task &amp;t)</div><div class="ttdoc">Return task object to the memory allocator. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00605">scheduler.h:605</a></div></div>
<div class="ttc" id="a01133_html_ae233ad3ab63128c255b7c1b0a2168046a0f3a050fefae0c29cb5ef54e594705d5"><div class="ttname"><a href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046a0f3a050fefae0c29cb5ef54e594705d5">tbb::internal::no_cache</a></div><div class="ttdoc">Disable caching for a small task. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00202">scheduler_common.h:202</a></div></div>
<div class="ttc" id="a01133_html_ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d"><div class="ttname"><a href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046ad1109dd198378032b4b9fb2963d3b85d">tbb::internal::local_task</a></div><div class="ttdoc">Task is known to have been allocated by this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00194">scheduler_common.h:194</a></div></div>
<div class="ttc" id="a01133_html_ae233ad3ab63128c255b7c1b0a2168046aaf0a7aee9592ca8530fde20c2f5fd473"><div class="ttname"><a href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046aaf0a7aee9592ca8530fde20c2f5fd473">tbb::internal::small_task</a></div><div class="ttdoc">Task is known to be a small task. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00197">scheduler_common.h:197</a></div></div>
<div class="ttc" id="a00778_html_a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084"><div class="ttname"><a href="a00778.html#a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084">tbb::task::allocated</a></div><div class="ttdoc">task object is freshly allocated or recycled. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00620">task.h:620</a></div></div>
<div class="ttc" id="a00302_html_a720c816c0253fe199e4583cd24090e9b"><div class="ttname"><a href="a00302.html#a720c816c0253fe199e4583cd24090e9b">tbb::internal::generic_scheduler::free_nonlocal_small_task</a></div><div class="ttdeci">void free_nonlocal_small_task(task &amp;t)</div><div class="ttdoc">Free a small task t that that was allocated by a different scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00379">scheduler.cpp:379</a></div></div>
<div class="ttc" id="a01016_html_ae68700d2ebda197674e2fdd0f916f00c"><div class="ttname"><a href="a01016.html#ae68700d2ebda197674e2fdd0f916f00c">h</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void ITT_FORMAT p void ITT_FORMAT p void size_t ITT_FORMAT d void ITT_FORMAT p const wchar_t ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s no args void ITT_FORMAT p size_t ITT_FORMAT d no args const wchar_t const wchar_t ITT_FORMAT s __itt_heap_function h</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00148">ittnotify_static.h:148</a></div></div>
<div class="ttc" id="a01097_html_a08f1e46bb511c63da3ce07aa9c897bc4"><div class="ttname"><a href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a></div><div class="ttdeci">#define GATHER_STATISTIC(x)</div><div class="ttdef"><b>Definition:</b> <a href="a01097_source.html#l00236">tbb_statistics.h:236</a></div></div>
<div class="ttc" id="a01063_html_afd76b58919b61d3e37baa46d5299c6e7"><div class="ttname"><a href="a01063.html#afd76b58919b61d3e37baa46d5299c6e7">poison_value</a></div><div class="ttdeci">#define poison_value(g)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00238">scheduler_common.h:238</a></div></div>
<div class="ttc" id="a00778_html_a3935129602baa0b18727f8fc7384dbf1ae450c433161eef2e97881924b0a5ffba"><div class="ttname"><a href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ae450c433161eef2e97881924b0a5ffba">tbb::task::executing</a></div><div class="ttdoc">task is running, and will be destroyed after method execute() completes. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00614">task.h:614</a></div></div>
<div class="ttc" id="a01133_html_ae233ad3ab63128c255b7c1b0a2168046ae0c9c2045c071c502f5d38b9416f3573"><div class="ttname"><a href="a01133.html#ae233ad3ab63128c255b7c1b0a2168046ae0c9c2045c071c502f5d38b9416f3573">tbb::internal::small_local_task</a></div><div class="ttdoc">Bitwise-OR of local_task and small_task. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00200">scheduler_common.h:200</a></div></div>
<div class="ttc" id="a00302_html_a52ed26dede8410a72f37bce24cb26239"><div class="ttname"><a href="a00302.html#a52ed26dede8410a72f37bce24cb26239">tbb::internal::generic_scheduler::my_free_list</a></div><div class="ttdeci">task * my_free_list</div><div class="ttdoc">Free list of small tasks that can be reused. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00165">scheduler.h:165</a></div></div>
<div class="ttc" id="a01133_html_a58dafd43fac118e984cc4f19f3901609"><div class="ttname"><a href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer</a></div><div class="ttdeci">void poison_pointer(T *__TBB_atomic &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00309">tbb_stddef.h:309</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a01016_html_ae01354a6a694c51fb79588444a08cbee"><div class="ttname"><a href="a01016.html#ae01354a6a694c51fb79588444a08cbee">p</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync p</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00080">ittnotify_static.h:80</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a12dd37171af77214add72a973e6b71ba_cgraph.svg" width="100%" height="592"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a12dd37171af77214add72a973e6b71ba_icgraph.svg" width="100%" height="535"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5657ac6c517d9bbf59a424ef330640bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a> * tbb::internal::generic_scheduler::get_mailbox_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>(<a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to get a task from the mailbox. </p>
<p>Gets a task only if it has not been executed by its sender or a thief that has stolen it from the sender's task pool. Otherwise returns NULL.</p>
<p>This method is intended to be used only by the thread extracting the proxy from its mailbox. (In contrast to local task pool, mailbox can be read only by its owner). </p>

<p>Definition at line <a class="el" href="a01061_source.html#l01200">1200</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>, <a class="el" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2e086a4d594002615b167ab481fa32fe">tbb::internal::es_task_is_stolen</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a00790.html#a7b7339255177d3817844a39271e20484">tbb::internal::task_proxy::mailbox_bit</a>, <a class="el" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a>, <a class="el" href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">tbb::internal::scheduler_state::my_inbox</a>, and <a class="el" href="a00480.html#a0fb84023310cef34c91ea39e2c7fbc0f">tbb::internal::mail_inbox::pop()</a>.</p>
<div class="fragment"><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                                                                                           {</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">my_affinity_id</a>&gt;0, <span class="stringliteral">&quot;not in arena&quot;</span> );</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keywordflow">while</span> ( task_proxy* <span class="keyword">const</span> tp = <a class="code" href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">my_inbox</a>.<a class="code" href="a00480.html#a0fb84023310cef34c91ea39e2c7fbc0f">pop</a>( <a class="code" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>( isolation ) ) ) {</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* result = tp-&gt;extract_task&lt;<a class="code" href="a00790.html#a7b7339255177d3817844a39271e20484">task_proxy::mailbox_bit</a>&gt;() ) {</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>( sync_acquired, <a class="code" href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">my_inbox</a>.outbox() );</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            result-&gt;prefix().extra_state |= <a class="code" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2e086a4d594002615b167ab481fa32fe">es_task_is_stolen</a>;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        }</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="comment">// We have exclusive access to the proxy, and can destroy it.</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        free_task&lt;no_cache_small_task&gt;(*tp);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    }</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;}</div><div class="ttc" id="a01063_html_a63e9a35b6d2bfbfb21b3199dc03acc6d"><div class="ttname"><a href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a></div><div class="ttdeci">#define __TBB_ISOLATION_EXPR(isolation)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00071">scheduler_common.h:71</a></div></div>
<div class="ttc" id="a00480_html_a0fb84023310cef34c91ea39e2c7fbc0f"><div class="ttname"><a href="a00480.html#a0fb84023310cef34c91ea39e2c7fbc0f">tbb::internal::mail_inbox::pop</a></div><div class="ttdeci">task_proxy * pop(__TBB_ISOLATION_EXPR(isolation_tag isolation))</div><div class="ttdoc">Get next piece of mail, or NULL if mailbox is empty. </div><div class="ttdef"><b>Definition:</b> <a href="a01024_source.html#l00206">mailbox.h:206</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00678_html_a3a635bad42d492013d4a06d1af0c452b"><div class="ttname"><a href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a></div><div class="ttdeci">affinity_id my_affinity_id</div><div class="ttdoc">The mailbox id assigned to this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00093">scheduler.h:93</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a01133_html_a5fb219223e38c8bbcc47d7c943f48e54a2e086a4d594002615b167ab481fa32fe"><div class="ttname"><a href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2e086a4d594002615b167ab481fa32fe">tbb::internal::es_task_is_stolen</a></div><div class="ttdoc">Set if the task has been stolen. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00182">scheduler_common.h:182</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a5b120ea3121cd82f578eef2c1319f9fe"><div class="ttname"><a href="a00678.html#a5b120ea3121cd82f578eef2c1319f9fe">tbb::internal::scheduler_state::my_inbox</a></div><div class="ttdeci">mail_inbox my_inbox</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00084">scheduler.h:84</a></div></div>
<div class="ttc" id="a00790_html_a7b7339255177d3817844a39271e20484"><div class="ttname"><a href="a00790.html#a7b7339255177d3817844a39271e20484">tbb::internal::task_proxy::mailbox_bit</a></div><div class="ttdeci">static const intptr_t mailbox_bit</div><div class="ttdef"><b>Definition:</b> <a href="a01024_source.html#l00035">mailbox.h:35</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a5657ac6c517d9bbf59a424ef330640bb_cgraph.svg" width="100%" height="427"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a10c72a4aad7308d944cef26502ece55e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a> * tbb::internal::generic_scheduler::get_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>(<a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a task from the local pool. </p>
<p>Called only by the pool owner. Returns the pointer to the task or NULL if a suitable task is not found. Resets the pool if it is empty. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00978">978</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a00999.html#a739e3f9cf251b0c785e86fba7c8f8c7c">__TBB_control_consistency_helper</a>, <a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>, <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>, <a class="el" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed()</a>, <a class="el" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release()</a>, <a class="el" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool()</a>, <a class="el" href="a00059.html#adb8d121b4784a910d8d2861a7062446b">tbb::internal::arena::advertise_new_work()</a>, <a class="el" href="a01133.html#a35e1c039fac0fa1b7d8b4f491d557a86">tbb::internal::assert_task_valid()</a>, <a class="el" href="a01113.html#a33e73b97b02726c692bd8d9da8e3fb1b">tbb::atomic_fence()</a>, <a class="el" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a>, <a class="el" href="a00302.html#a41fe4dd6cf0d0bd7db3440ff1f5e70ff">is_quiescent_local_task_pool_reset()</a>, <a class="el" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published()</a>, <a class="el" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a>, <a class="el" href="a00778.html#a30f13aac27c8d2ee6e85865e54115862">tbb::task::note_affinity()</a>, <a class="el" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer()</a>, <a class="el" href="a00302.html#af222cccbf09e91c9c9caaad81f8d993d">publish_task_pool()</a>, <a class="el" href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">release_task_pool()</a>, <a class="el" href="a00302.html#ad8f6a6793961db84240434fffd7b50f3">reset_task_pool_and_leave()</a>, <a class="el" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a>, <a class="el" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a>, and <a class="el" href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90">tbb::internal::arena::wakeup</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                                                                          {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>(), NULL );</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="comment">// The current task position in the task pool.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordtype">size_t</span> T0 = <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a> );</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="comment">// The bounds of available tasks in the task pool. H0 is only used when the head bound is reached.</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordtype">size_t</span> H0 = (size_t)-1, T = T0;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* result = NULL;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordtype">bool</span> task_pool_empty = <span class="keyword">false</span>;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>( <span class="keywordtype">bool</span> tasks_omitted = <span class="keyword">false</span> );</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !result, NULL );</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>, --T );</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <a class="code" href="a01113.html#a33e73b97b02726c692bd8d9da8e3fb1b">atomic_fence</a>();</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordflow">if</span> ( (intptr_t)<a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a> ) &gt; (intptr_t)T ) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <a class="code" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool</a>();</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            H0 = <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a> );</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <span class="keywordflow">if</span> ( (intptr_t)H0 &gt; (intptr_t)T ) {</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                <span class="comment">// The thief has not backed off - nothing to grab.</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( H0 == <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a> )</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                    &amp;&amp; T == <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a> )</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                    &amp;&amp; H0 == T + 1, <span class="stringliteral">&quot;victim/thief arbitration algorithm failure&quot;</span> );</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                <a class="code" href="a00302.html#ad8f6a6793961db84240434fffd7b50f3">reset_task_pool_and_leave</a>();</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <span class="comment">// No tasks in the task pool.</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                task_pool_empty = <span class="keyword">true</span>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( H0 == T ) {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                <span class="comment">// There is only one task in the task pool.</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                <a class="code" href="a00302.html#ad8f6a6793961db84240434fffd7b50f3">reset_task_pool_and_leave</a>();</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                task_pool_empty = <span class="keyword">true</span>;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                <span class="comment">// Release task pool if there are still some tasks.</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                <span class="comment">// After the release, the tail will be less than T, thus a thief</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                <span class="comment">// will not attempt to get a task at position T.</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                <a class="code" href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">release_task_pool</a>();</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        }</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <a class="code" href="a00999.html#a739e3f9cf251b0c785e86fba7c8f8c7c">__TBB_control_consistency_helper</a>(); <span class="comment">// on my_arena_slot-&gt;head</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="preprocessor">#if __TBB_TASK_ISOLATION</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        result = <a class="code" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task</a>( T, isolation, tasks_omitted );</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">if</span> ( result ) {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <a class="code" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">poison_pointer</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>[T] );</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !tasks_omitted ) {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <a class="code" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">poison_pointer</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>[T] );</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( T0 == T+1, NULL );</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            T0 = T;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        result = <a class="code" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task</a>( T );</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_ISOLATION */</span><span class="preprocessor"></span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    } <span class="keywordflow">while</span> ( !result &amp;&amp; !task_pool_empty );</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="preprocessor">#if __TBB_TASK_ISOLATION</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">if</span> ( tasks_omitted ) {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keywordflow">if</span> ( task_pool_empty ) {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="comment">// All tasks have been checked. The task pool should be  in reset state.</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="comment">// We just restore the bounds for the available tasks.</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="comment">// TODO: Does it have sense to move them to the beginning of the task pool?</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#a41fe4dd6cf0d0bd7db3440ff1f5e70ff">is_quiescent_local_task_pool_reset</a>(), NULL );</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">if</span> ( result ) {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                <span class="comment">// If we have a task, it should be at H0 position.</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( H0 == T, NULL );</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                ++H0;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            }</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( H0 &lt;= T0, NULL );</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <span class="keywordflow">if</span> ( H0 &lt; T0 ) {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <span class="comment">// Restore the task pool if there are some tasks.</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a>, H0 );</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>, T0 );</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                <span class="comment">// The release fence is used in publish_task_pool.</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                <a class="code" href="a00302.html#af222cccbf09e91c9c9caaad81f8d993d">publish_task_pool</a>();</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="comment">// Synchronize with snapshot as we published some tasks.</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#adb8d121b4784a910d8d2861a7062446b">advertise_new_work</a>&lt;<a class="code" href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90">arena::wakeup</a>&gt;();</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <span class="comment">// A task has been obtained. We need to make a hole in position T.</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>(), NULL );</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( result, NULL );</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>[T] = NULL;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <a class="code" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">__TBB_store_with_release</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>, T0 );</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            <span class="comment">// Synchronize with snapshot as we published some tasks.</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="comment">// TODO: consider some approach not to call wakeup for each time. E.g. check if the tail reached the head.</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#adb8d121b4784a910d8d2861a7062446b">advertise_new_work</a>&lt;<a class="code" href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90">arena::wakeup</a>&gt;();</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="comment">// Now it is safe to call note_affinity because the task pool is restored.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">my_innermost_running_task</a> == result ) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <a class="code" href="a01133.html#a35e1c039fac0fa1b7d8b4f491d557a86">assert_task_valid</a>( result );</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            result-&gt;note_affinity( <a class="code" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">my_affinity_id</a> );</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        }</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_ISOLATION */</span><span class="preprocessor"></span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( (intptr_t)<a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a> ) &gt;= 0, NULL );</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( result || <a class="code" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>( tasks_omitted || ) <a class="code" href="a00302.html#a41fe4dd6cf0d0bd7db3440ff1f5e70ff">is_quiescent_local_task_pool_reset</a>(), NULL );</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;} <span class="comment">// generic_scheduler::get_task</span></div><div class="ttc" id="a00302_html_a22a847d9945a845e136c9163f835adcd"><div class="ttname"><a href="a00302.html#a22a847d9945a845e136c9163f835adcd">tbb::internal::generic_scheduler::is_task_pool_published</a></div><div class="ttdeci">bool is_task_pool_published() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00550">scheduler.h:550</a></div></div>
<div class="ttc" id="a01113_html_a33e73b97b02726c692bd8d9da8e3fb1b"><div class="ttname"><a href="a01113.html#a33e73b97b02726c692bd8d9da8e3fb1b">tbb::atomic_fence</a></div><div class="ttdeci">void atomic_fence()</div><div class="ttdoc">Sequentially consistent full memory fence. </div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00343">tbb_machine.h:343</a></div></div>
<div class="ttc" id="a00059_html_a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90"><div class="ttname"><a href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90">tbb::internal::arena::wakeup</a></div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00189">arena.h:189</a></div></div>
<div class="ttc" id="a00062_html_a6b0b8214404af0b2c30f442b33d0d209"><div class="ttname"><a href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a></div><div class="ttdeci">__TBB_atomic size_t head</div><div class="ttdoc">Index of the first ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00346">scheduler_common.h:346</a></div></div>
<div class="ttc" id="a00302_html_a10c72a4aad7308d944cef26502ece55e"><div class="ttname"><a href="a00302.html#a10c72a4aad7308d944cef26502ece55e">tbb::internal::generic_scheduler::get_task</a></div><div class="ttdeci">task * get_task(__TBB_ISOLATION_EXPR(isolation_tag isolation))</div><div class="ttdoc">Get a task from the local pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00978">scheduler.cpp:978</a></div></div>
<div class="ttc" id="a01063_html_a63e9a35b6d2bfbfb21b3199dc03acc6d"><div class="ttname"><a href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a></div><div class="ttdeci">#define __TBB_ISOLATION_EXPR(isolation)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00071">scheduler_common.h:71</a></div></div>
<div class="ttc" id="a00302_html_a6e2af1d0f7af34dee87a5b207d498f59"><div class="ttname"><a href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">tbb::internal::generic_scheduler::acquire_task_pool</a></div><div class="ttdeci">void acquire_task_pool() const </div><div class="ttdoc">Locks the local task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00460">scheduler.cpp:460</a></div></div>
<div class="ttc" id="a00999_html_a739e3f9cf251b0c785e86fba7c8f8c7c"><div class="ttname"><a href="a00999.html#a739e3f9cf251b0c785e86fba7c8f8c7c">__TBB_control_consistency_helper</a></div><div class="ttdeci">#define __TBB_control_consistency_helper()</div><div class="ttdef"><b>Definition:</b> <a href="a00999_source.html#l00064">gcc_generic.h:64</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00678_html_a3a635bad42d492013d4a06d1af0c452b"><div class="ttname"><a href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a></div><div class="ttdeci">affinity_id my_affinity_id</div><div class="ttdoc">The mailbox id assigned to this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00093">scheduler.h:93</a></div></div>
<div class="ttc" id="a01133_html_a35e1c039fac0fa1b7d8b4f491d557a86"><div class="ttname"><a href="a01133.html#a35e1c039fac0fa1b7d8b4f491d557a86">tbb::internal::assert_task_valid</a></div><div class="ttdeci">void assert_task_valid(const task *)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00240">scheduler_common.h:240</a></div></div>
<div class="ttc" id="a00302_html_a41fe4dd6cf0d0bd7db3440ff1f5e70ff"><div class="ttname"><a href="a00302.html#a41fe4dd6cf0d0bd7db3440ff1f5e70ff">tbb::internal::generic_scheduler::is_quiescent_local_task_pool_reset</a></div><div class="ttdeci">bool is_quiescent_local_task_pool_reset() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00566">scheduler.h:566</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a01133_html_a9c68ba9b3309fdabe739f77b71ed9a67"><div class="ttname"><a href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed</a></div><div class="ttdeci">T __TBB_load_relaxed(const volatile T &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00739">tbb_machine.h:739</a></div></div>
<div class="ttc" id="a01133_html_aea57866db2fc3fe1018c89b58109b39a"><div class="ttname"><a href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release</a></div><div class="ttdeci">void __TBB_store_with_release(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00717">tbb_machine.h:717</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a00302_html_a24dd9ef31d1f73ea2fadcc35df6d9d21"><div class="ttname"><a href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">tbb::internal::generic_scheduler::release_task_pool</a></div><div class="ttdeci">void release_task_pool() const </div><div class="ttdoc">Unlocks the local task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00489">scheduler.cpp:489</a></div></div>
<div class="ttc" id="a00678_html_aac9af4d8baddbbc2af433e11297be8a5"><div class="ttname"><a href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a></div><div class="ttdeci">task * my_innermost_running_task</div><div class="ttdoc">Innermost task whose task::execute() is running. A dummy task on the outermost level. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00081">scheduler.h:81</a></div></div>
<div class="ttc" id="a01133_html_a58dafd43fac118e984cc4f19f3901609"><div class="ttname"><a href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer</a></div><div class="ttdeci">void poison_pointer(T *__TBB_atomic &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00309">tbb_stddef.h:309</a></div></div>
<div class="ttc" id="a01133_html_a1f6010c3e550e88ab739adbdee5dfdac"><div class="ttname"><a href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed</a></div><div class="ttdeci">void __TBB_store_relaxed(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00743">tbb_machine.h:743</a></div></div>
<div class="ttc" id="a00302_html_af222cccbf09e91c9c9caaad81f8d993d"><div class="ttname"><a href="a00302.html#af222cccbf09e91c9c9caaad81f8d993d">tbb::internal::generic_scheduler::publish_task_pool</a></div><div class="ttdeci">void publish_task_pool()</div><div class="ttdoc">Used by workers to enter the task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l01214">scheduler.cpp:1214</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00063_html_acaf81236f1e1c743b3a1be8b03505a30"><div class="ttname"><a href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a></div><div class="ttdeci">task **__TBB_atomic task_pool_ptr</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00367">scheduler_common.h:367</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00059_html_adb8d121b4784a910d8d2861a7062446b"><div class="ttname"><a href="a00059.html#adb8d121b4784a910d8d2861a7062446b">tbb::internal::arena::advertise_new_work</a></div><div class="ttdeci">void advertise_new_work()</div><div class="ttdoc">If necessary, raise a flag that there is new job in arena. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00393">arena.h:393</a></div></div>
<div class="ttc" id="a00302_html_ad8f6a6793961db84240434fffd7b50f3"><div class="ttname"><a href="a00302.html#ad8f6a6793961db84240434fffd7b50f3">tbb::internal::generic_scheduler::reset_task_pool_and_leave</a></div><div class="ttdeci">void reset_task_pool_and_leave()</div><div class="ttdoc">Resets head and tail indices to 0, and leaves task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00624">scheduler.h:624</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a10c72a4aad7308d944cef26502ece55e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a10c72a4aad7308d944cef26502ece55e_icgraph.svg" width="344" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aad832dcce47939c2fd150a0e63a395ec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a> * tbb::internal::generic_scheduler::get_task </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>T</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a task from the local pool at specified location T. </p>
<p>Returns the pointer to the task or NULL if the task cannot be executed, e.g. proxy has been deallocated or isolation constraint is not met. tasks_omitted tells if some tasks have been omitted. Called only by the pool owner. The caller should guarantee that the position T is not available for a thief. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00926">926</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>, <a class="el" href="a00790.html#a3a144ac1ce1252f4b4da060d5d3f5ded">tbb::internal::task_proxy::extract_task()</a>, <a class="el" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>, <a class="el" href="a00302.html#a228932018abdf86ec504ffc055bf6188">is_local_task_pool_quiescent()</a>, <a class="el" href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">is_proxy()</a>, <a class="el" href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">is_version_3_task()</a>, <a class="el" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a>, <a class="el" href="a01133.html#aa2cfd9c6baf73cebacad0fffcd79e7ba">tbb::internal::no_isolation</a>, <a class="el" href="a00778.html#a30f13aac27c8d2ee6e85865e54115862">tbb::task::note_affinity()</a>, <a class="el" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer()</a>, <a class="el" href="a00790.html#a6339e879ab7b6576df404a749f603c51">tbb::internal::task_proxy::pool_bit</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a>, and <a class="el" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a>.</p>
<div class="fragment"><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;{</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a> ) &lt;= T</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        || <a class="code" href="a00302.html#a228932018abdf86ec504ffc055bf6188">is_local_task_pool_quiescent</a>(), <span class="stringliteral">&quot;Is it safe to get a task at position T?&quot;</span> );</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* result = <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>[T];</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !is_poisoned( result ), <span class="stringliteral">&quot;The poisoned task is going to be processed&quot;</span> );</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="preprocessor">#if __TBB_TASK_ISOLATION</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> ( !result )</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordtype">bool</span> omit = isolation != <a class="code" href="a01133.html#aa2cfd9c6baf73cebacad0fffcd79e7ba">no_isolation</a> &amp;&amp; isolation != result-&gt;prefix().isolation;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> ( !omit &amp;&amp; !<a class="code" href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">is_proxy</a>( *result ) )</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( omit ) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        tasks_omitted = <span class="keyword">true</span>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    }</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="code" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">poison_pointer</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>[T] );</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordflow">if</span> ( !result || !<a class="code" href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">is_proxy</a>( *result ) )</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_ISOLATION */</span><span class="preprocessor"></span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    task_proxy&amp; tp = <span class="keyword">static_cast&lt;</span>task_proxy&amp;<span class="keyword">&gt;</span>(*result);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> *t = tp.extract_task&lt;<a class="code" href="a00790.html#a6339e879ab7b6576df404a749f603c51">task_proxy::pool_bit</a>&gt;() ) {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>( ++my_counters.proxies_executed );</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <span class="comment">// Following assertion should be true because TBB 2.0 tasks never specify affinity, and hence are not proxied.</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">is_version_3_task</a>( *t ), <span class="stringliteral">&quot;backwards compatibility with TBB 2.0 broken&quot;</span> );</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">my_innermost_running_task</a> != t, NULL );</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <a class="code" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">my_innermost_running_task</a> = t; <span class="comment">// prepare for calling note_affinity()</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="preprocessor">#if __TBB_TASK_ISOLATION</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="comment">// Task affinity has changed. Postpone calling note_affinity because the task pool is in invalid state.</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">if</span> ( !tasks_omitted )</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_ISOLATION */</span><span class="preprocessor"></span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <a class="code" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">poison_pointer</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>[T] );</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            t-&gt;note_affinity( <a class="code" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">my_affinity_id</a> );</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        }</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keywordflow">return</span> t;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="comment">// Proxy was empty, so it&#39;s our responsibility to free it</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    free_task&lt;small_task&gt;( tp );</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="preprocessor">#if __TBB_TASK_ISOLATION</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> ( tasks_omitted )</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>[T] = NULL;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_ISOLATION */</span><span class="preprocessor"></span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;}</div><div class="ttc" id="a00302_html_a868812dd8d875a225a6f589fdbaafe54"><div class="ttname"><a href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">tbb::internal::generic_scheduler::is_proxy</a></div><div class="ttdeci">static bool is_proxy(const task &amp;t)</div><div class="ttdoc">True if t is a task_proxy. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00273">scheduler.h:273</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00678_html_a3a635bad42d492013d4a06d1af0c452b"><div class="ttname"><a href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a></div><div class="ttdeci">affinity_id my_affinity_id</div><div class="ttdoc">The mailbox id assigned to this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00093">scheduler.h:93</a></div></div>
<div class="ttc" id="a01097_html_a08f1e46bb511c63da3ce07aa9c897bc4"><div class="ttname"><a href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a></div><div class="ttdeci">#define GATHER_STATISTIC(x)</div><div class="ttdef"><b>Definition:</b> <a href="a01097_source.html#l00236">tbb_statistics.h:236</a></div></div>
<div class="ttc" id="a00302_html_a228932018abdf86ec504ffc055bf6188"><div class="ttname"><a href="a00302.html#a228932018abdf86ec504ffc055bf6188">tbb::internal::generic_scheduler::is_local_task_pool_quiescent</a></div><div class="ttdeci">bool is_local_task_pool_quiescent() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00555">scheduler.h:555</a></div></div>
<div class="ttc" id="a01133_html_aa2cfd9c6baf73cebacad0fffcd79e7ba"><div class="ttname"><a href="a01133.html#aa2cfd9c6baf73cebacad0fffcd79e7ba">tbb::internal::no_isolation</a></div><div class="ttdeci">const isolation_tag no_isolation</div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00129">task.h:129</a></div></div>
<div class="ttc" id="a01133_html_a9c68ba9b3309fdabe739f77b71ed9a67"><div class="ttname"><a href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed</a></div><div class="ttdeci">T __TBB_load_relaxed(const volatile T &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00739">tbb_machine.h:739</a></div></div>
<div class="ttc" id="a00302_html_a33519b4cf710f8c46129672f79fb6ec4"><div class="ttname"><a href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">tbb::internal::generic_scheduler::is_version_3_task</a></div><div class="ttdeci">static bool is_version_3_task(task &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00133">scheduler.h:133</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a00678_html_aac9af4d8baddbbc2af433e11297be8a5"><div class="ttname"><a href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a></div><div class="ttdeci">task * my_innermost_running_task</div><div class="ttdoc">Innermost task whose task::execute() is running. A dummy task on the outermost level. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00081">scheduler.h:81</a></div></div>
<div class="ttc" id="a01133_html_a58dafd43fac118e984cc4f19f3901609"><div class="ttname"><a href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer</a></div><div class="ttdeci">void poison_pointer(T *__TBB_atomic &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00309">tbb_stddef.h:309</a></div></div>
<div class="ttc" id="a00790_html_a6339e879ab7b6576df404a749f603c51"><div class="ttname"><a href="a00790.html#a6339e879ab7b6576df404a749f603c51">tbb::internal::task_proxy::pool_bit</a></div><div class="ttdeci">static const intptr_t pool_bit</div><div class="ttdef"><b>Definition:</b> <a href="a01024_source.html#l00034">mailbox.h:34</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00063_html_acaf81236f1e1c743b3a1be8b03505a30"><div class="ttname"><a href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a></div><div class="ttdeci">task **__TBB_atomic task_pool_ptr</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00367">scheduler_common.h:367</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_aad832dcce47939c2fd150a0e63a395ec_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="afd799eae7903abc75b7a7aafd36e20db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::init_stack_info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up the data necessary for the stealing limiting heuristics. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00150">150</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01020.html#aeedc3ebf2bee4ce8767bfca043d5ac94">__TBB_get_bsp()</a>, <a class="el" href="a01098.html#af564a3d15abb837e0307da37fc856c89">__TBB_get_object_ref</a>, <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>, <a class="el" href="a00679.html#a7c702117f08ae82d034a98b3d5510ffc">tbb::spin_mutex::scoped_lock::acquire()</a>, <a class="el" href="a01133.html#ad83994557e481148b704625b46dece25">tbb::internal::as_atomic()</a>, <a class="el" href="a01113.html#a33e73b97b02726c692bd8d9da8e3fb1b">tbb::atomic_fence()</a>, <a class="el" href="a00784.html#afe07b96c8a3d594054c014ea121e7d26">tbb::task_group_context::binding_required</a>, <a class="el" href="a00784.html#a816fc693531de95214f32b92cc5b5f92">tbb::task_group_context::detached</a>, <a class="el" href="a00784.html#aea413d0a4f7de3342a96992aa3de65e7">tbb::task_group_context::dying</a>, <a class="el" href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">is_worker()</a>, <a class="el" href="a01016.html#a46e8be2e3aadb2f6ee62e762a36b9243">lock</a>, <a class="el" href="a01133.html#a62737658527916cac71cf5361606656e">tbb::internal::MByte</a>, <a class="el" href="a00784.html#a0019904588bb47d6985da5475edb8a6a">tbb::task_group_context::my_kind</a>, <a class="el" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>, <a class="el" href="a00174.html#a309e100ed48b71562969d05b21584d23">tbb::internal::context_list_node_t::my_next</a>, <a class="el" href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">my_stealing_threshold</a>, <a class="el" href="a00784.html#afbfc596a879476e88eb260edddcd4c43">tbb::task_group_context::my_version_and_traits</a>, <a class="el" href="a01113.html#adb86d08473679d6fe0eabcdc766ffe3aa73cb2e2bcb94442b8b2b72e93a76f2e5">tbb::relaxed</a>, <a class="el" href="a01113.html#adb86d08473679d6fe0eabcdc766ffe3aa412563418e657114a102db610f726632">tbb::release</a>, <a class="el" href="a01133.html#a9006317b947d3f9f7a457e295e5b8330">tbb::internal::spin_wait_until_eq()</a>, and <a class="el" href="a00489.html#ac6ecbe31da77180a3ce42b7b3c46fc18">tbb::internal::market::worker_stack_size()</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#ac7fb04a73dbb75dd8db5c9637bfadeae">create_master()</a>, and <a class="el" href="a00302.html#aec1108924834fb3c3e1bc0d2142bccb0">create_worker()</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                         {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// Stacks are growing top-down. Highest address is called &quot;stack base&quot;,</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// and the lowest is &quot;stack limit&quot;.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !<a class="code" href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">my_stealing_threshold</a>, <span class="stringliteral">&quot;Stealing threshold has already been calculated&quot;</span> );</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">size_t</span>  stack_size = <a class="code" href="a00302.html#ac652e4a610353888a31352e678955e1b">my_market</a>-&gt;<a class="code" href="a00489.html#ac6ecbe31da77180a3ce42b7b3c46fc18">worker_stack_size</a>();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#if USE_WINTHREAD</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)&amp;&amp;_MSC_VER&lt;1400 &amp;&amp; !_WIN64</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    NT_TIB  *pteb;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    __asm mov eax, fs:[0x18]</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    __asm mov pteb, eax</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    NT_TIB  *pteb = (NT_TIB*)NtCurrentTeb();</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( &amp;pteb &lt; pteb-&gt;StackBase &amp;&amp; &amp;pteb &gt; pteb-&gt;StackLimit, <span class="stringliteral">&quot;invalid stack info in TEB&quot;</span> );</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( stack_size &gt;0, <span class="stringliteral">&quot;stack_size not initialized?&quot;</span> );</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// When a thread is created with the attribute STACK_SIZE_PARAM_IS_A_RESERVATION, stack limit</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// in the TIB points to the committed part of the stack only. This renders the expression</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// &quot;(uintptr_t)pteb-&gt;StackBase / 2 + (uintptr_t)pteb-&gt;StackLimit / 2&quot; virtually useless.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// Thus for worker threads we use the explicit stack size we used while creating them.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// And for master threads we rely on the following fact and assumption:</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// - the default stack size of a master thread on Windows is 1M;</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// - if it was explicitly set by the application it is at least as large as the size of a worker stack.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">is_worker</a>() || stack_size &lt; <a class="code" href="a01133.html#a62737658527916cac71cf5361606656e">MByte</a> )</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">my_stealing_threshold</a> = (uintptr_t)pteb-&gt;StackBase - stack_size / 2;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">my_stealing_threshold</a> = (uintptr_t)pteb-&gt;StackBase - <a class="code" href="a01133.html#a62737658527916cac71cf5361606656e">MByte</a> / 2;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* USE_PTHREAD */</span><span class="preprocessor"></span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// There is no portable way to get stack base address in Posix, so we use</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// non-portable method (on all modern Linux) or the simplified approach</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// based on the common sense assumptions. The most important assumption</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// is that the main thread&#39;s stack size is not less than that of other threads.</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// See also comment 3 at the end of this file</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">void</span>    *stack_base = &amp;stack_size;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#if __linux__ &amp;&amp; !__bg__</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#if __TBB_ipf</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">void</span>    *rsb_base = <a class="code" href="a01020.html#aeedc3ebf2bee4ce8767bfca043d5ac94">__TBB_get_bsp</a>();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordtype">size_t</span>  np_stack_size = 0;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordtype">void</span>    *stack_limit = NULL;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    pthread_attr_t  np_attr_stack;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span>( 0 == pthread_getattr_np(pthread_self(), &amp;np_attr_stack) ) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span> ( 0 == pthread_attr_getstack(&amp;np_attr_stack, &amp;stack_limit, &amp;np_stack_size) ) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">#if __TBB_ipf</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            pthread_attr_t  attr_stack;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">if</span> ( 0 == pthread_attr_init(&amp;attr_stack) ) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <span class="keywordflow">if</span> ( 0 == pthread_attr_getstacksize(&amp;attr_stack, &amp;stack_size) ) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <span class="keywordflow">if</span> ( np_stack_size &lt; stack_size ) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        <span class="comment">// We are in a secondary thread. Use reliable data.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        <span class="comment">// IA-64 architecture stack is split into RSE backup and memory parts</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        rsb_base = stack_limit;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        stack_size = np_stack_size/2;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        <span class="comment">// Limit of the memory part of the stack</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        stack_limit = (<span class="keywordtype">char</span>*)stack_limit + stack_size;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    <span class="comment">// We are either in the main thread or this thread stack</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    <span class="comment">// is bigger that that of the main one. As we cannot discern</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    <span class="comment">// these cases we fall back to the default (heuristic) values.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                pthread_attr_destroy(&amp;attr_stack);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="comment">// IA-64 architecture stack is split into RSE backup and memory parts</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            my_rsb_stealing_threshold = (uintptr_t)((<span class="keywordtype">char</span>*)rsb_base + stack_size/2);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_ipf */</span><span class="preprocessor"></span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="comment">// Size of the stack free part</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            stack_size = size_t((<span class="keywordtype">char</span>*)stack_base - (<span class="keywordtype">char</span>*)stack_limit);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        pthread_attr_destroy(&amp;np_attr_stack);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __linux__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( stack_size&gt;0, <span class="stringliteral">&quot;stack size must be positive&quot;</span> );</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">my_stealing_threshold</a> = (uintptr_t)((<span class="keywordtype">char</span>*)stack_base - stack_size/2);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_PTHREAD */</span><span class="preprocessor"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="ttc" id="a00489_html_ac6ecbe31da77180a3ce42b7b3c46fc18"><div class="ttname"><a href="a00489.html#ac6ecbe31da77180a3ce42b7b3c46fc18">tbb::internal::market::worker_stack_size</a></div><div class="ttdeci">size_t worker_stack_size() const </div><div class="ttdoc">Returns the requested stack size of worker threads. </div><div class="ttdef"><b>Definition:</b> <a href="a01026_source.html#l00298">market.h:298</a></div></div>
<div class="ttc" id="a01020_html_aeedc3ebf2bee4ce8767bfca043d5ac94"><div class="ttname"><a href="a01020.html#aeedc3ebf2bee4ce8767bfca043d5ac94">__TBB_get_bsp</a></div><div class="ttdeci">void * __TBB_get_bsp()</div><div class="ttdoc">Retrieves the current RSE backing store pointer. IA64 specific. </div></div>
<div class="ttc" id="a00302_html_a4451a0cd678c9d7f37c80d581e3d4b14"><div class="ttname"><a href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">tbb::internal::generic_scheduler::is_worker</a></div><div class="ttdeci">bool is_worker() const </div><div class="ttdoc">True if running on a worker thread, false otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00595">scheduler.h:595</a></div></div>
<div class="ttc" id="a00302_html_ac652e4a610353888a31352e678955e1b"><div class="ttname"><a href="a00302.html#ac652e4a610353888a31352e678955e1b">tbb::internal::generic_scheduler::my_market</a></div><div class="ttdeci">market * my_market</div><div class="ttdoc">The market I am in. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00159">scheduler.h:159</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a01133_html_a62737658527916cac71cf5361606656e"><div class="ttname"><a href="a01133.html#a62737658527916cac71cf5361606656e">tbb::internal::MByte</a></div><div class="ttdeci">const size_t MByte</div><div class="ttdef"><b>Definition:</b> <a href="a01093_source.html#l00044">tbb_misc.h:44</a></div></div>
<div class="ttc" id="a00302_html_ade9f23ce97db8725a9c3718e76aa682d"><div class="ttname"><a href="a00302.html#ade9f23ce97db8725a9c3718e76aa682d">tbb::internal::generic_scheduler::my_stealing_threshold</a></div><div class="ttdeci">uintptr_t my_stealing_threshold</div><div class="ttdoc">Position in the call stack specifying its maximal filling when stealing is still allowed. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00142">scheduler.h:142</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_afd799eae7903abc75b7a7aafd36e20db_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_afd799eae7903abc75b7a7aafd36e20db_icgraph.svg" width="100%" height="437"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a228932018abdf86ec504ffc055bf6188"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::is_local_task_pool_quiescent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01062_source.html#l00555">555</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>, and <a class="el" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, and <a class="el" href="a00302.html#aad832dcce47939c2fd150a0e63a395ec">get_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                                                   {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>, 0);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>** tp = <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">return</span> tp == <a class="code" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a> || tp == <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div><div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a01062_html_a6f1c5fa8b2e50a1a91282165c7a9dae2"><div class="ttname"><a href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a></div><div class="ttdeci">#define EmptyTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00046">scheduler.h:46</a></div></div>
<div class="ttc" id="a01062_html_a096a309d24c5ac85036e8970880e5efd"><div class="ttname"><a href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a></div><div class="ttdeci">#define LockedTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00047">scheduler.h:47</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00062_html_a9096bfd9df29790ef46791385c5a8162"><div class="ttname"><a href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a></div><div class="ttdeci">task **__TBB_atomic task_pool</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00342">scheduler_common.h:342</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a228932018abdf86ec504ffc055bf6188_icgraph.svg" width="371" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a868812dd8d875a225a6f589fdbaafe54"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool tbb::internal::generic_scheduler::is_proxy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00778.html">task</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if t is a <a class="el" href="a00790.html">task_proxy</a>. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00273">273</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01063.html#ae8bf2edd69c1485ce30d4e88cc7e27d2">__TBB_ISOLATION_ARG</a>, <a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>, <a class="el" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2b1c67cc200577a0b07649fdb00bec49">tbb::internal::es_task_proxy</a>, and <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, <a class="el" href="a00302.html#aad832dcce47939c2fd150a0e63a395ec">get_task()</a>, <a class="el" href="a00302.html#abb8f3f3967170ca9398e55b90220c3cb">steal_task()</a>, and <a class="el" href="a00302.html#a15b506cb1b1da8e37255fc2fcdf250f0">steal_task_from()</a>.</p>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                          {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">return</span> t.prefix().extra_state==<a class="code" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2b1c67cc200577a0b07649fdb00bec49">es_task_proxy</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div><div class="ttc" id="a01133_html_a5fb219223e38c8bbcc47d7c943f48e54a2b1c67cc200577a0b07649fdb00bec49"><div class="ttname"><a href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2b1c67cc200577a0b07649fdb00bec49">tbb::internal::es_task_proxy</a></div><div class="ttdoc">Tag for v3 task_proxy. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00178">scheduler_common.h:178</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a868812dd8d875a225a6f589fdbaafe54_cgraph.svg" width="516" height="104"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a868812dd8d875a225a6f589fdbaafe54_icgraph.svg" width="590" height="235"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1b5b30c44c0a0a0d6fa6548fead0f879"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::is_quiescent_local_task_pool_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01062_source.html#l00561">561</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, and <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#aad4a3aef975ca2516a81640654a65717">leave_task_pool()</a>.</p>
<div class="fragment"><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                                                         {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#a228932018abdf86ec504ffc055bf6188">is_local_task_pool_quiescent</a>(), <span class="stringliteral">&quot;Task pool is not quiescent&quot;</span> );</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a>) == <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;}</div><div class="ttc" id="a00062_html_a6b0b8214404af0b2c30f442b33d0d209"><div class="ttname"><a href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a></div><div class="ttdeci">__TBB_atomic size_t head</div><div class="ttdoc">Index of the first ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00346">scheduler_common.h:346</a></div></div>
<div class="ttc" id="a00302_html_a228932018abdf86ec504ffc055bf6188"><div class="ttname"><a href="a00302.html#a228932018abdf86ec504ffc055bf6188">tbb::internal::generic_scheduler::is_local_task_pool_quiescent</a></div><div class="ttdeci">bool is_local_task_pool_quiescent() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00555">scheduler.h:555</a></div></div>
<div class="ttc" id="a01133_html_a9c68ba9b3309fdabe739f77b71ed9a67"><div class="ttname"><a href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed</a></div><div class="ttdeci">T __TBB_load_relaxed(const volatile T &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00739">tbb_machine.h:739</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a1b5b30c44c0a0a0d6fa6548fead0f879_cgraph.svg" width="364" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a1b5b30c44c0a0a0d6fa6548fead0f879_icgraph.svg" width="100%" height="412"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a41fe4dd6cf0d0bd7db3440ff1f5e70ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::is_quiescent_local_task_pool_reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01062_source.html#l00566">566</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, and <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task()</a>, <a class="el" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool()</a>, and <a class="el" href="a00059.html#aff17fc29650655b080b795be34179d20">tbb::internal::arena::process()</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                                                         {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#a228932018abdf86ec504ffc055bf6188">is_local_task_pool_quiescent</a>(), <span class="stringliteral">&quot;Task pool is not quiescent&quot;</span> );</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a>) == 0 &amp;&amp; <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>) == 0;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div><div class="ttc" id="a00062_html_a6b0b8214404af0b2c30f442b33d0d209"><div class="ttname"><a href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a></div><div class="ttdeci">__TBB_atomic size_t head</div><div class="ttdoc">Index of the first ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00346">scheduler_common.h:346</a></div></div>
<div class="ttc" id="a00302_html_a228932018abdf86ec504ffc055bf6188"><div class="ttname"><a href="a00302.html#a228932018abdf86ec504ffc055bf6188">tbb::internal::generic_scheduler::is_local_task_pool_quiescent</a></div><div class="ttdeci">bool is_local_task_pool_quiescent() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00555">scheduler.h:555</a></div></div>
<div class="ttc" id="a01133_html_a9c68ba9b3309fdabe739f77b71ed9a67"><div class="ttname"><a href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed</a></div><div class="ttdeci">T __TBB_load_relaxed(const volatile T &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00739">tbb_machine.h:739</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a41fe4dd6cf0d0bd7db3440ff1f5e70ff_cgraph.svg" width="364" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a41fe4dd6cf0d0bd7db3440ff1f5e70ff_icgraph.svg" width="100%" height="497"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a22a847d9945a845e136c9163f835adcd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::is_task_pool_published </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01062_source.html#l00550">550</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, and <a class="el" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool()</a>, <a class="el" href="a00302.html#ac223f7892d65e496c37190c4009ea1f7">cleanup_master()</a>, <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, <a class="el" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task()</a>, <a class="el" href="a00302.html#aad4a3aef975ca2516a81640654a65717">leave_task_pool()</a>, <a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn()</a>, <a class="el" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool()</a>, and <a class="el" href="a00302.html#a24dd9ef31d1f73ea2fadcc35df6d9d21">release_task_pool()</a>.</p>
<div class="fragment"><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                                             {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>, 0);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a> != <a class="code" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div><div class="ttc" id="a01062_html_a6f1c5fa8b2e50a1a91282165c7a9dae2"><div class="ttname"><a href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a></div><div class="ttdeci">#define EmptyTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00046">scheduler.h:46</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00062_html_a9096bfd9df29790ef46791385c5a8162"><div class="ttname"><a href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a></div><div class="ttdeci">task **__TBB_atomic task_pool</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00342">scheduler_common.h:342</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a22a847d9945a845e136c9163f835adcd_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a33519b4cf710f8c46129672f79fb6ec4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool tbb::internal::generic_scheduler::is_version_3_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01062_source.html#l00133">133</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#aad832dcce47939c2fd150a0e63a395ec">get_task()</a>, <a class="el" href="a00302.html#a8a62642cb4b1ba391b8d3b9a00dca541">prepare_for_spawning()</a>, and <a class="el" href="a00302.html#abb8f3f3967170ca9398e55b90220c3cb">steal_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                             {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#if __TBB_PREVIEW_CRITICAL_TASKS</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">return</span> (t.prefix().extra_state &amp; 0x7)&gt;=0x1;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">return</span> (t.prefix().extra_state &amp; 0x0F)&gt;=0x1;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a33519b4cf710f8c46129672f79fb6ec4_cgraph.svg" width="526" height="104"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a33519b4cf710f8c46129672f79fb6ec4_icgraph.svg" width="100%" height="453"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4451a0cd678c9d7f37c80d581e3d4b14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::is_worker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if running on a worker thread, false otherwise. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00595">595</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a00677.html#a03ff24546f54200460068dbb28e0374d">tbb::internal::scheduler_properties::worker</a>.</p>

<p>Referenced by <a class="el" href="a00489.html#a32eca56b49c13d239a2869c33c4a17b0">tbb::internal::market::cleanup()</a>, <a class="el" href="a00885.html#a04ee8eb618b1ee0e14568319e1ce608f">tbb::interface7::internal::wait_task::execute()</a>, <a class="el" href="a00302.html#afd799eae7903abc75b7a7aafd36e20db">init_stack_info()</a>, <a class="el" href="a00302.html#a7c98d05ea5c1e309b836335ea9af79fa">nested_arena_entry()</a>, <a class="el" href="a00302.html#ab80a47a82aea82a8ad418fbc36887ac9">nested_arena_exit()</a>, and <a class="el" href="a00307.html#a342eb43ff89d1b0da4cb9aa5417b3965">tbb::internal::governor::tls_value_of()</a>.</p>
<div class="fragment"><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                               {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">my_properties</a>.<a class="code" href="a00677.html#a19b3f21bd89adab6ce032d80e01aa195">type</a> == <a class="code" href="a00677.html#a03ff24546f54200460068dbb28e0374d">scheduler_properties::worker</a>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div><div class="ttc" id="a00678_html_aed181c52b8462c43272d45e625cd31fa"><div class="ttname"><a href="a00678.html#aed181c52b8462c43272d45e625cd31fa">tbb::internal::scheduler_state::my_properties</a></div><div class="ttdeci">scheduler_properties my_properties</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00095">scheduler.h:95</a></div></div>
<div class="ttc" id="a00677_html_a19b3f21bd89adab6ce032d80e01aa195"><div class="ttname"><a href="a00677.html#a19b3f21bd89adab6ce032d80e01aa195">tbb::internal::scheduler_properties::type</a></div><div class="ttdeci">bool type</div><div class="ttdoc">Indicates that a scheduler acts as a master or a worker. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00054">scheduler.h:54</a></div></div>
<div class="ttc" id="a00677_html_a03ff24546f54200460068dbb28e0374d"><div class="ttname"><a href="a00677.html#a03ff24546f54200460068dbb28e0374d">tbb::internal::scheduler_properties::worker</a></div><div class="ttdeci">static const bool worker</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00051">scheduler.h:51</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a4451a0cd678c9d7f37c80d581e3d4b14_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aad4a3aef975ca2516a81640654a65717"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::leave_task_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Leave the task pool. </p>
<p>Leaving task pool automatically releases the task pool if it is locked. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l01226">1226</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed()</a>, <a class="el" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>, <a class="el" href="a00302.html#a1b5b30c44c0a0a0d6fa6548fead0f879">is_quiescent_local_task_pool_empty()</a>, <a class="el" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published()</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a>, <a class="el" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, and <a class="el" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#ac223f7892d65e496c37190c4009ea1f7">cleanup_master()</a>, and <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                                               {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>(), <span class="stringliteral">&quot;Not in arena&quot;</span> );</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// Do not reset my_arena_index. It will be used to (attempt to) re-acquire the slot next time</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( &amp;<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#a388cbceb772b63b69ee84d775b210504">my_slots</a>[<a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a>] == <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>, <span class="stringliteral">&quot;arena slot and slot index mismatch&quot;</span> );</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a> == <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <span class="stringliteral">&quot;Task pool must be locked when leaving arena&quot;</span> );</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( <a class="code" href="a00302.html#a1b5b30c44c0a0a0d6fa6548fead0f879">is_quiescent_local_task_pool_empty</a>(), <span class="stringliteral">&quot;Cannot leave arena when the task pool is not empty&quot;</span> );</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(<a class="code" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, &amp;<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#a388cbceb772b63b69ee84d775b210504">my_slots</a>[<a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a>]);</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="comment">// No release fence is necessary here as this assignment precludes external</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="comment">// accesses to the local task pool when becomes visible. Thus it is harmless</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="comment">// if it gets hoisted above preceding local bookkeeping manipulations.</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a>, <a class="code" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a> );</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div><div class="ttc" id="a00302_html_a22a847d9945a845e136c9163f835adcd"><div class="ttname"><a href="a00302.html#a22a847d9945a845e136c9163f835adcd">tbb::internal::generic_scheduler::is_task_pool_published</a></div><div class="ttdeci">bool is_task_pool_published() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00550">scheduler.h:550</a></div></div>
<div class="ttc" id="a00678_html_a35aa72cfdda3b500e908925a3d6da747"><div class="ttname"><a href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a></div><div class="ttdeci">size_t my_arena_index</div><div class="ttdoc">Index of the arena slot the scheduler occupies now, or occupied last time. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00072">scheduler.h:72</a></div></div>
<div class="ttc" id="a00059_html_a388cbceb772b63b69ee84d775b210504"><div class="ttname"><a href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a></div><div class="ttdeci">arena_slot my_slots[1]</div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00300">arena.h:300</a></div></div>
<div class="ttc" id="a01016_html_ac5a347b47a5603a1f30f6fbf790724b7"><div class="ttname"><a href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p sync_releasing</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00093">ittnotify_static.h:93</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a01062_html_a6f1c5fa8b2e50a1a91282165c7a9dae2"><div class="ttname"><a href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a></div><div class="ttdeci">#define EmptyTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00046">scheduler.h:46</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a00302_html_a1b5b30c44c0a0a0d6fa6548fead0f879"><div class="ttname"><a href="a00302.html#a1b5b30c44c0a0a0d6fa6548fead0f879">tbb::internal::generic_scheduler::is_quiescent_local_task_pool_empty</a></div><div class="ttdeci">bool is_quiescent_local_task_pool_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00561">scheduler.h:561</a></div></div>
<div class="ttc" id="a01062_html_a096a309d24c5ac85036e8970880e5efd"><div class="ttname"><a href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a></div><div class="ttdeci">#define LockedTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00047">scheduler.h:47</a></div></div>
<div class="ttc" id="a01133_html_a1f6010c3e550e88ab739adbdee5dfdac"><div class="ttname"><a href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed</a></div><div class="ttdeci">void __TBB_store_relaxed(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00743">tbb_machine.h:743</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00062_html_a9096bfd9df29790ef46791385c5a8162"><div class="ttname"><a href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a></div><div class="ttdeci">task **__TBB_atomic task_pool</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00342">scheduler_common.h:342</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_aad4a3aef975ca2516a81640654a65717_cgraph.svg" width="599" height="212"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_aad4a3aef975ca2516a81640654a65717_icgraph.svg" width="100%" height="412"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae43166ffd9d7fb624158872394832f17"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::local_spawn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> *&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> *&amp;&#160;</td>
          <td class="paramname"><em>next</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Conceptually, this method should be a member of class scheduler. But doing so would force us to publish class scheduler in the headers. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00618">618</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a00059.html#adb8d121b4784a910d8d2861a7062446b">tbb::internal::arena::advertise_new_work()</a>, <a class="el" href="a00302.html#a08edecb9bd9ef648bada9fb5b1febeec">assert_task_pool_valid()</a>, <a class="el" href="a00302.html#a7f7d3a75d44d62525c8b31c32917d242">commit_spawned_tasks()</a>, <a class="el" href="a00250.html#a48d1c96d94c3dad0c130eaab3ac80049">tbb::internal::fast_reverse_vector&lt; T, max_segments &gt;::copy_memory()</a>, <a class="el" href="a01016.html#a30bf4ccd4623b7a8276bbc7f99e491c7">end</a>, <a class="el" href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">tbb::internal::governor::is_set()</a>, <a class="el" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published()</a>, <a class="el" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00302.html#a8a62642cb4b1ba391b8d3b9a00dca541">prepare_for_spawning()</a>, <a class="el" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool()</a>, <a class="el" href="a00302.html#af222cccbf09e91c9c9caaad81f8d993d">publish_task_pool()</a>, <a class="el" href="a00250.html#ae533cd1ab5be44deaa0ee7ad7ece6f4b">tbb::internal::fast_reverse_vector&lt; T, max_segments &gt;::push_back()</a>, <a class="el" href="a00250.html#aa8613832b1bd5dab7186d19ad6d6e751">tbb::internal::fast_reverse_vector&lt; T, max_segments &gt;::size()</a>, <a class="el" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a>, and <a class="el" href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeea2109ea81736367212fa797959b4b4381">tbb::internal::arena::work_spawned</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a9dacb8fead5795de1011018b83d68d61">local_spawn_root_and_wait()</a>, <a class="el" href="a00302.html#a4d51eca32dc45cba3e0ec161240bfaca">spawn()</a>, and <a class="el" href="a00778.html#aa4b70779d4c99558dda8f8a97db9520e">tbb::task::spawn_and_wait_for_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                                              {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>, NULL );</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">governor::is_set</a>(<span class="keyword">this</span>), NULL );</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="preprocessor">#if __TBB_TODO</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// We need to consider capping the max task pool size and switching</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="comment">// to in-place task execution whenever it is reached.</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">if</span> ( &amp;<a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>-&gt;prefix().next == &amp;next ) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="comment">// Single task is being spawned</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="preprocessor">#if __TBB_TODO</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="comment">// TODO:</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="comment">// In the future we need to add overloaded spawn method for a single task,</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="comment">// and a method accepting an array of task pointers (we may also want to</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="comment">// change the implementation of the task_list class). But since such changes</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="comment">// may affect the binary compatibility, we postpone them for a while.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="preprocessor">#if __TBB_PREVIEW_CRITICAL_TASKS</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">if</span>( !handled_as_critical( *<a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a> ) )</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;#endif</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordtype">size_t</span> T = <a class="code" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool</a>( 1 );</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>[T] = <a class="code" href="a00302.html#a8a62642cb4b1ba391b8d3b9a00dca541">prepare_for_spawning</a>( <a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a> );</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <a class="code" href="a00302.html#a7f7d3a75d44d62525c8b31c32917d242">commit_spawned_tasks</a>( T + 1 );</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">if</span> ( !<a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>() )</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <a class="code" href="a00302.html#af222cccbf09e91c9c9caaad81f8d993d">publish_task_pool</a>();</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="comment">// Task list is being spawned</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="preprocessor">#if __TBB_TODO</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="comment">// TODO: add task_list::front() and implement&amp;document the local execution ordering which is</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="comment">// opposite to the current implementation. The idea is to remove hackish fast_reverse_vector</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="comment">// and use push_back/push_front when accordingly LIFO and FIFO order of local execution is</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="comment">// desired. It also requires refactoring of the reload_tasks method and my_offloaded_tasks list.</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="comment">// Additional benefit may come from adding counter to the task_list so that it can reserve enough</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="comment">// space in the task pool in advance and move all the tasks directly without any intermediate</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="comment">// storages. But it requires dealing with backward compatibility issues and still supporting</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="comment">// counter-less variant (though not necessarily fast implementation).</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> *arr[<a class="code" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a>];</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        fast_reverse_vector&lt;task*&gt; tasks(arr, <a class="code" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a>);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> *t_next = NULL;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* t = <a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>; ; t = t_next ) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="comment">// If t is affinitized to another thread, it may already be executed</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="comment">// and destroyed by the time prepare_for_spawning returns.</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <span class="comment">// So milk it while it is alive.</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <span class="keywordtype">bool</span> <a class="code" href="a01016.html#a30bf4ccd4623b7a8276bbc7f99e491c7">end</a> = &amp;t-&gt;prefix().next == &amp;next;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            t_next = t-&gt;prefix().next;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="preprocessor">#if __TBB_PREVIEW_CRITICAL_TASKS</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">if</span>( !handled_as_critical( *t ) )</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                tasks.push_back( <a class="code" href="a00302.html#a8a62642cb4b1ba391b8d3b9a00dca541">prepare_for_spawning</a>(t) );</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="keywordflow">if</span>( end )</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        }</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <span class="keywordflow">if</span>( <span class="keywordtype">size_t</span> num_tasks = tasks.size() ) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <span class="keywordtype">size_t</span> T = <a class="code" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool</a>( num_tasks );</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            tasks.copy_memory( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a> + T );</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <a class="code" href="a00302.html#a7f7d3a75d44d62525c8b31c32917d242">commit_spawned_tasks</a>( T + num_tasks );</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="keywordflow">if</span> ( !<a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>() )</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <a class="code" href="a00302.html#af222cccbf09e91c9c9caaad81f8d993d">publish_task_pool</a>();</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#adb8d121b4784a910d8d2861a7062446b">advertise_new_work</a>&lt;<a class="code" href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeea2109ea81736367212fa797959b4b4381">arena::work_spawned</a>&gt;();</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <a class="code" href="a00302.html#a08edecb9bd9ef648bada9fb5b1febeec">assert_task_pool_valid</a>();</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div><div class="ttc" id="a00302_html_a22a847d9945a845e136c9163f835adcd"><div class="ttname"><a href="a00302.html#a22a847d9945a845e136c9163f835adcd">tbb::internal::generic_scheduler::is_task_pool_published</a></div><div class="ttdeci">bool is_task_pool_published() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00550">scheduler.h:550</a></div></div>
<div class="ttc" id="a00302_html_a1190ee0529a9280846bd50c4f50c8398"><div class="ttname"><a href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">tbb::internal::generic_scheduler::min_task_pool_size</a></div><div class="ttdeci">static const size_t min_task_pool_size</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00294">scheduler.h:294</a></div></div>
<div class="ttc" id="a00307_html_a14d4453f34a770b1c983c2ed38570e31"><div class="ttname"><a href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">tbb::internal::governor::is_set</a></div><div class="ttdeci">static bool is_set(generic_scheduler *s)</div><div class="ttdoc">Used to check validity of the local scheduler TLS contents. </div><div class="ttdef"><b>Definition:</b> <a href="a01004_source.html#l00124">governor.cpp:124</a></div></div>
<div class="ttc" id="a00302_html_a0460616fb84af745b12688927ff1bb7d"><div class="ttname"><a href="a00302.html#a0460616fb84af745b12688927ff1bb7d">tbb::internal::generic_scheduler::prepare_task_pool</a></div><div class="ttdeci">size_t prepare_task_pool(size_t n)</div><div class="ttdoc">Makes sure that the task pool can accommodate at least n more elements. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00406">scheduler.cpp:406</a></div></div>
<div class="ttc" id="a00302_html_a7f7d3a75d44d62525c8b31c32917d242"><div class="ttname"><a href="a00302.html#a7f7d3a75d44d62525c8b31c32917d242">tbb::internal::generic_scheduler::commit_spawned_tasks</a></div><div class="ttdeci">void commit_spawned_tasks(size_t new_tail)</div><div class="ttdoc">Makes newly spawned tasks visible to thieves. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00632">scheduler.h:632</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a00302_html_a8a62642cb4b1ba391b8d3b9a00dca541"><div class="ttname"><a href="a00302.html#a8a62642cb4b1ba391b8d3b9a00dca541">tbb::internal::generic_scheduler::prepare_for_spawning</a></div><div class="ttdeci">task * prepare_for_spawning(task *t)</div><div class="ttdoc">Checks if t is affinitized to another thread, and if so, bundles it as proxy. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00562">scheduler.cpp:562</a></div></div>
<div class="ttc" id="a00302_html_a08edecb9bd9ef648bada9fb5b1febeec"><div class="ttname"><a href="a00302.html#a08edecb9bd9ef648bada9fb5b1febeec">tbb::internal::generic_scheduler::assert_task_pool_valid</a></div><div class="ttdeci">void assert_task_pool_valid() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00323">scheduler.h:323</a></div></div>
<div class="ttc" id="a01016_html_a30bf4ccd4623b7a8276bbc7f99e491c7"><div class="ttname"><a href="a01016.html#a30bf4ccd4623b7a8276bbc7f99e491c7">end</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void ITT_FORMAT p void ITT_FORMAT p void size_t ITT_FORMAT d void ITT_FORMAT p const wchar_t ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s no args void ITT_FORMAT p size_t ITT_FORMAT d no args const wchar_t const wchar_t ITT_FORMAT s __itt_heap_function void size_t int ITT_FORMAT d __itt_heap_function void ITT_FORMAT p __itt_heap_function void void size_t int ITT_FORMAT d no args no args unsigned int ITT_FORMAT u const __itt_domain __itt_id ITT_FORMAT lu const __itt_domain __itt_id __itt_id __itt_string_handle ITT_FORMAT p const __itt_domain __itt_id ITT_FORMAT p const __itt_domain __itt_id __itt_timestamp __itt_timestamp end</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00171">ittnotify_static.h:171</a></div></div>
<div class="ttc" id="a00302_html_af222cccbf09e91c9c9caaad81f8d993d"><div class="ttname"><a href="a00302.html#af222cccbf09e91c9c9caaad81f8d993d">tbb::internal::generic_scheduler::publish_task_pool</a></div><div class="ttdeci">void publish_task_pool()</div><div class="ttdoc">Used by workers to enter the task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l01214">scheduler.cpp:1214</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00063_html_acaf81236f1e1c743b3a1be8b03505a30"><div class="ttname"><a href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a></div><div class="ttdeci">task **__TBB_atomic task_pool_ptr</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00367">scheduler_common.h:367</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00059_html_adb8d121b4784a910d8d2861a7062446b"><div class="ttname"><a href="a00059.html#adb8d121b4784a910d8d2861a7062446b">tbb::internal::arena::advertise_new_work</a></div><div class="ttdeci">void advertise_new_work()</div><div class="ttdoc">If necessary, raise a flag that there is new job in arena. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00393">arena.h:393</a></div></div>
<div class="ttc" id="a01133_html_acf23419eb6d3adac787a4fee78cb3c27"><div class="ttname"><a href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">tbb::internal::first</a></div><div class="ttdeci">auto first(Container &amp;c) -&gt; decltype(begin(c))</div><div class="ttdef"><b>Definition:</b> <a href="a00953_source.html#l00038">_range_iterator.h:38</a></div></div>
<div class="ttc" id="a00059_html_a2380e7751924d1199ffab7b2ee29ddeea2109ea81736367212fa797959b4b4381"><div class="ttname"><a href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeea2109ea81736367212fa797959b4b4381">tbb::internal::arena::work_spawned</a></div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00188">arena.h:188</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_ae43166ffd9d7fb624158872394832f17_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_ae43166ffd9d7fb624158872394832f17_icgraph.svg" width="598" height="198"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9dacb8fead5795de1011018b83d68d61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::local_spawn_root_and_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> *&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> *&amp;&#160;</td>
          <td class="paramname"><em>next</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01061_source.html#l00685">685</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a>, <a class="el" href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">tbb::internal::governor::is_set()</a>, <a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn()</a>, <a class="el" href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">local_wait_for_all()</a>, <a class="el" href="a00098.html#ae85fb42cc6116169fcf448eb36333226">tbb::internal::auto_empty_task::prefix()</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, and <a class="el" href="a00789.html#aaaf2f12ee06495a26f5e03bf74c43d89">tbb::internal::task_prefix::ref_count</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a6e0b5fdf74860259585e55f7bf2edb8e">spawn_root_and_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                                                                            {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">governor::is_set</a>(<span class="keyword">this</span>), NULL );</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>, NULL );</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    auto_empty_task dummy( <a class="code" href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a>(<span class="keyword">this</span>, <a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>-&gt;prefix().context) );</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="a01133.html#a2c581fb16c2799f2d2b547dec0ff90be">internal::reference_count</a> n = 0;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* t=<a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>; ; t=t-&gt;prefix().next ) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        ++n;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !t-&gt;prefix().parent, <span class="stringliteral">&quot;not a root task, or already running&quot;</span> );</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        t-&gt;prefix().parent = &amp;dummy;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">if</span>( &amp;t-&gt;prefix().next==&amp;next ) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="preprocessor">#if __TBB_TASK_GROUP_CONTEXT</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( t-&gt;prefix().context == t-&gt;prefix().next-&gt;prefix().context,</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                    <span class="stringliteral">&quot;all the root tasks in list must share the same context&quot;</span>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_GROUP_CONTEXT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    dummy.prefix().ref_count = n+1;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">if</span>( n&gt;1 )</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <a class="code" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn</a>( <a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>-&gt;prefix().next, next );</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">local_wait_for_all</a>( dummy, <a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a> );</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}</div><div class="ttc" id="a00307_html_a14d4453f34a770b1c983c2ed38570e31"><div class="ttname"><a href="a00307.html#a14d4453f34a770b1c983c2ed38570e31">tbb::internal::governor::is_set</a></div><div class="ttdeci">static bool is_set(generic_scheduler *s)</div><div class="ttdoc">Used to check validity of the local scheduler TLS contents. </div><div class="ttdef"><b>Definition:</b> <a href="a01004_source.html#l00124">governor.cpp:124</a></div></div>
<div class="ttc" id="a01133_html_a2c581fb16c2799f2d2b547dec0ff90be"><div class="ttname"><a href="a01133.html#a2c581fb16c2799f2d2b547dec0ff90be">tbb::internal::reference_count</a></div><div class="ttdeci">intptr_t reference_count</div><div class="ttdoc">A reference count. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00121">task.h:121</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00302_html_ae43166ffd9d7fb624158872394832f17"><div class="ttname"><a href="a00302.html#ae43166ffd9d7fb624158872394832f17">tbb::internal::generic_scheduler::local_spawn</a></div><div class="ttdeci">void local_spawn(task *first, task *&amp;next)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00618">scheduler.cpp:618</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a01133_html_acf23419eb6d3adac787a4fee78cb3c27"><div class="ttname"><a href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">tbb::internal::first</a></div><div class="ttdeci">auto first(Container &amp;c) -&gt; decltype(begin(c))</div><div class="ttdef"><b>Definition:</b> <a href="a00953_source.html#l00038">_range_iterator.h:38</a></div></div>
<div class="ttc" id="a00302_html_a509997dbb9b97ad2cca0a3af76c04e90"><div class="ttname"><a href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">tbb::internal::generic_scheduler::local_wait_for_all</a></div><div class="ttdeci">virtual void local_wait_for_all(task &amp;parent, task *child)=0</div></div>
<div class="ttc" id="a01063_html_a0ef18fbe7aa93b76fd4136a153bc2e44"><div class="ttname"><a href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a></div><div class="ttdeci">#define __TBB_CONTEXT_ARG(arg1, context)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00064">scheduler_common.h:64</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a9dacb8fead5795de1011018b83d68d61_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a9dacb8fead5795de1011018b83d68d61_icgraph.svg" width="384" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a509997dbb9b97ad2cca0a3af76c04e90"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::local_wait_for_all </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> &amp;&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> *&#160;</td>
          <td class="paramname"><em>child</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="a00194.html#a5e2c5878baf724264214e91070844487">tbb::internal::custom_scheduler&lt; SchedulerTraits &gt;</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#ac223f7892d65e496c37190c4009ea1f7">cleanup_master()</a>, <a class="el" href="a00885.html#a04ee8eb618b1ee0e14568319e1ce608f">tbb::interface7::internal::wait_task::execute()</a>, <a class="el" href="a00780.html#aa214b4121b92399cfa50b223500219fd">tbb::interface7::internal::task_arena_base::internal_execute()</a>, <a class="el" href="a00302.html#a9dacb8fead5795de1011018b83d68d61">local_spawn_root_and_wait()</a>, <a class="el" href="a00059.html#aff17fc29650655b080b795be34179d20">tbb::internal::arena::process()</a>, <a class="el" href="a00778.html#aa4b70779d4c99558dda8f8a97db9520e">tbb::task::spawn_and_wait_for_all()</a>, and <a class="el" href="a00302.html#a2a0f285acb9cfb21b7df95a386bd6860">wait_until_empty()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a509997dbb9b97ad2cca0a3af76c04e90_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a28bc27fa6c9a0cea424ced83b9f020ac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a> ** tbb::internal::generic_scheduler::lock_task_pool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00061.html">arena_slot</a> *&#160;</td>
          <td class="paramname"><em>victim_arena_slot</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locks victim's task pool, and returns pointer to it. The pointer can be NULL. </p>
<p>Garbles victim_arena_slot-&gt;task_pool for the duration of the lock.</p>
<p>ATTENTION: This method is mostly the same as <a class="el" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59" title="Locks the local task pool. ">generic_scheduler::acquire_task_pool()</a>, with a little different logic of slot state checks (slot can be empty, locked or point to any task pool other than ours, and asynchronous transitions between all these states are possible). Thus if any of them is changed, consider changing the counterpart as well </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00504">504</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01006.html#a2b17e6e4504bddf60a920f609fc46ea6">__TBB_Yield</a>, <a class="el" href="a01133.html#ad83994557e481148b704625b46dece25">tbb::internal::as_atomic()</a>, <a class="el" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>, <a class="el" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00060.html#a0184ffea730d663e63f0f60946422da2">tbb::internal::arena_base::my_limit</a>, <a class="el" href="a01016.html#a209ab745dc4b55d55acb64a82cb8c9b6">sync_cancel</a>, and <a class="el" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a15b506cb1b1da8e37255fc2fcdf250f0">steal_task_from()</a>.</p>
<div class="fragment"><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                                                                     {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>** victim_task_pool;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordtype">bool</span> sync_prepare_done = <span class="keyword">false</span>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">for</span>( atomic_backoff backoff;; <span class="comment">/*backoff pause embedded in the loop*/</span>) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        victim_task_pool = victim_arena_slot-&gt;task_pool;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="comment">// NOTE: Do not use comparison of head and tail indices to check for</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="comment">// the presence of work in the victim&#39;s task pool, as they may give</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="comment">// incorrect indication because of task pool relocations and resizes.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">if</span> ( victim_task_pool == <a class="code" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a> ) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="comment">// The victim thread emptied its task pool - nothing to lock</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">if</span>( sync_prepare_done )</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(<a class="code" href="a01016.html#a209ab745dc4b55d55acb64a82cb8c9b6">sync_cancel</a>, victim_arena_slot);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">if</span>( victim_task_pool != <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a> &amp;&amp;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <a class="code" href="a01133.html#ad83994557e481148b704625b46dece25">as_atomic</a>(victim_arena_slot-&gt;task_pool).compare_and_swap(<a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, victim_task_pool ) == victim_task_pool )</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <span class="comment">// We&#39;ve locked victim&#39;s task pool</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(sync_acquired, victim_arena_slot);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !sync_prepare_done ) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="comment">// Start waiting</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(sync_prepare, victim_arena_slot);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            sync_prepare_done = <span class="keyword">true</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>( ++my_counters.thieves_conflicts );</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="comment">// Someone else acquired a lock, so pause and do exponential backoff.</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="preprocessor">#if __TBB_STEALING_ABORT_ON_CONTENTION</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">if</span>(!backoff.bounded_pause()) {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="comment">// the 16 was acquired empirically and a theory behind it supposes</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <span class="comment">// that number of threads becomes much bigger than number of</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="comment">// tasks which can be spawned by one thread causing excessive contention.</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="comment">// TODO: However even small arenas can benefit from the abort on contention</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="comment">//       if preemption of a thief is a problem</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00060.html#a0184ffea730d663e63f0f60946422da2">my_limit</a> &gt;= 16)</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <a class="code" href="a01006.html#a2b17e6e4504bddf60a920f609fc46ea6">__TBB_Yield</a>();</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        backoff.pause();</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( victim_task_pool == <a class="code" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a> ||</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                  (victim_arena_slot-&gt;task_pool == <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a> &amp;&amp; victim_task_pool != <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>),</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                  <span class="stringliteral">&quot;not really locked victim&#39;s task pool?&quot;</span> );</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">return</span> victim_task_pool;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;} <span class="comment">// generic_scheduler::lock_task_pool</span></div><div class="ttc" id="a00060_html_a0184ffea730d663e63f0f60946422da2"><div class="ttname"><a href="a00060.html#a0184ffea730d663e63f0f60946422da2">tbb::internal::arena_base::my_limit</a></div><div class="ttdeci">atomic&lt; unsigned &gt; my_limit</div><div class="ttdoc">The maximal number of currently busy slots. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00069">arena.h:69</a></div></div>
<div class="ttc" id="a01016_html_a209ab745dc4b55d55acb64a82cb8c9b6"><div class="ttname"><a href="a01016.html#a209ab745dc4b55d55acb64a82cb8c9b6">sync_cancel</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p sync_cancel</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00091">ittnotify_static.h:91</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a01097_html_a08f1e46bb511c63da3ce07aa9c897bc4"><div class="ttname"><a href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a></div><div class="ttdeci">#define GATHER_STATISTIC(x)</div><div class="ttdef"><b>Definition:</b> <a href="a01097_source.html#l00236">tbb_statistics.h:236</a></div></div>
<div class="ttc" id="a01133_html_ad83994557e481148b704625b46dece25"><div class="ttname"><a href="a01133.html#ad83994557e481148b704625b46dece25">tbb::internal::as_atomic</a></div><div class="ttdeci">atomic&lt; T &gt; &amp; as_atomic(T &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="a00965_source.html#l00547">atomic.h:547</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a01062_html_a6f1c5fa8b2e50a1a91282165c7a9dae2"><div class="ttname"><a href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a></div><div class="ttdeci">#define EmptyTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00046">scheduler.h:46</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a01062_html_a096a309d24c5ac85036e8970880e5efd"><div class="ttname"><a href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a></div><div class="ttdeci">#define LockedTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00047">scheduler.h:47</a></div></div>
<div class="ttc" id="a01006_html_a2b17e6e4504bddf60a920f609fc46ea6"><div class="ttname"><a href="a01006.html#a2b17e6e4504bddf60a920f609fc46ea6">__TBB_Yield</a></div><div class="ttdeci">#define __TBB_Yield()</div><div class="ttdef"><b>Definition:</b> <a href="a01006_source.html#l00048">ibm_aix51.h:48</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a28bc27fa6c9a0cea424ced83b9f020ac_cgraph.svg" width="398" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a28bc27fa6c9a0cea424ced83b9f020ac_icgraph.svg" width="627" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a84fe7450cc14ca226340cf8bffd379c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::master_outermost_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if the scheduler is on the outermost dispatch level in a master thread. </p>
<p>Returns true when this scheduler instance is associated with an application thread, and is not executing any TBB task. This includes being in a TBB dispatch loop (one of wait_for_all methods) invoked directly from that thread. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00575">575</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00791.html#a2647279bff44f88c82eead707d4c7a14">tbb::task_scheduler_init::internal_terminate()</a>, and <a class="el" href="a00780.html#ac2e8d6966eaf2b8c898bc6aa65149193">tbb::interface7::internal::task_arena_base::internal_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                                             {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">is_worker</a>() &amp;&amp; <a class="code" href="a00302.html#a8bd4da1524fbd5b79bb84f0631c2b6e0">outermost_level</a>();</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div><div class="ttc" id="a00302_html_a8bd4da1524fbd5b79bb84f0631c2b6e0"><div class="ttname"><a href="a00302.html#a8bd4da1524fbd5b79bb84f0631c2b6e0">tbb::internal::generic_scheduler::outermost_level</a></div><div class="ttdeci">bool outermost_level() const </div><div class="ttdoc">True if the scheduler is on the outermost dispatch level. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00571">scheduler.h:571</a></div></div>
<div class="ttc" id="a00302_html_a4451a0cd678c9d7f37c80d581e3d4b14"><div class="ttname"><a href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">tbb::internal::generic_scheduler::is_worker</a></div><div class="ttdeci">bool is_worker() const </div><div class="ttdoc">True if running on a worker thread, false otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00595">scheduler.h:595</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a84fe7450cc14ca226340cf8bffd379c7_icgraph.svg" width="502" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="af2b38fa415abd3f28025e96e5d27995a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned tbb::internal::generic_scheduler::max_threads_in_arena </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the concurrency limit of the current arena. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00599">599</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>.</p>

<p>Referenced by <a class="el" href="a01133.html#a6f99c98aa3bb8bb6af298e592ab0c7a3">tbb::internal::get_initial_auto_partitioner_divisor()</a>, and <a class="el" href="a00031.html#a8589dd1e98a5968cac2e170fcc175ca3">tbb::internal::affinity_partitioner_base_v3::resize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                                        {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>(<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>, NULL);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00060.html#a7770213e3c679d92756b791cccb84e35">my_num_slots</a>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div><div class="ttc" id="a00060_html_a7770213e3c679d92756b791cccb84e35"><div class="ttname"><a href="a00060.html#a7770213e3c679d92756b791cccb84e35">tbb::internal::arena_base::my_num_slots</a></div><div class="ttdeci">unsigned my_num_slots</div><div class="ttdoc">The number of slots in the arena. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00153">arena.h:153</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_af2b38fa415abd3f28025e96e5d27995a_icgraph.svg" width="584" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7c98d05ea5c1e309b836335ea9af79fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::nested_arena_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00059.html">arena</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>slot_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00963_source.html#l00679">679</a> of file <a class="el" href="a00963_source.html">arena.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a00489.html#a2147b4639190ad49551f617784dc012b">tbb::internal::market::adjust_demand()</a>, <a class="el" href="a00307.html#abe1de8df4e3ecce96763951ac97540c6">tbb::internal::governor::assume_scheduler()</a>, <a class="el" href="a00302.html#aa101d77dc7a5e986270073e1c0e09cf6">attach_arena()</a>, <a class="el" href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">is_worker()</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00060.html#a9571049272687e3f4d113809f0a62080">tbb::internal::arena_base::my_market</a>, and <a class="el" href="a00060.html#a206a08226cb9da9d777fd433789ff933">tbb::internal::arena_base::my_num_reserved_slots</a>.</p>

<p>Referenced by <a class="el" href="a00514.html#a836d39a027baf51a4ff995cc44adee05">tbb::internal::nested_arena_context::nested_arena_context()</a>.</p>
<div class="fragment"><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                                                      {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( is_alive(a-&gt;my_guard), NULL );</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( a!=<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>, NULL);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">// overwrite arena settings</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="preprocessor">#if __TBB_TASK_PRIORITY</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span> ( my_offloaded_tasks )</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;orphan_offloaded_tasks( *<span class="keyword">this</span> );</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    my_offloaded_tasks = NULL;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_PRIORITY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="a00302.html#aa101d77dc7a5e986270073e1c0e09cf6">attach_arena</a>( a, slot_index, <span class="comment">/*is_master*/</span><span class="keyword">true</span> );</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a> == a, NULL );</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="a00307.html#abe1de8df4e3ecce96763951ac97540c6">governor::assume_scheduler</a>( <span class="keyword">this</span> );</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">// TODO? ITT_NOTIFY(sync_acquired, a-&gt;my_slots + index);</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="comment">// TODO: it requires market to have P workers (not P-1)</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">// TODO: a preempted worker should be excluded from assignment to other arenas e.g. my_slack--</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">is_worker</a>() &amp;&amp; slot_index &gt;= <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00060.html#a206a08226cb9da9d777fd433789ff933">my_num_reserved_slots</a> )</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00060.html#a9571049272687e3f4d113809f0a62080">my_market</a>-&gt;<a class="code" href="a00489.html#a2147b4639190ad49551f617784dc012b">adjust_demand</a>(*<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>, -1);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="preprocessor">#if __TBB_ARENA_OBSERVER</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    my_last_local_observer = 0; <span class="comment">// TODO: try optimize number of calls</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;my_observers.notify_entry_observers( my_last_local_observer, <span class="comment">/*worker=*/</span><span class="keyword">false</span> );</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div><div class="ttc" id="a00307_html_abe1de8df4e3ecce96763951ac97540c6"><div class="ttname"><a href="a00307.html#abe1de8df4e3ecce96763951ac97540c6">tbb::internal::governor::assume_scheduler</a></div><div class="ttdeci">static void assume_scheduler(generic_scheduler *s)</div><div class="ttdoc">Temporarily set TLS slot to the given scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01004_source.html#l00120">governor.cpp:120</a></div></div>
<div class="ttc" id="a00060_html_a206a08226cb9da9d777fd433789ff933"><div class="ttname"><a href="a00060.html#a206a08226cb9da9d777fd433789ff933">tbb::internal::arena_base::my_num_reserved_slots</a></div><div class="ttdeci">unsigned my_num_reserved_slots</div><div class="ttdoc">The number of reserved slots (can be occupied only by masters). </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00156">arena.h:156</a></div></div>
<div class="ttc" id="a00302_html_a4451a0cd678c9d7f37c80d581e3d4b14"><div class="ttname"><a href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">tbb::internal::generic_scheduler::is_worker</a></div><div class="ttdeci">bool is_worker() const </div><div class="ttdoc">True if running on a worker thread, false otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00595">scheduler.h:595</a></div></div>
<div class="ttc" id="a00060_html_a9571049272687e3f4d113809f0a62080"><div class="ttname"><a href="a00060.html#a9571049272687e3f4d113809f0a62080">tbb::internal::arena_base::my_market</a></div><div class="ttdeci">market * my_market</div><div class="ttdoc">The market that owns this arena. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00135">arena.h:135</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a00489_html_a2147b4639190ad49551f617784dc012b"><div class="ttname"><a href="a00489.html#a2147b4639190ad49551f617784dc012b">tbb::internal::market::adjust_demand</a></div><div class="ttdeci">void adjust_demand(arena &amp;, int delta)</div><div class="ttdoc">Request that arena&amp;#39;s need in workers should be adjusted. </div><div class="ttdef"><b>Definition:</b> <a href="a01025_source.html#l00590">market.cpp:590</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00302_html_aa101d77dc7a5e986270073e1c0e09cf6"><div class="ttname"><a href="a00302.html#aa101d77dc7a5e986270073e1c0e09cf6">tbb::internal::generic_scheduler::attach_arena</a></div><div class="ttdeci">void attach_arena(arena *, size_t index, bool is_master)</div><div class="ttdef"><b>Definition:</b> <a href="a00963_source.html#l00040">arena.cpp:40</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a7c98d05ea5c1e309b836335ea9af79fa_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a7c98d05ea5c1e309b836335ea9af79fa_icgraph.svg" width="424" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab80a47a82aea82a8ad418fbc36887ac9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::nested_arena_exit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00963_source.html#l00703">703</a> of file <a class="el" href="a00963_source.html">arena.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release()</a>, <a class="el" href="a00489.html#a2147b4639190ad49551f617784dc012b">tbb::internal::market::adjust_demand()</a>, <a class="el" href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">is_worker()</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a>, <a class="el" href="a00060.html#a3877c52df25164ba94f721a5661738b1">tbb::internal::arena_base::my_exit_monitors</a>, <a class="el" href="a00060.html#a9571049272687e3f4d113809f0a62080">tbb::internal::arena_base::my_market</a>, <a class="el" href="a00060.html#a206a08226cb9da9d777fd433789ff933">tbb::internal::arena_base::my_num_reserved_slots</a>, <a class="el" href="a00062.html#a988ed3221b0b40efb97849a53b168e79">tbb::internal::arena_slot_line1::my_scheduler</a>, <a class="el" href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a>, and <a class="el" href="a00145.html#a2ef33e449ee8ede1d9413f4a814ee9cf">tbb::internal::concurrent_monitor::notify_one()</a>.</p>
<div class="fragment"><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                          {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="preprocessor">#if __TBB_ARENA_OBSERVER</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;my_observers.notify_exit_observers( my_last_local_observer, <span class="comment">/*worker=*/</span><span class="keyword">false</span> );</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_ARENA_OBSERVER */</span><span class="preprocessor"></span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="preprocessor">#if __TBB_TASK_PRIORITY</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">if</span> ( my_offloaded_tasks )</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;orphan_offloaded_tasks( *<span class="keyword">this</span> );</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">is_worker</a>() &amp;&amp; <a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a> &gt;= <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00060.html#a206a08226cb9da9d777fd433789ff933">my_num_reserved_slots</a> )</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00060.html#a9571049272687e3f4d113809f0a62080">my_market</a>-&gt;<a class="code" href="a00489.html#a2147b4639190ad49551f617784dc012b">adjust_demand</a>(*<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>, 1);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">// Free the master slot.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>(<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#a388cbceb772b63b69ee84d775b210504">my_slots</a>[<a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a>].<a class="code" href="a00062.html#a988ed3221b0b40efb97849a53b168e79">my_scheduler</a>, <span class="stringliteral">&quot;A slot is already empty&quot;</span>);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">__TBB_store_with_release</a>(<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#a388cbceb772b63b69ee84d775b210504">my_slots</a>[<a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a>].<a class="code" href="a00062.html#a988ed3221b0b40efb97849a53b168e79">my_scheduler</a>, (<a class="code" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler</a>*)NULL);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00060.html#a3877c52df25164ba94f721a5661738b1">my_exit_monitors</a>.<a class="code" href="a00145.html#a2ef33e449ee8ede1d9413f4a814ee9cf">notify_one</a>(); <span class="comment">// do not relax!</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div><div class="ttc" id="a00678_html_a35aa72cfdda3b500e908925a3d6da747"><div class="ttname"><a href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a></div><div class="ttdeci">size_t my_arena_index</div><div class="ttdoc">Index of the arena slot the scheduler occupies now, or occupied last time. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00072">scheduler.h:72</a></div></div>
<div class="ttc" id="a00059_html_a388cbceb772b63b69ee84d775b210504"><div class="ttname"><a href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a></div><div class="ttdeci">arena_slot my_slots[1]</div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00300">arena.h:300</a></div></div>
<div class="ttc" id="a00060_html_a206a08226cb9da9d777fd433789ff933"><div class="ttname"><a href="a00060.html#a206a08226cb9da9d777fd433789ff933">tbb::internal::arena_base::my_num_reserved_slots</a></div><div class="ttdeci">unsigned my_num_reserved_slots</div><div class="ttdoc">The number of reserved slots (can be occupied only by masters). </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00156">arena.h:156</a></div></div>
<div class="ttc" id="a00302_html_a4451a0cd678c9d7f37c80d581e3d4b14"><div class="ttname"><a href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">tbb::internal::generic_scheduler::is_worker</a></div><div class="ttdeci">bool is_worker() const </div><div class="ttdoc">True if running on a worker thread, false otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00595">scheduler.h:595</a></div></div>
<div class="ttc" id="a00302_html_ad7c11742ee005f6d377095062b42a5d8"><div class="ttname"><a href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">tbb::internal::generic_scheduler::generic_scheduler</a></div><div class="ttdeci">generic_scheduler(market &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00088">scheduler.cpp:88</a></div></div>
<div class="ttc" id="a00060_html_a9571049272687e3f4d113809f0a62080"><div class="ttname"><a href="a00060.html#a9571049272687e3f4d113809f0a62080">tbb::internal::arena_base::my_market</a></div><div class="ttdeci">market * my_market</div><div class="ttdoc">The market that owns this arena. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00135">arena.h:135</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a01133_html_aea57866db2fc3fe1018c89b58109b39a"><div class="ttname"><a href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release</a></div><div class="ttdeci">void __TBB_store_with_release(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00717">tbb_machine.h:717</a></div></div>
<div class="ttc" id="a00062_html_a988ed3221b0b40efb97849a53b168e79"><div class="ttname"><a href="a00062.html#a988ed3221b0b40efb97849a53b168e79">tbb::internal::arena_slot_line1::my_scheduler</a></div><div class="ttdeci">generic_scheduler * my_scheduler</div><div class="ttdoc">Scheduler of the thread attached to the slot. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00336">scheduler_common.h:336</a></div></div>
<div class="ttc" id="a00060_html_a3877c52df25164ba94f721a5661738b1"><div class="ttname"><a href="a00060.html#a3877c52df25164ba94f721a5661738b1">tbb::internal::arena_base::my_exit_monitors</a></div><div class="ttdeci">concurrent_monitor my_exit_monitors</div><div class="ttdoc">Waiting object for master threads that cannot join the arena. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00171">arena.h:171</a></div></div>
<div class="ttc" id="a00489_html_a2147b4639190ad49551f617784dc012b"><div class="ttname"><a href="a00489.html#a2147b4639190ad49551f617784dc012b">tbb::internal::market::adjust_demand</a></div><div class="ttdeci">void adjust_demand(arena &amp;, int delta)</div><div class="ttdoc">Request that arena&amp;#39;s need in workers should be adjusted. </div><div class="ttdef"><b>Definition:</b> <a href="a01025_source.html#l00590">market.cpp:590</a></div></div>
<div class="ttc" id="a00145_html_a2ef33e449ee8ede1d9413f4a814ee9cf"><div class="ttname"><a href="a00145.html#a2ef33e449ee8ede1d9413f4a814ee9cf">tbb::internal::concurrent_monitor::notify_one</a></div><div class="ttdeci">void notify_one()</div><div class="ttdoc">Notify one thread about the event. </div><div class="ttdef"><b>Definition:</b> <a href="a00979_source.html#l00161">concurrent_monitor.h:161</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_ab80a47a82aea82a8ad418fbc36887ac9_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8bd4da1524fbd5b79bb84f0631c2b6e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::outermost_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if the scheduler is on the outermost dispatch level. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00571">571</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00206.html#a84535e5245a983907d49a04ea0016f6c">tbb::interface7::internal::delegated_task::execute()</a>, and <a class="el" href="a00885.html#a04ee8eb618b1ee0e14568319e1ce608f">tbb::interface7::internal::wait_task::execute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                                      {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">my_properties</a>.<a class="code" href="a00677.html#ae27d95827090e04db3f184bb4b1369fd">outermost</a>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="ttc" id="a00678_html_aed181c52b8462c43272d45e625cd31fa"><div class="ttname"><a href="a00678.html#aed181c52b8462c43272d45e625cd31fa">tbb::internal::scheduler_state::my_properties</a></div><div class="ttdeci">scheduler_properties my_properties</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00095">scheduler.h:95</a></div></div>
<div class="ttc" id="a00677_html_ae27d95827090e04db3f184bb4b1369fd"><div class="ttname"><a href="a00677.html#ae27d95827090e04db3f184bb4b1369fd">tbb::internal::scheduler_properties::outermost</a></div><div class="ttdeci">bool outermost</div><div class="ttdoc">Indicates that a scheduler is on outermost level. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00057">scheduler.h:57</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a8bd4da1524fbd5b79bb84f0631c2b6e0_icgraph.svg" width="416" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="abb580929e3e34d6da1728e6fee8b6979"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="a00778.html">task</a>* tbb::internal::generic_scheduler::plugged_return_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Special value used to mark my_return_list as not taking any more entries. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00380">380</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a720c816c0253fe199e4583cd24090e9b">free_nonlocal_small_task()</a>, and <a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{<span class="keywordflow">return</span> (<a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>*)(intptr_t)(-1);}</div><div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_abb580929e3e34d6da1728e6fee8b6979_icgraph.svg" width="100%" height="437"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8a62642cb4b1ba391b8d3b9a00dca541"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a> * tbb::internal::generic_scheduler::prepare_for_spawning </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if t is affinitized to another thread, and if so, bundles it as proxy. </p>
<p>Returns either t or proxy containing t. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00562">562</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a>, <a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>, <a class="el" href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">allocate_task()</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084">tbb::task::allocated</a>, <a class="el" href="a00778.html#ada4ae99995a8f7b0cf1bbb6febbff8bb">tbb::task::context()</a>, <a class="el" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2bde1985fd0827baf5dbfa4a9bc33a7f">tbb::internal::es_ref_count_active</a>, <a class="el" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2b1c67cc200577a0b07649fdb00bec49">tbb::internal::es_task_proxy</a>, <a class="el" href="a01133.html#a3354e5fb6a188f3ae9d96fdce8b0c26d">tbb::internal::is_critical()</a>, <a class="el" href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">is_version_3_task()</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a00790.html#af6bc227aa29feead34c16e8012d634e0">tbb::internal::task_proxy::location_mask</a>, <a class="el" href="a00059.html#a4555e4bf4d6c2fd5a301ff6ff36f3fa0">tbb::internal::arena::mailbox()</a>, <a class="el" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a>, <a class="el" href="a00790.html#a32d3a7685efa9cf073409277295091a8">tbb::internal::task_proxy::outbox</a>, <a class="el" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>, <a class="el" href="a00778.html#a9d50759d59a2d300287158f38b317798">tbb::task::parent()</a>, <a class="el" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer()</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00481.html#a3aedb2e7696a176740895f1676fc795f">tbb::internal::mail_outbox::push()</a>, <a class="el" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ab2cde487a169988d66fc1052cedc92dc">tbb::task::ready</a>, <a class="el" href="a00778.html#a22ef8282e09458a46131843219cb71e5">tbb::task::state()</a>, <a class="el" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, and <a class="el" href="a00790.html#abedfdfcd6048685cf9aa032ca2380adf">tbb::internal::task_proxy::task_and_tag</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                                              {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( t-&gt;state()==<a class="code" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084">task::allocated</a>, <span class="stringliteral">&quot;attempt to spawn task that is not in &#39;allocated&#39; state&quot;</span> );</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    t-&gt;prefix().state = <a class="code" href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ab2cde487a169988d66fc1052cedc92dc">task::ready</a>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="preprocessor">#if TBB_USE_ASSERT</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* <a class="code" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a> = t-&gt;parent() ) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="a01133.html#a2c581fb16c2799f2d2b547dec0ff90be">internal::reference_count</a> ref_count = <a class="code" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>-&gt;prefix().ref_count;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( ref_count&gt;=0, <span class="stringliteral">&quot;attempt to spawn task whose parent has a ref_count&lt;0&quot;</span> );</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( ref_count!=0, <span class="stringliteral">&quot;attempt to spawn task whose parent has a ref_count==0 (forgot to set_ref_count?)&quot;</span> );</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a>-&gt;prefix().extra_state |= <a class="code" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2bde1985fd0827baf5dbfa4a9bc33a7f">es_ref_count_active</a>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* TBB_USE_ASSERT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="a01133.html#a3e3837fb3ca7bbf4cf4752c58cbed886">affinity_id</a> dst_thread = t-&gt;prefix().affinity;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( dst_thread == 0 || <a class="code" href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">is_version_3_task</a>(*t),</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                  <span class="stringliteral">&quot;backwards compatibility to TBB 2.0 tasks is broken&quot;</span> );</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="preprocessor">#if __TBB_TASK_ISOLATION</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation = <a class="code" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">my_innermost_running_task</a>-&gt;<a class="code" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">prefix</a>().isolation;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    t-&gt;prefix().isolation = isolation;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_ISOLATION */</span><span class="preprocessor"></span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span>( dst_thread != 0 &amp;&amp; dst_thread != <a class="code" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">my_affinity_id</a> ) {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        task_proxy&amp; proxy = (task_proxy&amp;)<a class="code" href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">allocate_task</a>( <span class="keyword">sizeof</span>(task_proxy),</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                                                      <a class="code" href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a>(NULL, NULL) );</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="comment">// Mark as a proxy</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        proxy.<a class="code" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">prefix</a>().extra_state = <a class="code" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2b1c67cc200577a0b07649fdb00bec49">es_task_proxy</a>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        proxy.outbox = &amp;<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#a4555e4bf4d6c2fd5a301ff6ff36f3fa0">mailbox</a>(dst_thread);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="comment">// Mark proxy as present in both locations (sender&#39;s task pool and destination mailbox)</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        proxy.task_and_tag = intptr_t(t) | <a class="code" href="a00790.html#af6bc227aa29feead34c16e8012d634e0">task_proxy::location_mask</a>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="preprocessor">#if __TBB_TASK_PRIORITY</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">poison_pointer</a>( proxy.prefix().context );</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __TBB_TASK_PRIORITY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>( proxy.prefix().isolation = isolation );</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>( <a class="code" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, proxy.outbox );</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="comment">// Mail the proxy - after this point t may be destroyed by another thread at any moment.</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        proxy.outbox-&gt;push(&amp;proxy);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">return</span> &amp;proxy;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">return</span> t;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div><div class="ttc" id="a01063_html_a63e9a35b6d2bfbfb21b3199dc03acc6d"><div class="ttname"><a href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a></div><div class="ttdeci">#define __TBB_ISOLATION_EXPR(isolation)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00071">scheduler_common.h:71</a></div></div>
<div class="ttc" id="a01133_html_a090e9968565912983b4fccaa8572765b"><div class="ttname"><a href="a01133.html#a090e9968565912983b4fccaa8572765b">tbb::internal::isolation_tag</a></div><div class="ttdeci">intptr_t isolation_tag</div><div class="ttdoc">A tag for task isolation. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00128">task.h:128</a></div></div>
<div class="ttc" id="a01133_html_a5fb219223e38c8bbcc47d7c943f48e54a2b1c67cc200577a0b07649fdb00bec49"><div class="ttname"><a href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2b1c67cc200577a0b07649fdb00bec49">tbb::internal::es_task_proxy</a></div><div class="ttdoc">Tag for v3 task_proxy. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00178">scheduler_common.h:178</a></div></div>
<div class="ttc" id="a00778_html_a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084"><div class="ttname"><a href="a00778.html#a3935129602baa0b18727f8fc7384dbf1a8d74b73d7ceaf5341c9c2552d6c68084">tbb::task::allocated</a></div><div class="ttdoc">task object is freshly allocated or recycled. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00620">task.h:620</a></div></div>
<div class="ttc" id="a00778_html_a3935129602baa0b18727f8fc7384dbf1ab2cde487a169988d66fc1052cedc92dc"><div class="ttname"><a href="a00778.html#a3935129602baa0b18727f8fc7384dbf1ab2cde487a169988d66fc1052cedc92dc">tbb::task::ready</a></div><div class="ttdoc">task is in ready pool, or is going to be put there, or was just taken off. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00618">task.h:618</a></div></div>
<div class="ttc" id="a01133_html_a2c581fb16c2799f2d2b547dec0ff90be"><div class="ttname"><a href="a01133.html#a2c581fb16c2799f2d2b547dec0ff90be">tbb::internal::reference_count</a></div><div class="ttdeci">intptr_t reference_count</div><div class="ttdoc">A reference count. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00121">task.h:121</a></div></div>
<div class="ttc" id="a01016_html_a5f03a37f2bd0f2bf683ff8a440e37a38"><div class="ttname"><a href="a01016.html#a5f03a37f2bd0f2bf683ff8a440e37a38">parent</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void ITT_FORMAT p void ITT_FORMAT p void size_t ITT_FORMAT d void ITT_FORMAT p const wchar_t ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s no args void ITT_FORMAT p size_t ITT_FORMAT d no args const wchar_t const wchar_t ITT_FORMAT s __itt_heap_function void size_t int ITT_FORMAT d __itt_heap_function void ITT_FORMAT p __itt_heap_function void void size_t int ITT_FORMAT d no args no args unsigned int ITT_FORMAT u const __itt_domain __itt_id ITT_FORMAT lu const __itt_domain __itt_id __itt_id parent</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00165">ittnotify_static.h:165</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00678_html_a3a635bad42d492013d4a06d1af0c452b"><div class="ttname"><a href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a></div><div class="ttdeci">affinity_id my_affinity_id</div><div class="ttdoc">The mailbox id assigned to this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00093">scheduler.h:93</a></div></div>
<div class="ttc" id="a00790_html_af6bc227aa29feead34c16e8012d634e0"><div class="ttname"><a href="a00790.html#af6bc227aa29feead34c16e8012d634e0">tbb::internal::task_proxy::location_mask</a></div><div class="ttdeci">static const intptr_t location_mask</div><div class="ttdef"><b>Definition:</b> <a href="a01024_source.html#l00036">mailbox.h:36</a></div></div>
<div class="ttc" id="a01016_html_ac5a347b47a5603a1f30f6fbf790724b7"><div class="ttname"><a href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p sync_releasing</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00093">ittnotify_static.h:93</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a00302_html_aa0d316e9f3063c6b57fa21e0716d4d77"><div class="ttname"><a href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">tbb::internal::generic_scheduler::allocate_task</a></div><div class="ttdeci">task &amp; allocate_task(size_t number_of_bytes, __TBB_CONTEXT_ARG(task *parent, task_group_context *context))</div><div class="ttdoc">Allocate task object, either from the heap or a free list. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00304">scheduler.cpp:304</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a00059_html_a4555e4bf4d6c2fd5a301ff6ff36f3fa0"><div class="ttname"><a href="a00059.html#a4555e4bf4d6c2fd5a301ff6ff36f3fa0">tbb::internal::arena::mailbox</a></div><div class="ttdeci">mail_outbox &amp; mailbox(affinity_id id)</div><div class="ttdoc">Get reference to mailbox corresponding to given affinity_id. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00208">arena.h:208</a></div></div>
<div class="ttc" id="a00302_html_a33519b4cf710f8c46129672f79fb6ec4"><div class="ttname"><a href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">tbb::internal::generic_scheduler::is_version_3_task</a></div><div class="ttdeci">static bool is_version_3_task(task &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00133">scheduler.h:133</a></div></div>
<div class="ttc" id="a01133_html_a5fb219223e38c8bbcc47d7c943f48e54a2bde1985fd0827baf5dbfa4a9bc33a7f"><div class="ttname"><a href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2bde1985fd0827baf5dbfa4a9bc33a7f">tbb::internal::es_ref_count_active</a></div><div class="ttdoc">Set if ref_count might be changed by another thread. Used for debugging. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00180">scheduler_common.h:180</a></div></div>
<div class="ttc" id="a00678_html_aac9af4d8baddbbc2af433e11297be8a5"><div class="ttname"><a href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a></div><div class="ttdeci">task * my_innermost_running_task</div><div class="ttdoc">Innermost task whose task::execute() is running. A dummy task on the outermost level. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00081">scheduler.h:81</a></div></div>
<div class="ttc" id="a01133_html_a58dafd43fac118e984cc4f19f3901609"><div class="ttname"><a href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer</a></div><div class="ttdeci">void poison_pointer(T *__TBB_atomic &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00309">tbb_stddef.h:309</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00778_html_a2bfe4567c87e5b783ca8595f95cfdb90"><div class="ttname"><a href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix</a></div><div class="ttdeci">internal::task_prefix &amp; prefix(internal::version_tag *=NULL) const </div><div class="ttdoc">Get reference to corresponding task_prefix. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00941">task.h:941</a></div></div>
<div class="ttc" id="a01063_html_a0ef18fbe7aa93b76fd4136a153bc2e44"><div class="ttname"><a href="a01063.html#a0ef18fbe7aa93b76fd4136a153bc2e44">__TBB_CONTEXT_ARG</a></div><div class="ttdeci">#define __TBB_CONTEXT_ARG(arg1, context)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00064">scheduler_common.h:64</a></div></div>
<div class="ttc" id="a01133_html_a3e3837fb3ca7bbf4cf4752c58cbed886"><div class="ttname"><a href="a01133.html#a3e3837fb3ca7bbf4cf4752c58cbed886">tbb::internal::affinity_id</a></div><div class="ttdeci">unsigned short affinity_id</div><div class="ttdoc">An id as used for specifying affinity. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00124">task.h:124</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a8a62642cb4b1ba391b8d3b9a00dca541_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a8a62642cb4b1ba391b8d3b9a00dca541_icgraph.svg" width="100%" height="448"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0460616fb84af745b12688927ff1bb7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t tbb::internal::generic_scheduler::prepare_task_pool </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes sure that the task pool can accommodate at least n more elements. </p>
<p>If necessary relocates existing task pointers or grows the ready task deque. Returns (possible updated) tail index (not accounting for n). </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00406">406</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>, <a class="el" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool()</a>, <a class="el" href="a00061.html#a68ed52221d5eff32c230ccaf7a79fff7">tbb::internal::arena_slot::allocate_task_pool()</a>, <a class="el" href="a00302.html#a08edecb9bd9ef648bada9fb5b1febeec">assert_task_pool_valid()</a>, <a class="el" href="a00302.html#aecf34e6a9902af76bbbeab1fd3851df8">commit_relocated_tasks()</a>, <a class="el" href="a00061.html#a738e7bf1cdd82b4d174947bbc746c766">tbb::internal::arena_slot::fill_with_canary_pattern()</a>, <a class="el" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a>, <a class="el" href="a00302.html#a41fe4dd6cf0d0bd7db3440ff1f5e70ff">is_quiescent_local_task_pool_reset()</a>, <a class="el" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published()</a>, <a class="el" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00063.html#a2c0d5b1c84ce0b83aa6b434dc448b133">tbb::internal::arena_slot_line2::my_task_pool_size</a>, <a class="el" href="a01016.html#a0ff2395a84e0714023e69b0ff3d7363b">new_size</a>, <a class="el" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free()</a>, <a class="el" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a>, and <a class="el" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, and <a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                                                      {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordtype">size_t</span> T = <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>); <span class="comment">// mirror</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> ( T + num_tasks &lt;= my_arena_slot-&gt;my_task_pool_size )</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">return</span> T;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="a01016.html#a0ff2395a84e0714023e69b0ff3d7363b">new_size</a> = num_tasks;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#a2c0d5b1c84ce0b83aa6b434dc448b133">my_task_pool_size</a> ) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !<a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>() &amp;&amp; <a class="code" href="a00302.html#a41fe4dd6cf0d0bd7db3440ff1f5e70ff">is_quiescent_local_task_pool_reset</a>(), NULL );</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>, NULL );</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span> ( num_tasks &lt; <a class="code" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a> ) new_size = <a class="code" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a>;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00061.html#a68ed52221d5eff32c230ccaf7a79fff7">allocate_task_pool</a>( new_size );</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">acquire_task_pool</a>();</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">size_t</span> H = <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a> ); <span class="comment">// mirror</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>** task_pool = <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>;;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#a2c0d5b1c84ce0b83aa6b434dc448b133">my_task_pool_size</a> &gt;= <a class="code" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a>, NULL );</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// Count not skipped tasks. Consider using std::count_if.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> i = H; i &lt; T; ++i )</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> ( task_pool[i] ) ++<a class="code" href="a01016.html#a0ff2395a84e0714023e69b0ff3d7363b">new_size</a>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// If the free space at the beginning of the task pool is too short, we</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// are likely facing a pathological single-producer-multiple-consumers</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// scenario, and thus it&#39;s better to expand the task pool</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordtype">bool</span> allocate = new_size &gt; <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#a2c0d5b1c84ce0b83aa6b434dc448b133">my_task_pool_size</a> - <a class="code" href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">min_task_pool_size</a>/4;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> ( allocate ) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="comment">// Grow task pool. As this operation is rare, and its cost is asymptotically</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="comment">// amortizable, we can tolerate new task pool allocation done under the lock.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">if</span> ( new_size &lt; 2 * my_arena_slot-&gt;my_task_pool_size )</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            new_size = 2 * <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#a2c0d5b1c84ce0b83aa6b434dc448b133">my_task_pool_size</a>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00061.html#a68ed52221d5eff32c230ccaf7a79fff7">allocate_task_pool</a>( new_size ); <span class="comment">// updates my_task_pool_size</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// Filter out skipped tasks. Consider using std::copy_if.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordtype">size_t</span> T1 = 0;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> i = H; i &lt; T; ++i )</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">if</span> ( task_pool[i] )</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a>[T1++] = task_pool[i];</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">// Deallocate the previous task pool if a new one has been allocated.</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> ( allocate )</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">NFS_Free</a>( task_pool );</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00061.html#a738e7bf1cdd82b4d174947bbc746c766">fill_with_canary_pattern</a>( T1, <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a> );</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// Publish the new state.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="a00302.html#aecf34e6a9902af76bbbeab1fd3851df8">commit_relocated_tasks</a>( T1 );</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="a00302.html#a08edecb9bd9ef648bada9fb5b1febeec">assert_task_pool_valid</a>();</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">return</span> T1;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div><div class="ttc" id="a00302_html_a22a847d9945a845e136c9163f835adcd"><div class="ttname"><a href="a00302.html#a22a847d9945a845e136c9163f835adcd">tbb::internal::generic_scheduler::is_task_pool_published</a></div><div class="ttdeci">bool is_task_pool_published() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00550">scheduler.h:550</a></div></div>
<div class="ttc" id="a00302_html_a1190ee0529a9280846bd50c4f50c8398"><div class="ttname"><a href="a00302.html#a1190ee0529a9280846bd50c4f50c8398">tbb::internal::generic_scheduler::min_task_pool_size</a></div><div class="ttdeci">static const size_t min_task_pool_size</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00294">scheduler.h:294</a></div></div>
<div class="ttc" id="a00062_html_a6b0b8214404af0b2c30f442b33d0d209"><div class="ttname"><a href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a></div><div class="ttdeci">__TBB_atomic size_t head</div><div class="ttdoc">Index of the first ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00346">scheduler_common.h:346</a></div></div>
<div class="ttc" id="a00302_html_a6e2af1d0f7af34dee87a5b207d498f59"><div class="ttname"><a href="a00302.html#a6e2af1d0f7af34dee87a5b207d498f59">tbb::internal::generic_scheduler::acquire_task_pool</a></div><div class="ttdeci">void acquire_task_pool() const </div><div class="ttdoc">Locks the local task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00460">scheduler.cpp:460</a></div></div>
<div class="ttc" id="a00063_html_a2c0d5b1c84ce0b83aa6b434dc448b133"><div class="ttname"><a href="a00063.html#a2c0d5b1c84ce0b83aa6b434dc448b133">tbb::internal::arena_slot_line2::my_task_pool_size</a></div><div class="ttdeci">size_t my_task_pool_size</div><div class="ttdoc">Capacity of the primary task pool (number of elements - pointers to task). </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00364">scheduler_common.h:364</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00302_html_a41fe4dd6cf0d0bd7db3440ff1f5e70ff"><div class="ttname"><a href="a00302.html#a41fe4dd6cf0d0bd7db3440ff1f5e70ff">tbb::internal::generic_scheduler::is_quiescent_local_task_pool_reset</a></div><div class="ttdeci">bool is_quiescent_local_task_pool_reset() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00566">scheduler.h:566</a></div></div>
<div class="ttc" id="a01133_html_a9c68ba9b3309fdabe739f77b71ed9a67"><div class="ttname"><a href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed</a></div><div class="ttdeci">T __TBB_load_relaxed(const volatile T &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00739">tbb_machine.h:739</a></div></div>
<div class="ttc" id="a01147_html_ga7814c9ccc02b8fe5f712fb6fd8a2b607"><div class="ttname"><a href="a01147.html#ga7814c9ccc02b8fe5f712fb6fd8a2b607">tbb::internal::NFS_Free</a></div><div class="ttdeci">void __TBB_EXPORTED_FUNC NFS_Free(void *)</div><div class="ttdoc">Free memory allocated by NFS_Allocate. </div><div class="ttdef"><b>Definition:</b> <a href="a00971_source.html#l00202">cache_aligned_allocator.cpp:202</a></div></div>
<div class="ttc" id="a00302_html_aecf34e6a9902af76bbbeab1fd3851df8"><div class="ttname"><a href="a00302.html#aecf34e6a9902af76bbbeab1fd3851df8">tbb::internal::generic_scheduler::commit_relocated_tasks</a></div><div class="ttdeci">void commit_relocated_tasks(size_t new_tail)</div><div class="ttdoc">Makes relocated tasks visible to thieves and releases the local task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00641">scheduler.h:641</a></div></div>
<div class="ttc" id="a00302_html_a08edecb9bd9ef648bada9fb5b1febeec"><div class="ttname"><a href="a00302.html#a08edecb9bd9ef648bada9fb5b1febeec">tbb::internal::generic_scheduler::assert_task_pool_valid</a></div><div class="ttdeci">void assert_task_pool_valid() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00323">scheduler.h:323</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00063_html_acaf81236f1e1c743b3a1be8b03505a30"><div class="ttname"><a href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a></div><div class="ttdeci">task **__TBB_atomic task_pool_ptr</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00367">scheduler_common.h:367</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00061_html_a738e7bf1cdd82b4d174947bbc746c766"><div class="ttname"><a href="a00061.html#a738e7bf1cdd82b4d174947bbc746c766">tbb::internal::arena_slot::fill_with_canary_pattern</a></div><div class="ttdeci">void fill_with_canary_pattern(size_t, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00382">scheduler_common.h:382</a></div></div>
<div class="ttc" id="a01016_html_a0ff2395a84e0714023e69b0ff3d7363b"><div class="ttname"><a href="a01016.html#a0ff2395a84e0714023e69b0ff3d7363b">new_size</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task __itt_model_task_instance ITT_FORMAT p void ITT_FORMAT p void ITT_FORMAT p void size_t ITT_FORMAT d void ITT_FORMAT p const wchar_t ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s const char ITT_FORMAT s no args void ITT_FORMAT p size_t ITT_FORMAT d no args const wchar_t const wchar_t ITT_FORMAT s __itt_heap_function void size_t int ITT_FORMAT d __itt_heap_function void ITT_FORMAT p __itt_heap_function void void size_t new_size</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00152">ittnotify_static.h:152</a></div></div>
<div class="ttc" id="a00061_html_a68ed52221d5eff32c230ccaf7a79fff7"><div class="ttname"><a href="a00061.html#a68ed52221d5eff32c230ccaf7a79fff7">tbb::internal::arena_slot::allocate_task_pool</a></div><div class="ttdeci">void allocate_task_pool(size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00385">scheduler_common.h:385</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a0460616fb84af745b12688927ff1bb7d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a0460616fb84af745b12688927ff1bb7d_icgraph.svg" width="100%" height="448"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="af222cccbf09e91c9c9caaad81f8d993d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::publish_task_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used by workers to enter the task pool. </p>
<p>Does not lock the task pool in case if arena slot has been successfully grabbed. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l01214">1214</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>, <a class="el" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release()</a>, <a class="el" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>, <a class="el" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a>, <a class="el" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, <a class="el" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a>, <a class="el" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a>, and <a class="el" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, <a class="el" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task()</a>, and <a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn()</a>.</p>
<div class="fragment"><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                                                 {</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>, <span class="stringliteral">&quot;no arena: initialization not completed?&quot;</span> );</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( my_arena_index &lt; my_arena-&gt;my_num_slots, <span class="stringliteral">&quot;arena slot index is out-of-bound&quot;</span> );</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a> == &amp;<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#a388cbceb772b63b69ee84d775b210504">my_slots</a>[<a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a>], NULL);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a> == <a class="code" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>, <span class="stringliteral">&quot;someone else grabbed my arena slot?&quot;</span> );</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a> ( <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a>) &lt; <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(<a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>),</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                   <span class="stringliteral">&quot;entering arena without tasks to share&quot;</span> );</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="comment">// Release signal on behalf of previously spawned tasks (when this thread was not in arena yet)</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(<a class="code" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">__TBB_store_with_release</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a>, <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a> );</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;}</div><div class="ttc" id="a00678_html_a35aa72cfdda3b500e908925a3d6da747"><div class="ttname"><a href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a></div><div class="ttdeci">size_t my_arena_index</div><div class="ttdoc">Index of the arena slot the scheduler occupies now, or occupied last time. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00072">scheduler.h:72</a></div></div>
<div class="ttc" id="a00062_html_a6b0b8214404af0b2c30f442b33d0d209"><div class="ttname"><a href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a></div><div class="ttdeci">__TBB_atomic size_t head</div><div class="ttdoc">Index of the first ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00346">scheduler_common.h:346</a></div></div>
<div class="ttc" id="a00059_html_a388cbceb772b63b69ee84d775b210504"><div class="ttname"><a href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a></div><div class="ttdeci">arena_slot my_slots[1]</div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00300">arena.h:300</a></div></div>
<div class="ttc" id="a01016_html_ac5a347b47a5603a1f30f6fbf790724b7"><div class="ttname"><a href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p sync_releasing</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00093">ittnotify_static.h:93</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a01062_html_a6f1c5fa8b2e50a1a91282165c7a9dae2"><div class="ttname"><a href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a></div><div class="ttdeci">#define EmptyTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00046">scheduler.h:46</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a01133_html_a9c68ba9b3309fdabe739f77b71ed9a67"><div class="ttname"><a href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed</a></div><div class="ttdeci">T __TBB_load_relaxed(const volatile T &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00739">tbb_machine.h:739</a></div></div>
<div class="ttc" id="a01133_html_aea57866db2fc3fe1018c89b58109b39a"><div class="ttname"><a href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release</a></div><div class="ttdeci">void __TBB_store_with_release(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00717">tbb_machine.h:717</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00063_html_acaf81236f1e1c743b3a1be8b03505a30"><div class="ttname"><a href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a></div><div class="ttdeci">task **__TBB_atomic task_pool_ptr</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00367">scheduler_common.h:367</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00062_html_a9096bfd9df29790ef46791385c5a8162"><div class="ttname"><a href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a></div><div class="ttdeci">task **__TBB_atomic task_pool</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00342">scheduler_common.h:342</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_af222cccbf09e91c9c9caaad81f8d993d_cgraph.svg" width="395" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_af222cccbf09e91c9c9caaad81f8d993d_icgraph.svg" width="100%" height="496"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a23ac634dbb5e817484963c6c04c0ae8a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="a00778.html">task</a>* tbb::internal::generic_scheduler::receive_or_steal_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a01063.html#ae8bf2edd69c1485ce30d4e88cc7e27d2">__TBB_ISOLATION_ARG</a>(<a class="el" href="a01098.html#a4b711c848444075f0760dd98fe929c39">__TBB_atomic</a> <a class="el" href="a01133.html#a2c581fb16c2799f2d2b547dec0ff90be">reference_count</a> &amp;completion_ref_count, <a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try getting a task from other threads (via mailbox, stealing, FIFO queue, orphans adoption). </p>
<p>Returns obtained task or NULL if all attempts fail. </p>

<p>Implemented in <a class="el" href="a00194.html#a3825613e3650d5a9110b9b9f5ee4a3e9">tbb::internal::custom_scheduler&lt; SchedulerTraits &gt;</a>.</p>

<p>Referenced by <a class="el" href="a00059.html#aff17fc29650655b080b795be34179d20">tbb::internal::arena::process()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a23ac634dbb5e817484963c6c04c0ae8a_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a24dd9ef31d1f73ea2fadcc35df6d9d21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::release_task_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlocks the local task pool. </p>
<p>Restores my_arena_slot-&gt;task_pool munged by acquire_task_pool. Requires correctly set my_arena_slot-&gt;task_pool_ptr. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00489">489</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release()</a>, <a class="el" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published()</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, <a class="el" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a>, and <a class="el" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#ac223f7892d65e496c37190c4009ea1f7">cleanup_master()</a>, <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, <a class="el" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler()</a>, and <a class="el" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                                       {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="a00302.html#a22a847d9945a845e136c9163f835adcd">is_task_pool_published</a>() )</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// we are not in arena - nothing to unlock</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>, <span class="stringliteral">&quot;we are not in arena&quot;</span> );</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a> == <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <span class="stringliteral">&quot;arena slot is not locked&quot;</span> );</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(<a class="code" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">__TBB_store_with_release</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a>, <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">task_pool_ptr</a> );</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div><div class="ttc" id="a00302_html_a22a847d9945a845e136c9163f835adcd"><div class="ttname"><a href="a00302.html#a22a847d9945a845e136c9163f835adcd">tbb::internal::generic_scheduler::is_task_pool_published</a></div><div class="ttdeci">bool is_task_pool_published() const </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00550">scheduler.h:550</a></div></div>
<div class="ttc" id="a01016_html_ac5a347b47a5603a1f30f6fbf790724b7"><div class="ttname"><a href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p sync_releasing</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00093">ittnotify_static.h:93</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a01133_html_aea57866db2fc3fe1018c89b58109b39a"><div class="ttname"><a href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release</a></div><div class="ttdeci">void __TBB_store_with_release(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00717">tbb_machine.h:717</a></div></div>
<div class="ttc" id="a01062_html_a096a309d24c5ac85036e8970880e5efd"><div class="ttname"><a href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a></div><div class="ttdeci">#define LockedTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00047">scheduler.h:47</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00063_html_acaf81236f1e1c743b3a1be8b03505a30"><div class="ttname"><a href="a00063.html#acaf81236f1e1c743b3a1be8b03505a30">tbb::internal::arena_slot_line2::task_pool_ptr</a></div><div class="ttdeci">task **__TBB_atomic task_pool_ptr</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00367">scheduler_common.h:367</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00062_html_a9096bfd9df29790ef46791385c5a8162"><div class="ttname"><a href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a></div><div class="ttdeci">task **__TBB_atomic task_pool</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00342">scheduler_common.h:342</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a24dd9ef31d1f73ea2fadcc35df6d9d21_cgraph.svg" width="424" height="132"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a24dd9ef31d1f73ea2fadcc35df6d9d21_icgraph.svg" width="100%" height="500"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad8f6a6793961db84240434fffd7b50f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::reset_task_pool_and_leave </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets head and tail indices to 0, and leaves task pool. </p>
<p>The task pool must be locked by the owner (via acquire_task_pool). </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00624">624</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed()</a>, and <a class="el" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a10c72a4aad7308d944cef26502ece55e">get_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                                                          {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">task_pool</a> == <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <span class="stringliteral">&quot;Task pool must be locked when resetting task pool&quot;</span> );</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tail</a>, 0 );</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( <a class="code" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">my_arena_slot</a>-&gt;<a class="code" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">head</a>, 0 );</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="a00302.html#aad4a3aef975ca2516a81640654a65717">leave_task_pool</a>();</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div><div class="ttc" id="a00062_html_a6b0b8214404af0b2c30f442b33d0d209"><div class="ttname"><a href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a></div><div class="ttdeci">__TBB_atomic size_t head</div><div class="ttdoc">Index of the first ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00346">scheduler_common.h:346</a></div></div>
<div class="ttc" id="a00302_html_aad4a3aef975ca2516a81640654a65717"><div class="ttname"><a href="a00302.html#aad4a3aef975ca2516a81640654a65717">tbb::internal::generic_scheduler::leave_task_pool</a></div><div class="ttdeci">void leave_task_pool()</div><div class="ttdoc">Leave the task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l01226">scheduler.cpp:1226</a></div></div>
<div class="ttc" id="a00063_html_af3e2089ebb470604941ca8db193d9927"><div class="ttname"><a href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a></div><div class="ttdeci">__TBB_atomic size_t tail</div><div class="ttdoc">Index of the element following the last ready task in the deque. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00361">scheduler_common.h:361</a></div></div>
<div class="ttc" id="a01062_html_a096a309d24c5ac85036e8970880e5efd"><div class="ttname"><a href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a></div><div class="ttdeci">#define LockedTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00047">scheduler.h:47</a></div></div>
<div class="ttc" id="a01133_html_a1f6010c3e550e88ab739adbdee5dfdac"><div class="ttname"><a href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed</a></div><div class="ttdeci">void __TBB_store_relaxed(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00743">tbb_machine.h:743</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00678_html_a6f2fdcecd347bf767e89fda580545c1a"><div class="ttname"><a href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a></div><div class="ttdeci">arena_slot * my_arena_slot</div><div class="ttdoc">Pointer to the slot in the arena we own at the moment. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00075">scheduler.h:75</a></div></div>
<div class="ttc" id="a00062_html_a9096bfd9df29790ef46791385c5a8162"><div class="ttname"><a href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a></div><div class="ttdeci">task **__TBB_atomic task_pool</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00342">scheduler_common.h:342</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_ad8f6a6793961db84240434fffd7b50f3_cgraph.svg" width="352" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_ad8f6a6793961db84240434fffd7b50f3_icgraph.svg" width="547" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4d51eca32dc45cba3e0ec161240bfaca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::spawn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> &amp;&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> *&amp;&#160;</td>
          <td class="paramname"><em>next</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For internal use only. </p>

<p>Implements <a class="el" href="a00676.html#a6b1d860b67fc7c9496728928ef7c9967">tbb::internal::scheduler</a>.</p>

<p>Definition at line <a class="el" href="a01061_source.html#l00706">706</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a00307.html#af2d5dff302cbba60bcf7becbdce2ade9">tbb::internal::governor::local_scheduler()</a>, and <a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn()</a>.</p>
<div class="fragment"><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                                                   {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="a00307.html#af2d5dff302cbba60bcf7becbdce2ade9">governor::local_scheduler</a>()-&gt;<a class="code" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn</a>( &amp;<a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>, next );</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;}</div><div class="ttc" id="a00307_html_af2d5dff302cbba60bcf7becbdce2ade9"><div class="ttname"><a href="a00307.html#af2d5dff302cbba60bcf7becbdce2ade9">tbb::internal::governor::local_scheduler</a></div><div class="ttdeci">static generic_scheduler * local_scheduler()</div><div class="ttdoc">Obtain the thread-local instance of the TBB scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01005_source.html#l00126">governor.h:126</a></div></div>
<div class="ttc" id="a00302_html_ae43166ffd9d7fb624158872394832f17"><div class="ttname"><a href="a00302.html#ae43166ffd9d7fb624158872394832f17">tbb::internal::generic_scheduler::local_spawn</a></div><div class="ttdeci">void local_spawn(task *first, task *&amp;next)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00618">scheduler.cpp:618</a></div></div>
<div class="ttc" id="a01133_html_acf23419eb6d3adac787a4fee78cb3c27"><div class="ttname"><a href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">tbb::internal::first</a></div><div class="ttdeci">auto first(Container &amp;c) -&gt; decltype(begin(c))</div><div class="ttdef"><b>Definition:</b> <a href="a00953_source.html#l00038">_range_iterator.h:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a4d51eca32dc45cba3e0ec161240bfaca_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e0b5fdf74860259585e55f7bf2edb8e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::spawn_root_and_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> &amp;&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> *&amp;&#160;</td>
          <td class="paramname"><em>next</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For internal use only. </p>

<p>Implements <a class="el" href="a00676.html#a39dd053601ee965fd9af7192829832f5">tbb::internal::scheduler</a>.</p>

<p>Definition at line <a class="el" href="a01061_source.html#l00710">710</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a00307.html#af2d5dff302cbba60bcf7becbdce2ade9">tbb::internal::governor::local_scheduler()</a>, and <a class="el" href="a00302.html#a9dacb8fead5795de1011018b83d68d61">local_spawn_root_and_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                                                                                 {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="a00307.html#af2d5dff302cbba60bcf7becbdce2ade9">governor::local_scheduler</a>()-&gt;<a class="code" href="a00302.html#a9dacb8fead5795de1011018b83d68d61">local_spawn_root_and_wait</a>( &amp;<a class="code" href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">first</a>, next );</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;}</div><div class="ttc" id="a00307_html_af2d5dff302cbba60bcf7becbdce2ade9"><div class="ttname"><a href="a00307.html#af2d5dff302cbba60bcf7becbdce2ade9">tbb::internal::governor::local_scheduler</a></div><div class="ttdeci">static generic_scheduler * local_scheduler()</div><div class="ttdoc">Obtain the thread-local instance of the TBB scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01005_source.html#l00126">governor.h:126</a></div></div>
<div class="ttc" id="a00302_html_a9dacb8fead5795de1011018b83d68d61"><div class="ttname"><a href="a00302.html#a9dacb8fead5795de1011018b83d68d61">tbb::internal::generic_scheduler::local_spawn_root_and_wait</a></div><div class="ttdeci">void local_spawn_root_and_wait(task *first, task *&amp;next)</div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00685">scheduler.cpp:685</a></div></div>
<div class="ttc" id="a01133_html_acf23419eb6d3adac787a4fee78cb3c27"><div class="ttname"><a href="a01133.html#acf23419eb6d3adac787a4fee78cb3c27">tbb::internal::first</a></div><div class="ttdeci">auto first(Container &amp;c) -&gt; decltype(begin(c))</div><div class="ttdef"><b>Definition:</b> <a href="a00953_source.html#l00038">_range_iterator.h:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a6e0b5fdf74860259585e55f7bf2edb8e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="abb8f3f3967170ca9398e55b90220c3cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a> * tbb::internal::generic_scheduler::steal_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>(<a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to steal a task from a randomly chosen thread/scheduler. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l01075">1075</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01063.html#ae8bf2edd69c1485ce30d4e88cc7e27d2">__TBB_ISOLATION_ARG</a>, <a class="el" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a>, <a class="el" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2e086a4d594002615b167ab481fa32fe">tbb::internal::es_task_is_stolen</a>, <a class="el" href="a00790.html#a3a144ac1ce1252f4b4da060d5d3f5ded">tbb::internal::task_proxy::extract_task()</a>, <a class="el" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>, <a class="el" href="a00251.html#ac8e049baba79d8277271decc591c0239">tbb::internal::FastRandom::get()</a>, <a class="el" href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">is_proxy()</a>, <a class="el" href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">is_version_3_task()</a>, <a class="el" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a>, <a class="el" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a>, <a class="el" href="a00060.html#a0184ffea730d663e63f0f60946422da2">tbb::internal::arena_base::my_limit</a>, <a class="el" href="a00302.html#aee56a8b51b71d3f96f9c8cacf00fe845">my_random</a>, <a class="el" href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a>, <a class="el" href="a00778.html#a30f13aac27c8d2ee6e85865e54115862">tbb::task::note_affinity()</a>, <a class="el" href="a00790.html#a6339e879ab7b6576df404a749f603c51">tbb::internal::task_proxy::pool_bit</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00302.html#a15b506cb1b1da8e37255fc2fcdf250f0">steal_task_from()</a>, and <a class="el" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a>.</p>
<div class="fragment"><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                                                                                   {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="comment">// Try to steal a task from a random victim.</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordtype">size_t</span> k = <a class="code" href="a00302.html#aee56a8b51b71d3f96f9c8cacf00fe845">my_random</a>.<a class="code" href="a00251.html#ac8e049baba79d8277271decc591c0239">get</a>() % (<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00060.html#a0184ffea730d663e63f0f60946422da2">my_limit</a>-1);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    arena_slot* victim = &amp;<a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#a388cbceb772b63b69ee84d775b210504">my_slots</a>[k];</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// The following condition excludes the master that might have</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="comment">// already taken our previous place in the arena from the list .</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// of potential victims. But since such a situation can take</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="comment">// place only in case of significant oversubscription, keeping</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="comment">// the checks simple seems to be preferable to complicating the code.</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">if</span>( k &gt;= <a class="code" href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">my_arena_index</a> )</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        ++victim;               <span class="comment">// Adjusts random distribution to exclude self</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> **pool = victim-&gt;task_pool;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a> *t = NULL;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordflow">if</span>( pool == <a class="code" href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a> || !(t = <a class="code" href="a00302.html#a15b506cb1b1da8e37255fc2fcdf250f0">steal_task_from</a>( <a class="code" href="a01063.html#ae8bf2edd69c1485ce30d4e88cc7e27d2">__TBB_ISOLATION_ARG</a>(*victim, isolation) )) )</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">is_proxy</a>(*t) ) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        task_proxy &amp;tp = *(task_proxy*)t;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        t = tp.extract_task&lt;<a class="code" href="a00790.html#a6339e879ab7b6576df404a749f603c51">task_proxy::pool_bit</a>&gt;();</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span> ( !t ) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="comment">// Proxy was empty, so it&#39;s our responsibility to free it</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            free_task&lt;no_cache_small_task&gt;(tp);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>( ++my_counters.proxies_stolen );</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    t-&gt;prefix().extra_state |= <a class="code" href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2e086a4d594002615b167ab481fa32fe">es_task_is_stolen</a>;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">is_version_3_task</a>(*t) ) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <a class="code" href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">my_innermost_running_task</a> = t;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        t-&gt;<a class="code" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">prefix</a>().owner = <span class="keyword">this</span>;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        t-&gt;note_affinity( <a class="code" href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">my_affinity_id</a> );</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    }</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>( ++my_counters.steals_committed );</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">return</span> t;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}</div><div class="ttc" id="a00678_html_a35aa72cfdda3b500e908925a3d6da747"><div class="ttname"><a href="a00678.html#a35aa72cfdda3b500e908925a3d6da747">tbb::internal::scheduler_state::my_arena_index</a></div><div class="ttdeci">size_t my_arena_index</div><div class="ttdoc">Index of the arena slot the scheduler occupies now, or occupied last time. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00072">scheduler.h:72</a></div></div>
<div class="ttc" id="a00302_html_a868812dd8d875a225a6f589fdbaafe54"><div class="ttname"><a href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">tbb::internal::generic_scheduler::is_proxy</a></div><div class="ttdeci">static bool is_proxy(const task &amp;t)</div><div class="ttdoc">True if t is a task_proxy. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00273">scheduler.h:273</a></div></div>
<div class="ttc" id="a00302_html_a15b506cb1b1da8e37255fc2fcdf250f0"><div class="ttname"><a href="a00302.html#a15b506cb1b1da8e37255fc2fcdf250f0">tbb::internal::generic_scheduler::steal_task_from</a></div><div class="ttdeci">task * steal_task_from(__TBB_ISOLATION_ARG(arena_slot &amp;victim_arena_slot, isolation_tag isolation))</div><div class="ttdoc">Steal task from another scheduler&amp;#39;s ready pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l01110">scheduler.cpp:1110</a></div></div>
<div class="ttc" id="a00059_html_a388cbceb772b63b69ee84d775b210504"><div class="ttname"><a href="a00059.html#a388cbceb772b63b69ee84d775b210504">tbb::internal::arena::my_slots</a></div><div class="ttdeci">arena_slot my_slots[1]</div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00300">arena.h:300</a></div></div>
<div class="ttc" id="a00060_html_a0184ffea730d663e63f0f60946422da2"><div class="ttname"><a href="a00060.html#a0184ffea730d663e63f0f60946422da2">tbb::internal::arena_base::my_limit</a></div><div class="ttdeci">atomic&lt; unsigned &gt; my_limit</div><div class="ttdoc">The maximal number of currently busy slots. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00069">arena.h:69</a></div></div>
<div class="ttc" id="a01063_html_ae8bf2edd69c1485ce30d4e88cc7e27d2"><div class="ttname"><a href="a01063.html#ae8bf2edd69c1485ce30d4e88cc7e27d2">__TBB_ISOLATION_ARG</a></div><div class="ttdeci">#define __TBB_ISOLATION_ARG(arg1, isolation)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00072">scheduler_common.h:72</a></div></div>
<div class="ttc" id="a00302_html_aee56a8b51b71d3f96f9c8cacf00fe845"><div class="ttname"><a href="a00302.html#aee56a8b51b71d3f96f9c8cacf00fe845">tbb::internal::generic_scheduler::my_random</a></div><div class="ttdeci">FastRandom my_random</div><div class="ttdoc">Random number generator used for picking a random victim from which to steal. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00162">scheduler.h:162</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a00678_html_a3a635bad42d492013d4a06d1af0c452b"><div class="ttname"><a href="a00678.html#a3a635bad42d492013d4a06d1af0c452b">tbb::internal::scheduler_state::my_affinity_id</a></div><div class="ttdeci">affinity_id my_affinity_id</div><div class="ttdoc">The mailbox id assigned to this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00093">scheduler.h:93</a></div></div>
<div class="ttc" id="a01097_html_a08f1e46bb511c63da3ce07aa9c897bc4"><div class="ttname"><a href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a></div><div class="ttdeci">#define GATHER_STATISTIC(x)</div><div class="ttdef"><b>Definition:</b> <a href="a01097_source.html#l00236">tbb_statistics.h:236</a></div></div>
<div class="ttc" id="a01062_html_a6f1c5fa8b2e50a1a91282165c7a9dae2"><div class="ttname"><a href="a01062.html#a6f1c5fa8b2e50a1a91282165c7a9dae2">EmptyTaskPool</a></div><div class="ttdeci">#define EmptyTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00046">scheduler.h:46</a></div></div>
<div class="ttc" id="a00251_html_ac8e049baba79d8277271decc591c0239"><div class="ttname"><a href="a00251.html#ac8e049baba79d8277271decc591c0239">tbb::internal::FastRandom::get</a></div><div class="ttdeci">unsigned short get()</div><div class="ttdoc">Get a random number. </div><div class="ttdef"><b>Definition:</b> <a href="a01093_source.html#l00142">tbb_misc.h:142</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a00302_html_a33519b4cf710f8c46129672f79fb6ec4"><div class="ttname"><a href="a00302.html#a33519b4cf710f8c46129672f79fb6ec4">tbb::internal::generic_scheduler::is_version_3_task</a></div><div class="ttdeci">static bool is_version_3_task(task &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00133">scheduler.h:133</a></div></div>
<div class="ttc" id="a00678_html_aac9af4d8baddbbc2af433e11297be8a5"><div class="ttname"><a href="a00678.html#aac9af4d8baddbbc2af433e11297be8a5">tbb::internal::scheduler_state::my_innermost_running_task</a></div><div class="ttdeci">task * my_innermost_running_task</div><div class="ttdoc">Innermost task whose task::execute() is running. A dummy task on the outermost level. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00081">scheduler.h:81</a></div></div>
<div class="ttc" id="a01133_html_a5fb219223e38c8bbcc47d7c943f48e54a2e086a4d594002615b167ab481fa32fe"><div class="ttname"><a href="a01133.html#a5fb219223e38c8bbcc47d7c943f48e54a2e086a4d594002615b167ab481fa32fe">tbb::internal::es_task_is_stolen</a></div><div class="ttdoc">Set if the task has been stolen. </div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00182">scheduler_common.h:182</a></div></div>
<div class="ttc" id="a00790_html_a6339e879ab7b6576df404a749f603c51"><div class="ttname"><a href="a00790.html#a6339e879ab7b6576df404a749f603c51">tbb::internal::task_proxy::pool_bit</a></div><div class="ttdeci">static const intptr_t pool_bit</div><div class="ttdef"><b>Definition:</b> <a href="a01024_source.html#l00034">mailbox.h:34</a></div></div>
<div class="ttc" id="a00778_html_a2bfe4567c87e5b783ca8595f95cfdb90"><div class="ttname"><a href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix</a></div><div class="ttdeci">internal::task_prefix &amp; prefix(internal::version_tag *=NULL) const </div><div class="ttdoc">Get reference to corresponding task_prefix. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00941">task.h:941</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_abb8f3f3967170ca9398e55b90220c3cb_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a15b506cb1b1da8e37255fc2fcdf250f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a> * tbb::internal::generic_scheduler::steal_task_from </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a01063.html#ae8bf2edd69c1485ce30d4e88cc7e27d2">__TBB_ISOLATION_ARG</a>(<a class="el" href="a00061.html">arena_slot</a> &amp;victim_arena_slot, <a class="el" href="a01133.html#a090e9968565912983b4fccaa8572765b">isolation_tag</a> isolation)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Steal task from another scheduler's ready pool. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l01110">1110</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01028.html#a644c0db3feb5f77ad8bc19a1b775a2a3">__TBB_cl_evict</a>, <a class="el" href="a00999.html#a739e3f9cf251b0c785e86fba7c8f8c7c">__TBB_control_consistency_helper</a>, <a class="el" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>, <a class="el" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed()</a>, <a class="el" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed()</a>, <a class="el" href="a00059.html#adb8d121b4784a910d8d2861a7062446b">tbb::internal::arena::advertise_new_work()</a>, <a class="el" href="a01113.html#a33e73b97b02726c692bd8d9da8e3fb1b">tbb::atomic_fence()</a>, <a class="el" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>, <a class="el" href="a00062.html#a6b0b8214404af0b2c30f442b33d0d209">tbb::internal::arena_slot_line1::head</a>, <a class="el" href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">is_proxy()</a>, <a class="el" href="a00790.html#a364254f54e3817ee490eab693b9ee916">tbb::internal::task_proxy::is_shared()</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a00302.html#a28bc27fa6c9a0cea424ced83b9f020ac">lock_task_pool()</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00678.html#a6f2fdcecd347bf767e89fda580545c1a">tbb::internal::scheduler_state::my_arena_slot</a>, <a class="el" href="a00678.html#aed181c52b8462c43272d45e625cd31fa">tbb::internal::scheduler_state::my_properties</a>, <a class="el" href="a01133.html#aa2cfd9c6baf73cebacad0fffcd79e7ba">tbb::internal::no_isolation</a>, <a class="el" href="a00790.html#a32d3a7685efa9cf073409277295091a8">tbb::internal::task_proxy::outbox</a>, <a class="el" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer()</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, <a class="el" href="a00481.html#acaf8c50736e4d27b6755f006f1a5a38e">tbb::internal::mail_outbox::recipient_is_idle()</a>, <a class="el" href="a00063.html#af3e2089ebb470604941ca8db193d9927">tbb::internal::arena_slot_line2::tail</a>, <a class="el" href="a00790.html#abedfdfcd6048685cf9aa032ca2380adf">tbb::internal::task_proxy::task_and_tag</a>, <a class="el" href="a00302.html#a5d6340b7bd950b0492e970ff62433198">unlock_task_pool()</a>, and <a class="el" href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90">tbb::internal::arena::wakeup</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#abb8f3f3967170ca9398e55b90220c3cb">steal_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                                                                                                                  {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>** victim_pool = <a class="code" href="a00302.html#a28bc27fa6c9a0cea424ced83b9f020ac">lock_task_pool</a>( &amp;victim_slot );</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">if</span> ( !victim_pool )</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a>* result = NULL;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordtype">size_t</span> H = <a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>(victim_slot.head); <span class="comment">// mirror</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordtype">size_t</span> H0 = H;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordtype">bool</span> tasks_omitted = <span class="keyword">false</span>;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( victim_slot.head, ++H );</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <a class="code" href="a01113.html#a33e73b97b02726c692bd8d9da8e3fb1b">atomic_fence</a>();</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keywordflow">if</span> ( (intptr_t)H &gt; (intptr_t)<a class="code" href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">__TBB_load_relaxed</a>( victim_slot.tail ) ) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <span class="comment">// Stealing attempt failed, deque contents has not been changed by us</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>( ++my_counters.thief_backoffs );</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( victim_slot.head, <span class="comment">/*dead: H = */</span> H0 );</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !result, NULL );</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            <span class="keywordflow">goto</span> unlock;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        }</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="a00999.html#a739e3f9cf251b0c785e86fba7c8f8c7c">__TBB_control_consistency_helper</a>(); <span class="comment">// on victim_slot.tail</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        result = victim_pool[H-1];</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( !is_poisoned( result ), NULL );</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">if</span> ( result ) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <a class="code" href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a>( <span class="keywordflow">if</span> ( isolation == <a class="code" href="a01133.html#aa2cfd9c6baf73cebacad0fffcd79e7ba">no_isolation</a> || isolation == result-&gt;prefix().isolation ) )</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                <span class="keywordflow">if</span> ( !<a class="code" href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">is_proxy</a>( *result ) )</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                task_proxy&amp; tp = *<span class="keyword">static_cast&lt;</span>task_proxy*<span class="keyword">&gt;</span>(result);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                <span class="comment">// If mailed task is likely to be grabbed by its destination thread, skip it.</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                <span class="keywordflow">if</span> ( !(<a class="code" href="a00790.html#a364254f54e3817ee490eab693b9ee916">task_proxy::is_shared</a>( tp.task_and_tag ) &amp;&amp; tp.outbox-&gt;recipient_is_idle()) )</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                <a class="code" href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a>( ++my_counters.proxies_bypassed );</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            }</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            <span class="comment">// The task cannot be executed either due to isolation or proxy contraints.</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            result = NULL;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            tasks_omitted = <span class="keyword">true</span>;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !tasks_omitted ) {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            <span class="comment">// Cleanup the task pool from holes until a task is skipped.</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( H0 == H-1, NULL );</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            <a class="code" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">poison_pointer</a>( victim_pool[H0] );</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            H0 = H;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        }</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    } <span class="keywordflow">while</span> ( !result );</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( result, NULL );</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">// emit &quot;task was consumed&quot; signal</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>( sync_acquired, (<span class="keywordtype">void</span>*)((uintptr_t)&amp;victim_slot+<span class="keyword">sizeof</span>( uintptr_t )) );</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="code" href="a01133.html#a58dafd43fac118e984cc4f19f3901609">poison_pointer</a>( victim_pool[H-1] );</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">if</span> ( tasks_omitted ) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="comment">// Some proxies in the task pool have been omitted. Set the stolen task to NULL.</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        victim_pool[H-1] = NULL;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <a class="code" href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">__TBB_store_relaxed</a>( victim_slot.head, <span class="comment">/*dead: H = */</span> H0 );</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;unlock:</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <a class="code" href="a00302.html#a5d6340b7bd950b0492e970ff62433198">unlock_task_pool</a>( &amp;victim_slot, victim_pool );</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="preprocessor">#if __TBB_PREFETCHING</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <a class="code" href="a01028.html#a644c0db3feb5f77ad8bc19a1b775a2a3">__TBB_cl_evict</a>(&amp;victim_slot.head);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <a class="code" href="a01028.html#a644c0db3feb5f77ad8bc19a1b775a2a3">__TBB_cl_evict</a>(&amp;victim_slot.tail);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">if</span> ( tasks_omitted )</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="comment">// Synchronize with snapshot as the head and tail can be bumped which can falsely trigger EMPTY state</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00059.html#adb8d121b4784a910d8d2861a7062446b">advertise_new_work</a>&lt;<a class="code" href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90">arena::wakeup</a>&gt;();</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;}</div><div class="ttc" id="a01113_html_a33e73b97b02726c692bd8d9da8e3fb1b"><div class="ttname"><a href="a01113.html#a33e73b97b02726c692bd8d9da8e3fb1b">tbb::atomic_fence</a></div><div class="ttdeci">void atomic_fence()</div><div class="ttdoc">Sequentially consistent full memory fence. </div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00343">tbb_machine.h:343</a></div></div>
<div class="ttc" id="a00059_html_a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90"><div class="ttname"><a href="a00059.html#a2380e7751924d1199ffab7b2ee29ddeeac92fe41bfa3a02ea67d83232c9f88b90">tbb::internal::arena::wakeup</a></div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00189">arena.h:189</a></div></div>
<div class="ttc" id="a00302_html_a868812dd8d875a225a6f589fdbaafe54"><div class="ttname"><a href="a00302.html#a868812dd8d875a225a6f589fdbaafe54">tbb::internal::generic_scheduler::is_proxy</a></div><div class="ttdeci">static bool is_proxy(const task &amp;t)</div><div class="ttdoc">True if t is a task_proxy. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00273">scheduler.h:273</a></div></div>
<div class="ttc" id="a01063_html_a63e9a35b6d2bfbfb21b3199dc03acc6d"><div class="ttname"><a href="a01063.html#a63e9a35b6d2bfbfb21b3199dc03acc6d">__TBB_ISOLATION_EXPR</a></div><div class="ttdeci">#define __TBB_ISOLATION_EXPR(isolation)</div><div class="ttdef"><b>Definition:</b> <a href="a01063_source.html#l00071">scheduler_common.h:71</a></div></div>
<div class="ttc" id="a00790_html_a364254f54e3817ee490eab693b9ee916"><div class="ttname"><a href="a00790.html#a364254f54e3817ee490eab693b9ee916">tbb::internal::task_proxy::is_shared</a></div><div class="ttdeci">static bool is_shared(intptr_t tat)</div><div class="ttdoc">True if the proxy is stored both in its sender&amp;#39;s pool and in the destination mailbox. </div><div class="ttdef"><b>Definition:</b> <a href="a01024_source.html#l00050">mailbox.h:50</a></div></div>
<div class="ttc" id="a00302_html_a28bc27fa6c9a0cea424ced83b9f020ac"><div class="ttname"><a href="a00302.html#a28bc27fa6c9a0cea424ced83b9f020ac">tbb::internal::generic_scheduler::lock_task_pool</a></div><div class="ttdeci">task ** lock_task_pool(arena_slot *victim_arena_slot) const </div><div class="ttdoc">Locks victim&amp;#39;s task pool, and returns pointer to it. The pointer can be NULL. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00504">scheduler.cpp:504</a></div></div>
<div class="ttc" id="a00999_html_a739e3f9cf251b0c785e86fba7c8f8c7c"><div class="ttname"><a href="a00999.html#a739e3f9cf251b0c785e86fba7c8f8c7c">__TBB_control_consistency_helper</a></div><div class="ttdeci">#define __TBB_control_consistency_helper()</div><div class="ttdef"><b>Definition:</b> <a href="a00999_source.html#l00064">gcc_generic.h:64</a></div></div>
<div class="ttc" id="a01016_html_a5c4cf3d37a4eee22275de22cb9619863"><div class="ttname"><a href="a01016.html#a5c4cf3d37a4eee22275de22cb9619863">task</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p void ITT_FORMAT p no args __itt_suppress_mode_t unsigned int void size_t ITT_FORMAT d void ITT_FORMAT p void ITT_FORMAT p __itt_model_site __itt_model_site_instance ITT_FORMAT p __itt_model_task * task</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00108">ittnotify_static.h:108</a></div></div>
<div class="ttc" id="a01028_html_a644c0db3feb5f77ad8bc19a1b775a2a3"><div class="ttname"><a href="a01028.html#a644c0db3feb5f77ad8bc19a1b775a2a3">__TBB_cl_evict</a></div><div class="ttdeci">#define __TBB_cl_evict(p)</div><div class="ttdef"><b>Definition:</b> <a href="a01028_source.html#l00038">mic_common.h:38</a></div></div>
<div class="ttc" id="a01097_html_a08f1e46bb511c63da3ce07aa9c897bc4"><div class="ttname"><a href="a01097.html#a08f1e46bb511c63da3ce07aa9c897bc4">GATHER_STATISTIC</a></div><div class="ttdeci">#define GATHER_STATISTIC(x)</div><div class="ttdef"><b>Definition:</b> <a href="a01097_source.html#l00236">tbb_statistics.h:236</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a01133_html_aa2cfd9c6baf73cebacad0fffcd79e7ba"><div class="ttname"><a href="a01133.html#aa2cfd9c6baf73cebacad0fffcd79e7ba">tbb::internal::no_isolation</a></div><div class="ttdeci">const isolation_tag no_isolation</div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00129">task.h:129</a></div></div>
<div class="ttc" id="a01133_html_a9c68ba9b3309fdabe739f77b71ed9a67"><div class="ttname"><a href="a01133.html#a9c68ba9b3309fdabe739f77b71ed9a67">tbb::internal::__TBB_load_relaxed</a></div><div class="ttdeci">T __TBB_load_relaxed(const volatile T &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00739">tbb_machine.h:739</a></div></div>
<div class="ttc" id="a01133_html_a58dafd43fac118e984cc4f19f3901609"><div class="ttname"><a href="a01133.html#a58dafd43fac118e984cc4f19f3901609">tbb::internal::poison_pointer</a></div><div class="ttdeci">void poison_pointer(T *__TBB_atomic &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00309">tbb_stddef.h:309</a></div></div>
<div class="ttc" id="a01133_html_a1f6010c3e550e88ab739adbdee5dfdac"><div class="ttname"><a href="a01133.html#a1f6010c3e550e88ab739adbdee5dfdac">tbb::internal::__TBB_store_relaxed</a></div><div class="ttdeci">void __TBB_store_relaxed(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00743">tbb_machine.h:743</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
<div class="ttc" id="a00302_html_a5d6340b7bd950b0492e970ff62433198"><div class="ttname"><a href="a00302.html#a5d6340b7bd950b0492e970ff62433198">tbb::internal::generic_scheduler::unlock_task_pool</a></div><div class="ttdeci">void unlock_task_pool(arena_slot *victim_arena_slot, task **victim_task_pool) const </div><div class="ttdoc">Unlocks victim&amp;#39;s task pool. </div><div class="ttdef"><b>Definition:</b> <a href="a01061_source.html#l00553">scheduler.cpp:553</a></div></div>
<div class="ttc" id="a00059_html_adb8d121b4784a910d8d2861a7062446b"><div class="ttname"><a href="a00059.html#adb8d121b4784a910d8d2861a7062446b">tbb::internal::arena::advertise_new_work</a></div><div class="ttdeci">void advertise_new_work()</div><div class="ttdoc">If necessary, raise a flag that there is new job in arena. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00393">arena.h:393</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a15b506cb1b1da8e37255fc2fcdf250f0_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a15b506cb1b1da8e37255fc2fcdf250f0_icgraph.svg" width="399" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5d6340b7bd950b0492e970ff62433198"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::unlock_task_pool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00061.html">arena_slot</a> *&#160;</td>
          <td class="paramname"><em>victim_arena_slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00778.html">task</a> **&#160;</td>
          <td class="paramname"><em>victim_task_pool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlocks victim's task pool. </p>
<p>Restores victim_arena_slot-&gt;task_pool munged by lock_task_pool. </p>

<p>Definition at line <a class="el" href="a01061_source.html#l00553">553</a> of file <a class="el" href="a01061_source.html">scheduler.cpp</a>.</p>

<p>References <a class="el" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>, <a class="el" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release()</a>, <a class="el" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>, <a class="el" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <a class="el" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, and <a class="el" href="a00062.html#a9096bfd9df29790ef46791385c5a8162">tbb::internal::arena_slot_line1::task_pool</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a15b506cb1b1da8e37255fc2fcdf250f0">steal_task_from()</a>.</p>
<div class="fragment"><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                                                                                {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( victim_arena_slot, <span class="stringliteral">&quot;empty victim arena slot pointer&quot;</span> );</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a>( victim_arena_slot-&gt;task_pool == <a class="code" href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a>, <span class="stringliteral">&quot;victim arena slot is not locked&quot;</span> );</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a>(<a class="code" href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a>, victim_arena_slot);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">__TBB_store_with_release</a>( victim_arena_slot-&gt;task_pool, victim_task_pool );</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div><div class="ttc" id="a01016_html_ac5a347b47a5603a1f30f6fbf790724b7"><div class="ttname"><a href="a01016.html#ac5a347b47a5603a1f30f6fbf790724b7">sync_releasing</a></div><div class="ttdeci">void const char const char int ITT_FORMAT __itt_group_sync x void const char ITT_FORMAT __itt_group_sync s void ITT_FORMAT __itt_group_sync p void ITT_FORMAT p sync_releasing</div><div class="ttdef"><b>Definition:</b> <a href="a01016_source.html#l00093">ittnotify_static.h:93</a></div></div>
<div class="ttc" id="a01011_html_adf75d9635323cc786c012fe69ceef418"><div class="ttname"><a href="a01011.html#adf75d9635323cc786c012fe69ceef418">ITT_NOTIFY</a></div><div class="ttdeci">#define ITT_NOTIFY(name, obj)</div><div class="ttdef"><b>Definition:</b> <a href="a01011_source.html#l00120">itt_notify.h:120</a></div></div>
<div class="ttc" id="a01133_html_aea57866db2fc3fe1018c89b58109b39a"><div class="ttname"><a href="a01133.html#aea57866db2fc3fe1018c89b58109b39a">tbb::internal::__TBB_store_with_release</a></div><div class="ttdeci">void __TBB_store_with_release(volatile T &amp;location, V value)</div><div class="ttdef"><b>Definition:</b> <a href="a01089_source.html#l00717">tbb_machine.h:717</a></div></div>
<div class="ttc" id="a01062_html_a096a309d24c5ac85036e8970880e5efd"><div class="ttname"><a href="a01062.html#a096a309d24c5ac85036e8970880e5efd">LockedTaskPool</a></div><div class="ttdeci">#define LockedTaskPool</div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00047">scheduler.h:47</a></div></div>
<div class="ttc" id="a01098_html_a7b58d28a34a1717e2ddb591f00658b10"><div class="ttname"><a href="a01098.html#a7b58d28a34a1717e2ddb591f00658b10">__TBB_ASSERT</a></div><div class="ttdeci">#define __TBB_ASSERT(predicate, comment)</div><div class="ttdoc">No-op version of __TBB_ASSERT. </div><div class="ttdef"><b>Definition:</b> <a href="a01098_source.html#l00169">tbb_stddef.h:169</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a5d6340b7bd950b0492e970ff62433198_cgraph.svg" width="392" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a5d6340b7bd950b0492e970ff62433198_icgraph.svg" width="642" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2a0f285acb9cfb21b7df95a386bd6860"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01016.html#a3935b8702cc0ea3c8cc263b5095d0dc0">void</a> tbb::internal::generic_scheduler::wait_until_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00963_source.html#l00719">719</a> of file <a class="el" href="a00963_source.html">arena.cpp</a>.</p>

<p>References <a class="el" href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">local_wait_for_all()</a>, <a class="el" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a>, <a class="el" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>, <a class="el" href="a00060.html#a4a62e36b7d674c0023897118be16498d">tbb::internal::arena_base::my_pool_state</a>, <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>, and <a class="el" href="a00059.html#a06d6b9eb47d6cf8a95f468f410e6769c">tbb::internal::arena::SNAPSHOT_EMPTY</a>.</p>

<p>Referenced by <a class="el" href="a00780.html#ac2e8d6966eaf2b8c898bc6aa65149193">tbb::interface7::internal::task_arena_base::internal_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                         {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>-&gt;<a class="code" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">prefix</a>().ref_count++; <span class="comment">// prevents exit from local_wait_for_all when local work is done enforcing the stealing</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">while</span>( <a class="code" href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">my_arena</a>-&gt;<a class="code" href="a00060.html#a4a62e36b7d674c0023897118be16498d">my_pool_state</a> != <a class="code" href="a00059.html#a06d6b9eb47d6cf8a95f468f410e6769c">arena::SNAPSHOT_EMPTY</a> )</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <a class="code" href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">local_wait_for_all</a>(*<a class="code" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>, NULL);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">my_dummy_task</a>-&gt;<a class="code" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">prefix</a>().ref_count--;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div><div class="ttc" id="a00302_html_abc495d5b077a2ef1b05e15e820555d90"><div class="ttname"><a href="a00302.html#abc495d5b077a2ef1b05e15e820555d90">tbb::internal::generic_scheduler::my_dummy_task</a></div><div class="ttdeci">task * my_dummy_task</div><div class="ttdoc">Fake root task created by slave threads. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00173">scheduler.h:173</a></div></div>
<div class="ttc" id="a00060_html_a4a62e36b7d674c0023897118be16498d"><div class="ttname"><a href="a00060.html#a4a62e36b7d674c0023897118be16498d">tbb::internal::arena_base::my_pool_state</a></div><div class="ttdeci">tbb::atomic&lt; uintptr_t &gt; my_pool_state</div><div class="ttdoc">Current task pool state and estimate of available tasks amount. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00103">arena.h:103</a></div></div>
<div class="ttc" id="a00678_html_a6b830853cb0386a2b8744d4c7dff3a80"><div class="ttname"><a href="a00678.html#a6b830853cb0386a2b8744d4c7dff3a80">tbb::internal::scheduler_state::my_arena</a></div><div class="ttdeci">arena * my_arena</div><div class="ttdoc">The arena that I own (if master) or am servicing at the moment (if worker) </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00078">scheduler.h:78</a></div></div>
<div class="ttc" id="a00778_html_a2bfe4567c87e5b783ca8595f95cfdb90"><div class="ttname"><a href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix</a></div><div class="ttdeci">internal::task_prefix &amp; prefix(internal::version_tag *=NULL) const </div><div class="ttdoc">Get reference to corresponding task_prefix. </div><div class="ttdef"><b>Definition:</b> <a href="a01073_source.html#l00941">task.h:941</a></div></div>
<div class="ttc" id="a00059_html_a06d6b9eb47d6cf8a95f468f410e6769c"><div class="ttname"><a href="a00059.html#a06d6b9eb47d6cf8a95f468f410e6769c">tbb::internal::arena::SNAPSHOT_EMPTY</a></div><div class="ttdeci">static const pool_state_t SNAPSHOT_EMPTY</div><div class="ttdoc">No tasks to steal since last snapshot was taken. </div><div class="ttdef"><b>Definition:</b> <a href="a00964_source.html#l00221">arena.h:221</a></div></div>
<div class="ttc" id="a00302_html_a509997dbb9b97ad2cca0a3af76c04e90"><div class="ttname"><a href="a00302.html#a509997dbb9b97ad2cca0a3af76c04e90">tbb::internal::generic_scheduler::local_wait_for_all</a></div><div class="ttdeci">virtual void local_wait_for_all(task &amp;parent, task *child)=0</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a2a0f285acb9cfb21b7df95a386bd6860_cgraph.svg" width="602" height="155"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a2a0f285acb9cfb21b7df95a386bd6860_icgraph.svg" width="460" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4e7eff5365d63114c100e0a490e04884"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::worker_outermost_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if the scheduler is on the outermost dispatch level in a worker thread. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00579">579</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>References <a class="el" href="a00778.html#a2bfe4567c87e5b783ca8595f95cfdb90">tbb::task::prefix()</a>.</p>

<p>Referenced by <a class="el" href="a00059.html#a2730864663493597ac0fed43356e953b">tbb::internal::arena::free_arena()</a>, and <a class="el" href="a00059.html#aff17fc29650655b080b795be34179d20">tbb::internal::arena::process()</a>.</p>
<div class="fragment"><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                                             {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">is_worker</a>() &amp;&amp; <a class="code" href="a00302.html#a8bd4da1524fbd5b79bb84f0631c2b6e0">outermost_level</a>();</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;}</div><div class="ttc" id="a00302_html_a8bd4da1524fbd5b79bb84f0631c2b6e0"><div class="ttname"><a href="a00302.html#a8bd4da1524fbd5b79bb84f0631c2b6e0">tbb::internal::generic_scheduler::outermost_level</a></div><div class="ttdeci">bool outermost_level() const </div><div class="ttdoc">True if the scheduler is on the outermost dispatch level. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00571">scheduler.h:571</a></div></div>
<div class="ttc" id="a00302_html_a4451a0cd678c9d7f37c80d581e3d4b14"><div class="ttname"><a href="a00302.html#a4451a0cd678c9d7f37c80d581e3d4b14">tbb::internal::generic_scheduler::is_worker</a></div><div class="ttdeci">bool is_worker() const </div><div class="ttdoc">True if running on a worker thread, false otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="a01062_source.html#l00595">scheduler.h:595</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00302_a4e7eff5365d63114c100e0a490e04884_cgraph.svg" width="604" height="104"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="a00302_a4e7eff5365d63114c100e0a490e04884_icgraph.svg" width="100%" height="484"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a276a67d14225fdfbb225cc85299850e3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename SchedulerTraits &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="a00194.html">custom_scheduler</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01062_source.html#l00314">314</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a1190ee0529a9280846bd50c4f50c8398"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t tbb::internal::generic_scheduler::min_task_pool_size = 64</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initial size of the task deque sufficient to serve without reallocation 4 nested parallel_for calls with iteration space of 65535 grains each. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00294">294</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, <a class="el" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler()</a>, <a class="el" href="a00302.html#ae43166ffd9d7fb624158872394832f17">local_spawn()</a>, and <a class="el" href="a00302.html#a0460616fb84af745b12688927ff1bb7d">prepare_task_pool()</a>.</p>

</div>
</div>
<a class="anchor" id="afb5b021643394b6d3f743bea9cb5e2bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tbb::internal::generic_scheduler::my_auto_initialized</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if *this was created by automatic TBB initialization. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00184">184</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00307.html#a5fbd38947c75c1e8494bc1bac598a9fe">tbb::internal::governor::auto_terminate()</a>, <a class="el" href="a00307.html#abf62b8bc4890ad846ff01349f8d46a84">tbb::internal::governor::init_scheduler()</a>, and <a class="el" href="a00307.html#a2fb697c689050c0d4f5438b0e29ad41c">tbb::internal::governor::init_scheduler_weak()</a>.</p>

</div>
</div>
<a class="anchor" id="abc495d5b077a2ef1b05e15e820555d90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a>* tbb::internal::generic_scheduler::my_dummy_task</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fake root task created by slave threads. </p>
<p>The task is used as the "parent" argument to method wait_for_all. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00173">173</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#aa101d77dc7a5e986270073e1c0e09cf6">attach_arena()</a>, <a class="el" href="a00302.html#ac223f7892d65e496c37190c4009ea1f7">cleanup_master()</a>, <a class="el" href="a00302.html#ac7fb04a73dbb75dd8db5c9637bfadeae">create_master()</a>, <a class="el" href="a00302.html#aec1108924834fb3c3e1bc0d2142bccb0">create_worker()</a>, <a class="el" href="a00206.html#a84535e5245a983907d49a04ea0016f6c">tbb::interface7::internal::delegated_task::execute()</a>, <a class="el" href="a00885.html#a04ee8eb618b1ee0e14568319e1ce608f">tbb::interface7::internal::wait_task::execute()</a>, <a class="el" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler()</a>, <a class="el" href="a00514.html#a52c89c3dcc4b72e4543bedbcd2953e19">tbb::internal::nested_arena_context::mimic_outermost_level()</a>, <a class="el" href="a00059.html#aff17fc29650655b080b795be34179d20">tbb::internal::arena::process()</a>, and <a class="el" href="a00302.html#a2a0f285acb9cfb21b7df95a386bd6860">wait_until_empty()</a>.</p>

</div>
</div>
<a class="anchor" id="a52ed26dede8410a72f37bce24cb26239"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a>* tbb::internal::generic_scheduler::my_free_list</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free list of small tasks that can be reused. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00165">165</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">allocate_task()</a>, and <a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="ac652e4a610353888a31352e678955e1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00489.html">market</a>* tbb::internal::generic_scheduler::my_market</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The market I am in. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00159">159</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00059.html#abdde6eec8988e12383ffb9296887fa2f">tbb::internal::arena::arena()</a>, <a class="el" href="a00302.html#aa101d77dc7a5e986270073e1c0e09cf6">attach_arena()</a>, <a class="el" href="a00302.html#ac223f7892d65e496c37190c4009ea1f7">cleanup_master()</a>, <a class="el" href="a00302.html#ac7fb04a73dbb75dd8db5c9637bfadeae">create_master()</a>, <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, <a class="el" href="a00059.html#a334aae7c4cbeabb8f3924589517c0c5f">tbb::internal::arena::enqueue_task()</a>, <a class="el" href="a00059.html#a2730864663493597ac0fed43356e953b">tbb::internal::arena::free_arena()</a>, <a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler()</a>, <a class="el" href="a00302.html#afd799eae7903abc75b7a7aafd36e20db">init_stack_info()</a>, <a class="el" href="a00059.html#a91372ec03de43ecb3cd092952df15a93">tbb::internal::arena::is_out_of_work()</a>, and <a class="el" href="a00059.html#a8641146e918ff0ca4ba30955949d2df3">tbb::internal::arena::restore_priority_if_need()</a>.</p>

</div>
</div>
<a class="anchor" id="aee56a8b51b71d3f96f9c8cacf00fe845"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00251.html">FastRandom</a> tbb::internal::generic_scheduler::my_random</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Random number generator used for picking a random victim from which to steal. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00162">162</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#a21fedf3ec39056fdd7b7718f2421e229">enqueue()</a>, <a class="el" href="a00780.html#a8f872f1315ce7417dd9c00f2550d1abe">tbb::interface7::internal::task_arena_base::internal_enqueue()</a>, <a class="el" href="a00780.html#aa214b4121b92399cfa50b223500219fd">tbb::interface7::internal::task_arena_base::internal_execute()</a>, <a class="el" href="a00059.html#a0b5bb8a2cd741d2d303452e5a0e4b5fd">tbb::internal::arena::occupy_free_slot_in_range()</a>, and <a class="el" href="a00302.html#abb8f3f3967170ca9398e55b90220c3cb">steal_task()</a>.</p>

</div>
</div>
<a class="anchor" id="a8cf8d776a439320e1e001381cf5d4ad7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long tbb::internal::generic_scheduler::my_ref_count</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reference count for scheduler. </p>
<p>Number of <a class="el" href="a00791.html" title="Class delimiting the scope of task scheduler activity. ">task_scheduler_init</a> objects that point to this scheduler </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00177">177</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00307.html#a5fbd38947c75c1e8494bc1bac598a9fe">tbb::internal::governor::auto_terminate()</a>, <a class="el" href="a00307.html#abf62b8bc4890ad846ff01349f8d46a84">tbb::internal::governor::init_scheduler()</a>, and <a class="el" href="a00307.html#a0962408ba1eaf67d0ad741a0749f3a4e">tbb::internal::governor::terminate_scheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="ab5777a002f8b7b3a72cb7fc4a477fb29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00778.html">task</a>* tbb::internal::generic_scheduler::my_return_list</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List of small tasks that have been returned to this scheduler by other schedulers. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00387">387</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">allocate_task()</a>, <a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler()</a>, and <a class="el" href="a00302.html#ad7c11742ee005f6d377095062b42a5d8">generic_scheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="a4bd421a07fae7a1c9e3fa49e005bb513"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a01098.html#a4b711c848444075f0760dd98fe929c39">__TBB_atomic</a> intptr_t tbb::internal::generic_scheduler::my_small_task_count</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of small tasks that have been allocated by this scheduler. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00383">383</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">allocate_task()</a>, and <a class="el" href="a00302.html#a66e6dd672693eb34cd6fd46ed7a7c6a6">free_scheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="ade9f23ce97db8725a9c3718e76aa682d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uintptr_t tbb::internal::generic_scheduler::my_stealing_threshold</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Position in the call stack specifying its maximal filling when stealing is still allowed. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00142">142</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#afd799eae7903abc75b7a7aafd36e20db">init_stack_info()</a>.</p>

</div>
</div>
<a class="anchor" id="afae85a4245c85c65c3cd51e63125f23e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t tbb::internal::generic_scheduler::null_arena_index = ~size_t(0)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a01062_source.html#l00148">148</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

</div>
</div>
<a class="anchor" id="afbb75edc69c2ed1bcbf70098ca24a523"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t tbb::internal::generic_scheduler::quick_task_size = 256-<a class="el" href="a01133.html#a0630d59441f75e740be0b003d2922df8">task_prefix_reservation_size</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If sizeof(task) is &lt;=quick_task_size, it is handled on a free list instead of malloc'd. </p>

<p>Definition at line <a class="el" href="a01062_source.html#l00131">131</a> of file <a class="el" href="a01062_source.html">scheduler.h</a>.</p>

<p>Referenced by <a class="el" href="a00302.html#aa0d316e9f3063c6b57fa21e0716d4d77">allocate_task()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="a01062_source.html">scheduler.h</a></li>
<li><a class="el" href="a00963_source.html">arena.cpp</a></li>
<li><a class="el" href="a01061_source.html">scheduler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p></p>
Copyright &copy; 2005-2019 Intel Corporation.  All Rights Reserved.
<p></p>
Intel, Pentium, Intel Xeon, Itanium, Intel XScale and VTune are
registered trademarks or trademarks of Intel Corporation or its
subsidiaries in the United States and other countries.
<p></p>
* Other names and brands may be claimed as the property of others.
